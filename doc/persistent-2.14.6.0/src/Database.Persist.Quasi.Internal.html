<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveLift #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE PatternGuards #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE StrictData #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-comment">-- | This @Internal@ module may have breaking changes that will not be reflected</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- in major version bumps. Please use &quot;Database.Persist.Quasi&quot; instead. If you</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- need something in this module, please file an issue on GitHub.</span><span>
</span><span id="line-14"></span><span class="hs-comment">--</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-16"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Database.Persist.Quasi.Internal</span><span>
</span><span id="line-17"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#parse"><span class="hs-identifier">parse</span></a></span><span>
</span><span id="line-18"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier">PersistSettings</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#upperCaseSettings"><span class="hs-identifier">upperCaseSettings</span></a></span><span>
</span><span id="line-20"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#lowerCaseSettings"><span class="hs-identifier">lowerCaseSettings</span></a></span><span>
</span><span id="line-21"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#toFKNameInfixed"><span class="hs-identifier">toFKNameInfixed</span></a></span><span>
</span><span id="line-22"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier">Token</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier">Line</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#preparse"><span class="hs-identifier">preparse</span></a></span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#parseLine"><span class="hs-identifier">parseLine</span></a></span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#parseFieldType"><span class="hs-identifier">parseFieldType</span></a></span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#associateLines"><span class="hs-identifier">associateLines</span></a></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier">LinesWithComments</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#parseEntityFields"><span class="hs-identifier">parseEntityFields</span></a></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeColsEx"><span class="hs-identifier">takeColsEx</span></a></span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><span class="hs-comment">-- * UnboundEntityDef</span></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundEntityDef"><span class="hs-identifier">UnboundEntityDef</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#getUnboundEntityNameHS"><span class="hs-identifier">getUnboundEntityNameHS</span></a></span><span>
</span><span id="line-34"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#unbindEntityDef"><span class="hs-identifier">unbindEntityDef</span></a></span><span>
</span><span id="line-35"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#getUnboundFieldDefs"><span class="hs-identifier">getUnboundFieldDefs</span></a></span><span>
</span><span id="line-36"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignDef"><span class="hs-identifier">UnboundForeignDef</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#getSqlNameOr"><span class="hs-identifier">getSqlNameOr</span></a></span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier">UnboundFieldDef</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundCompositeDef"><span class="hs-identifier">UnboundCompositeDef</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundIdDef"><span class="hs-identifier">UnboundIdDef</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#unbindFieldDef"><span class="hs-identifier">unbindFieldDef</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#isUnboundFieldNullable"><span class="hs-identifier">isUnboundFieldNullable</span></a></span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#unboundIdDefToFieldDef"><span class="hs-identifier">unboundIdDefToFieldDef</span></a></span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PrimarySpec"><span class="hs-identifier">PrimarySpec</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#mkAutoIdField%27"><span class="hs-identifier">mkAutoIdField'</span></a></span><span>
</span><span id="line-46"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignFieldList"><span class="hs-identifier">UnboundForeignFieldList</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ForeignFieldReference"><span class="hs-identifier">ForeignFieldReference</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#mkKeyConType"><span class="hs-identifier">mkKeyConType</span></a></span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#isHaskellUnboundField"><span class="hs-identifier">isHaskellUnboundField</span></a></span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldTypeLit"><span class="hs-identifier">FieldTypeLit</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">lines</span></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Alternative</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;|&gt;)</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Char</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">isDigit</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">isLower</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">isSpace</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">isUpper</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">toLower</span></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">find</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">foldl'</span></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NEL</span></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">listToMaybe</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">mapMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">mappend</span></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Database.Persist.EntityDef.Internal.html"><span class="hs-identifier">Database.Persist.EntityDef.Internal</span></a></span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Database.Persist.Types.html"><span class="hs-identifier">Database.Persist.Types</span></a></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html"><span class="hs-identifier">Database.Persist.Types.Base</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Language.Haskell.TH.Syntax</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Lift</span></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Text.Read</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">R</span></span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">data</span><span> </span><span id="ParseState"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ParseState"><span class="hs-identifier hs-var">ParseState</span></a></span></span><span> </span><span id="local-6989586621679785979"><span class="annot"><a href="#local-6989586621679785979"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PSDone"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PSDone"><span class="hs-identifier hs-var">PSDone</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="PSFail"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PSFail"><span class="hs-identifier hs-var">PSFail</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="PSSuccess"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PSSuccess"><span class="hs-identifier hs-var">PSSuccess</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679785979"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679786515"><span id="local-6989586621679786522"><span id="local-6989586621679786525"><span class="annot"><span class="annottext">Int -&gt; ParseState a -&gt; ShowS
[ParseState a] -&gt; ShowS
ParseState a -&gt; [Char]
(Int -&gt; ParseState a -&gt; ShowS)
-&gt; (ParseState a -&gt; [Char])
-&gt; ([ParseState a] -&gt; ShowS)
-&gt; Show (ParseState a)
forall a. Show a =&gt; Int -&gt; ParseState a -&gt; ShowS
forall a. Show a =&gt; [ParseState a] -&gt; ShowS
forall a. Show a =&gt; ParseState a -&gt; [Char]
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: forall a. Show a =&gt; Int -&gt; ParseState a -&gt; ShowS
showsPrec :: Int -&gt; ParseState a -&gt; ShowS
$cshow :: forall a. Show a =&gt; ParseState a -&gt; [Char]
show :: ParseState a -&gt; [Char]
$cshowList :: forall a. Show a =&gt; [ParseState a] -&gt; ShowS
showList :: [ParseState a] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#parseFieldType"><span class="hs-identifier hs-type">parseFieldType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span>
</span><span id="line-75"></span><span id="parseFieldType"><span class="annot"><span class="annottext">parseFieldType :: Text -&gt; Either [Char] FieldType
</span><a href="Database.Persist.Quasi.Internal.html#parseFieldType"><span class="hs-identifier hs-var hs-var">parseFieldType</span></a></span></span><span> </span><span id="local-6989586621679786528"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786528"><span class="hs-identifier hs-var">t0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ParseState FieldType
</span><a href="#local-6989586621679786529"><span class="hs-identifier hs-var">parseApplyFT</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786528"><span class="hs-identifier hs-var">t0</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-77"></span><span>        </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PSSuccess"><span class="hs-identifier hs-type">PSSuccess</span></a></span><span> </span><span id="local-6989586621679786530"><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621679786530"><span class="hs-identifier hs-var">ft</span></a></span></span><span> </span><span id="local-6989586621679786531"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786531"><span class="hs-identifier hs-var">t'</span></a></span></span><span>
</span><span id="line-78"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; Bool
</span><span class="hs-identifier hs-var">T.all</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isSpace</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786531"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldType -&gt; Either [Char] FieldType
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621679786530"><span class="hs-identifier hs-var">ft</span></a></span><span>
</span><span id="line-79"></span><span>        </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PSFail"><span class="hs-identifier hs-type">PSFail</span></a></span><span> </span><span id="local-6989586621679786533"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679786533"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Either [Char] FieldType
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Either [Char] FieldType)
-&gt; [Char] -&gt; Either [Char] FieldType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;PSFail &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679786533"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-80"></span><span>        </span><span id="local-6989586621679786534"><span class="annot"><span class="annottext">ParseState FieldType
</span><a href="#local-6989586621679786534"><span class="hs-identifier hs-var">other</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Either [Char] FieldType
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Either [Char] FieldType)
-&gt; [Char] -&gt; Either [Char] FieldType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ParseState FieldType -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">ParseState FieldType
</span><a href="#local-6989586621679786534"><span class="hs-identifier hs-var">other</span></a></span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><a href="#local-6989586621679786529"><span class="hs-identifier hs-type">parseApplyFT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ParseState"><span class="hs-identifier hs-type">ParseState</span></a></span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span>
</span><span id="line-83"></span><span>    </span><span id="local-6989586621679786529"><span class="annot"><span class="annottext">parseApplyFT :: Text -&gt; ParseState FieldType
</span><a href="#local-6989586621679786529"><span class="hs-identifier hs-var hs-var">parseApplyFT</span></a></span></span><span> </span><span id="local-6989586621679786536"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786536"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-84"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">([FieldType] -&gt; [FieldType]) -&gt; Text -&gt; ParseState [FieldType]
forall a. ([FieldType] -&gt; a) -&gt; Text -&gt; ParseState a
</span><a href="#local-6989586621679786537"><span class="hs-identifier hs-var">goMany</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldType] -&gt; [FieldType]
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786536"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-85"></span><span>            </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PSSuccess"><span class="hs-identifier hs-type">PSSuccess</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786539"><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621679786539"><span class="hs-identifier hs-var">ft</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679786540"><span class="annot"><span class="annottext">[FieldType]
</span><a href="#local-6989586621679786540"><span class="hs-identifier hs-var">fts</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679786541"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786541"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldType -&gt; Text -&gt; ParseState FieldType
forall a. a -&gt; Text -&gt; ParseState a
</span><a href="Database.Persist.Quasi.Internal.html#PSSuccess"><span class="hs-identifier hs-var">PSSuccess</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(FieldType -&gt; FieldType -&gt; FieldType)
-&gt; FieldType -&gt; [FieldType] -&gt; FieldType
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">FieldType -&gt; FieldType -&gt; FieldType
</span><a href="Database.Persist.Types.Base.html#FTApp"><span class="hs-identifier hs-var">FTApp</span></a></span><span> </span><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621679786539"><span class="hs-identifier hs-var">ft</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldType]
</span><a href="#local-6989586621679786540"><span class="hs-identifier hs-var">fts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786541"><span class="hs-identifier hs-var">t'</span></a></span><span>
</span><span id="line-86"></span><span>            </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PSSuccess"><span class="hs-identifier hs-type">PSSuccess</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ParseState FieldType
forall a. [Char] -&gt; ParseState a
</span><a href="Database.Persist.Quasi.Internal.html#PSFail"><span class="hs-identifier hs-var">PSFail</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;empty&quot;</span></span><span>
</span><span id="line-87"></span><span>            </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PSFail"><span class="hs-identifier hs-type">PSFail</span></a></span><span> </span><span id="local-6989586621679786543"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679786543"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ParseState FieldType
forall a. [Char] -&gt; ParseState a
</span><a href="Database.Persist.Quasi.Internal.html#PSFail"><span class="hs-identifier hs-var">PSFail</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679786543"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-88"></span><span>            </span><span class="annot"><span class="annottext">ParseState [FieldType]
</span><a href="Database.Persist.Quasi.Internal.html#PSDone"><span class="hs-identifier hs-var">PSDone</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ParseState FieldType
forall a. ParseState a
</span><a href="Database.Persist.Quasi.Internal.html#PSDone"><span class="hs-identifier hs-var">PSDone</span></a></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span>    </span><span class="annot"><a href="#local-6989586621679786544"><span class="hs-identifier hs-type">parseEnclosed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ParseState"><span class="hs-identifier hs-type">ParseState</span></a></span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span>
</span><span id="line-91"></span><span>    </span><span id="local-6989586621679786544"><span class="annot"><span class="annottext">parseEnclosed :: Char -&gt; (FieldType -&gt; FieldType) -&gt; Text -&gt; ParseState FieldType
</span><a href="#local-6989586621679786544"><span class="hs-identifier hs-var hs-var">parseEnclosed</span></a></span></span><span> </span><span id="local-6989586621679786545"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786545"><span class="hs-identifier hs-var">end</span></a></span></span><span> </span><span id="local-6989586621679786546"><span class="annot"><span class="annottext">FieldType -&gt; FieldType
</span><a href="#local-6989586621679786546"><span class="hs-identifier hs-var">ftMod</span></a></span></span><span> </span><span id="local-6989586621679786547"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786547"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-92"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786548"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786548"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786549"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786549"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; (Text, Text)
</span><span class="hs-identifier hs-var">T.break</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786545"><span class="hs-identifier hs-var">end</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786547"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-93"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ParseState FieldType
</span><a href="#local-6989586621679786529"><span class="hs-identifier hs-var">parseApplyFT</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786548"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-94"></span><span>          </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PSSuccess"><span class="hs-identifier hs-type">PSSuccess</span></a></span><span> </span><span id="local-6989586621679786551"><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621679786551"><span class="hs-identifier hs-var">ft</span></a></span></span><span> </span><span id="local-6989586621679786552"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786552"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.dropWhile</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isSpace</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786552"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe (Char, Text)
</span><span class="hs-identifier hs-var">T.uncons</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786549"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-95"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786555"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786555"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786556"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786556"><span class="hs-identifier hs-var">t''</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786555"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786545"><span class="hs-identifier hs-var">end</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FieldType -&gt; Text -&gt; ParseState FieldType
forall a. a -&gt; Text -&gt; ParseState a
</span><a href="Database.Persist.Quasi.Internal.html#PSSuccess"><span class="hs-identifier hs-var">PSSuccess</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldType -&gt; FieldType
</span><a href="#local-6989586621679786546"><span class="hs-identifier hs-var">ftMod</span></a></span><span> </span><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621679786551"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786556"><span class="hs-identifier hs-var">t''</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`Data.Monoid.mappend`</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786552"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span>              </span><span class="hs-special">(</span><span id="local-6989586621679786557"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786557"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786558"><span class="annot"><span class="annottext">Maybe (Char, Text)
</span><a href="#local-6989586621679786558"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ParseState FieldType
forall a. [Char] -&gt; ParseState a
</span><a href="Database.Persist.Quasi.Internal.html#PSFail"><span class="hs-identifier hs-var">PSFail</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; ParseState FieldType) -&gt; [Char] -&gt; ParseState FieldType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Text, Text, Maybe (Char, Text)) -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786549"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786557"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (Char, Text)
</span><a href="#local-6989586621679786558"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>          </span><span id="local-6989586621679786559"><span class="annot"><span class="annottext">ParseState FieldType
</span><a href="#local-6989586621679786559"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ParseState FieldType
forall a. [Char] -&gt; ParseState a
</span><a href="Database.Persist.Quasi.Internal.html#PSFail"><span class="hs-identifier hs-var">PSFail</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; ParseState FieldType) -&gt; [Char] -&gt; ParseState FieldType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ParseState FieldType -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">ParseState FieldType
</span><a href="#local-6989586621679786559"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><a href="#local-6989586621679786560"><span class="hs-identifier hs-type">parse1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ParseState"><span class="hs-identifier hs-type">ParseState</span></a></span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span>
</span><span id="line-100"></span><span>    </span><span id="local-6989586621679786560"><span class="annot"><span class="annottext">parse1 :: Text -&gt; ParseState FieldType
</span><a href="#local-6989586621679786560"><span class="hs-identifier hs-var hs-var">parse1</span></a></span></span><span> </span><span id="local-6989586621679786561"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786561"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseState FieldType
-&gt; Maybe (ParseState FieldType) -&gt; ParseState FieldType
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; ParseState FieldType
forall a. [Char] -&gt; ParseState a
</span><a href="Database.Persist.Quasi.Internal.html#PSFail"><span class="hs-identifier hs-var">PSFail</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786561"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (ParseState FieldType) -&gt; ParseState FieldType)
-&gt; Maybe (ParseState FieldType) -&gt; ParseState FieldType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-101"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe (Char, Text)
</span><span class="hs-identifier hs-var">T.uncons</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786561"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-102"></span><span>            </span><span class="annot"><span class="annottext">Maybe (Char, Text)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ParseState FieldType -&gt; Maybe (ParseState FieldType)
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">ParseState FieldType
forall a. ParseState a
</span><a href="Database.Persist.Quasi.Internal.html#PSDone"><span class="hs-identifier hs-var">PSDone</span></a></span><span>
</span><span id="line-103"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786562"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786562"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786563"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786563"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-104"></span><span>                </span><span class="annot"><span class="annottext">Char -&gt; Text -&gt; Maybe (ParseState FieldType)
</span><a href="#local-6989586621679786564"><span class="hs-identifier hs-var">parseSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786562"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786563"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-105"></span><span>                </span><span class="annot"><span class="annottext">Maybe (ParseState FieldType)
-&gt; Maybe (ParseState FieldType) -&gt; Maybe (ParseState FieldType)
forall a. Maybe a -&gt; Maybe a -&gt; Maybe a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Text -&gt; Maybe (ParseState FieldType)
forall {m :: * -&gt; *}.
(Monad m, Alternative m) =&gt;
Char -&gt; Text -&gt; m (ParseState FieldType)
</span><a href="#local-6989586621679786565"><span class="hs-identifier hs-var">parseParenEnclosed</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786562"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786563"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-106"></span><span>                </span><span class="annot"><span class="annottext">Maybe (ParseState FieldType)
-&gt; Maybe (ParseState FieldType) -&gt; Maybe (ParseState FieldType)
forall a. Maybe a -&gt; Maybe a -&gt; Maybe a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Text -&gt; Maybe (ParseState FieldType)
forall {m :: * -&gt; *}.
(Monad m, Alternative m) =&gt;
Char -&gt; Text -&gt; m (ParseState FieldType)
</span><a href="#local-6989586621679786566"><span class="hs-identifier hs-var">parseList</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786562"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786563"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-107"></span><span>                </span><span class="annot"><span class="annottext">Maybe (ParseState FieldType)
-&gt; Maybe (ParseState FieldType) -&gt; Maybe (ParseState FieldType)
forall a. Maybe a -&gt; Maybe a -&gt; Maybe a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Text -&gt; Maybe (ParseState FieldType)
</span><a href="#local-6989586621679786567"><span class="hs-identifier hs-var">parseNumericLit</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786562"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786563"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-108"></span><span>                </span><span class="annot"><span class="annottext">Maybe (ParseState FieldType)
-&gt; Maybe (ParseState FieldType) -&gt; Maybe (ParseState FieldType)
forall a. Maybe a -&gt; Maybe a -&gt; Maybe a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Text -&gt; Maybe (ParseState FieldType)
</span><a href="#local-6989586621679786568"><span class="hs-identifier hs-var">parseTextLit</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786562"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786563"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-109"></span><span>                </span><span class="annot"><span class="annottext">Maybe (ParseState FieldType)
-&gt; Maybe (ParseState FieldType) -&gt; Maybe (ParseState FieldType)
forall a. Maybe a -&gt; Maybe a -&gt; Maybe a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Text -&gt; Maybe (ParseState FieldType)
forall {m :: * -&gt; *}.
(Monad m, Alternative m) =&gt;
Char -&gt; Text -&gt; m (ParseState FieldType)
</span><a href="#local-6989586621679786569"><span class="hs-identifier hs-var">parseTypeCon</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786562"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786563"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><a href="#local-6989586621679786564"><span class="hs-identifier hs-type">parseSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ParseState"><span class="hs-identifier hs-type">ParseState</span></a></span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>    </span><span id="local-6989586621679786564"><span class="annot"><span class="annottext">parseSpace :: Char -&gt; Text -&gt; Maybe (ParseState FieldType)
</span><a href="#local-6989586621679786564"><span class="hs-identifier hs-var hs-var">parseSpace</span></a></span></span><span> </span><span id="local-6989586621679786570"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786570"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679786571"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786571"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-113"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; Maybe ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isSpace</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786570"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>        </span><span class="annot"><span class="annottext">ParseState FieldType -&gt; Maybe (ParseState FieldType)
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ParseState FieldType -&gt; Maybe (ParseState FieldType))
-&gt; ParseState FieldType -&gt; Maybe (ParseState FieldType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; ParseState FieldType
</span><a href="#local-6989586621679786560"><span class="hs-identifier hs-var">parse1</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.dropWhile</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isSpace</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786571"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span>    </span><span id="local-6989586621679786565"><span class="annot"><span class="annottext">parseParenEnclosed :: Char -&gt; Text -&gt; m (ParseState FieldType)
</span><a href="#local-6989586621679786565"><span class="hs-identifier hs-var hs-var">parseParenEnclosed</span></a></span></span><span> </span><span id="local-6989586621679786587"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679786588"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-117"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; m ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786587"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'('</span></span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span>        </span><span class="annot"><span class="annottext">ParseState FieldType -&gt; m (ParseState FieldType)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ParseState FieldType -&gt; m (ParseState FieldType))
-&gt; ParseState FieldType -&gt; m (ParseState FieldType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; (FieldType -&gt; FieldType) -&gt; Text -&gt; ParseState FieldType
</span><a href="#local-6989586621679786544"><span class="hs-identifier hs-var">parseEnclosed</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">')'</span></span><span> </span><span class="annot"><span class="annottext">FieldType -&gt; FieldType
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786588"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span>    </span><span id="local-6989586621679786566"><span class="annot"><span class="annottext">parseList :: Char -&gt; Text -&gt; m (ParseState FieldType)
</span><a href="#local-6989586621679786566"><span class="hs-identifier hs-var hs-var">parseList</span></a></span></span><span> </span><span id="local-6989586621679786602"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786602"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679786603"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786603"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-121"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; m ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786602"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'['</span></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>        </span><span class="annot"><span class="annottext">ParseState FieldType -&gt; m (ParseState FieldType)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ParseState FieldType -&gt; m (ParseState FieldType))
-&gt; ParseState FieldType -&gt; m (ParseState FieldType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; (FieldType -&gt; FieldType) -&gt; Text -&gt; ParseState FieldType
</span><a href="#local-6989586621679786544"><span class="hs-identifier hs-var">parseEnclosed</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">']'</span></span><span> </span><span class="annot"><span class="annottext">FieldType -&gt; FieldType
</span><a href="Database.Persist.Types.Base.html#FTList"><span class="hs-identifier hs-var">FTList</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786603"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span>    </span><span class="annot"><a href="#local-6989586621679786568"><span class="hs-identifier hs-type">parseTextLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ParseState"><span class="hs-identifier hs-type">ParseState</span></a></span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>    </span><span id="local-6989586621679786568"><span class="annot"><span class="annottext">parseTextLit :: Char -&gt; Text -&gt; Maybe (ParseState FieldType)
</span><a href="#local-6989586621679786568"><span class="hs-identifier hs-var hs-var">parseTextLit</span></a></span></span><span> </span><span id="local-6989586621679786605"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786605"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679786606"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786606"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-126"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; Maybe ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786605"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&quot;'</span></span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786607"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786607"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786608"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786608"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; (Text, Text)
</span><span class="hs-identifier hs-var">T.break</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&quot;'</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786606"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-128"></span><span>            </span><span id="local-6989586621679786609"><span class="annot"><span class="annottext">lit :: FieldType
</span><a href="#local-6989586621679786609"><span class="hs-identifier hs-var hs-var">lit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldTypeLit -&gt; FieldType
</span><a href="Database.Persist.Types.Base.html#FTLit"><span class="hs-identifier hs-var">FTLit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; FieldTypeLit
</span><a href="Database.Persist.Types.Base.html#TextTypeLit"><span class="hs-identifier hs-var">TextTypeLit</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786607"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>        </span><span class="annot"><span class="annottext">ParseState FieldType -&gt; Maybe (ParseState FieldType)
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ParseState FieldType -&gt; Maybe (ParseState FieldType))
-&gt; ParseState FieldType -&gt; Maybe (ParseState FieldType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldType -&gt; Text -&gt; ParseState FieldType
forall a. a -&gt; Text -&gt; ParseState a
</span><a href="Database.Persist.Quasi.Internal.html#PSSuccess"><span class="hs-identifier hs-var">PSSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621679786609"><span class="hs-identifier hs-var">lit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786608"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span>    </span><span class="annot"><a href="#local-6989586621679786567"><span class="hs-identifier hs-type">parseNumericLit</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ParseState"><span class="hs-identifier hs-type">ParseState</span></a></span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>    </span><span id="local-6989586621679786567"><span class="annot"><span class="annottext">parseNumericLit :: Char -&gt; Text -&gt; Maybe (ParseState FieldType)
</span><a href="#local-6989586621679786567"><span class="hs-identifier hs-var hs-var">parseNumericLit</span></a></span></span><span> </span><span id="local-6989586621679786613"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786613"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679786614"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786614"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-133"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; Maybe ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isDigit</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786613"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; Bool
</span><span class="hs-identifier hs-var">T.all</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isDigit</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786614"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786616"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786616"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786617"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786617"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; (Text, Text)
</span><a href="Database.Persist.Quasi.Internal.html#breakAtNextSpace"><span class="hs-identifier hs-var">breakAtNextSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786614"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-135"></span><span>        </span><span id="local-6989586621679786619"><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621679786619"><span class="hs-identifier hs-var">lit</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FieldTypeLit -&gt; FieldType
</span><a href="Database.Persist.Types.Base.html#FTLit"><span class="hs-identifier hs-var">FTLit</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldTypeLit -&gt; FieldType)
-&gt; (Integer -&gt; FieldTypeLit) -&gt; Integer -&gt; FieldType
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; FieldTypeLit
</span><a href="Database.Persist.Types.Base.html#IntTypeLit"><span class="hs-identifier hs-var">IntTypeLit</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; FieldType) -&gt; Maybe Integer -&gt; Maybe FieldType
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Integer
forall a. Read a =&gt; Text -&gt; Maybe a
</span><a href="Database.Persist.Quasi.Internal.html#readMaybe"><span class="hs-identifier hs-var">readMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.cons</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786613"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786616"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-136"></span><span>        </span><span class="annot"><span class="annottext">ParseState FieldType -&gt; Maybe (ParseState FieldType)
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ParseState FieldType -&gt; Maybe (ParseState FieldType))
-&gt; ParseState FieldType -&gt; Maybe (ParseState FieldType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldType -&gt; Text -&gt; ParseState FieldType
forall a. a -&gt; Text -&gt; ParseState a
</span><a href="Database.Persist.Quasi.Internal.html#PSSuccess"><span class="hs-identifier hs-var">PSSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621679786619"><span class="hs-identifier hs-var">lit</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786617"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span>    </span><span id="local-6989586621679786569"><span class="annot"><span class="annottext">parseTypeCon :: Char -&gt; Text -&gt; m (ParseState FieldType)
</span><a href="#local-6989586621679786569"><span class="hs-identifier hs-var hs-var">parseTypeCon</span></a></span></span><span> </span><span id="local-6989586621679786638"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786638"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621679786639"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786639"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-139"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; m ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isUpper</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786638"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786638"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\''</span></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786641"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786641"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786642"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786642"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; (Text, Text)
</span><a href="Database.Persist.Quasi.Internal.html#breakAtNextSpace"><span class="hs-identifier hs-var">breakAtNextSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786639"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-141"></span><span>        </span><span class="annot"><span class="annottext">ParseState FieldType -&gt; m (ParseState FieldType)
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ParseState FieldType -&gt; m (ParseState FieldType))
-&gt; ParseState FieldType -&gt; m (ParseState FieldType)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldType -&gt; Text -&gt; ParseState FieldType
forall a. a -&gt; Text -&gt; ParseState a
</span><a href="Database.Persist.Quasi.Internal.html#PSSuccess"><span class="hs-identifier hs-var">PSSuccess</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Text -&gt; FieldType
</span><a href="Database.Persist.Quasi.Internal.html#parseFieldTypePiece"><span class="hs-identifier hs-var">parseFieldTypePiece</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786638"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786641"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786642"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span>    </span><span id="local-6989586621679785977"><span class="annot"><a href="#local-6989586621679786537"><span class="hs-identifier hs-type">goMany</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679785977"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ParseState"><span class="hs-identifier hs-type">ParseState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679785977"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-144"></span><span>    </span><span id="local-6989586621679786537"><span class="annot"><span class="annottext">goMany :: forall a. ([FieldType] -&gt; a) -&gt; Text -&gt; ParseState a
</span><a href="#local-6989586621679786537"><span class="hs-identifier hs-var hs-var">goMany</span></a></span></span><span> </span><span id="local-6989586621679786644"><span class="annot"><span class="annottext">[FieldType] -&gt; a
</span><a href="#local-6989586621679786644"><span class="hs-identifier hs-var">front</span></a></span></span><span> </span><span id="local-6989586621679786645"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786645"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-145"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ParseState FieldType
</span><a href="#local-6989586621679786560"><span class="hs-identifier hs-var">parse1</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786645"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-146"></span><span>            </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PSSuccess"><span class="hs-identifier hs-type">PSSuccess</span></a></span><span> </span><span id="local-6989586621679786646"><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621679786646"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679786647"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786647"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([FieldType] -&gt; a) -&gt; Text -&gt; ParseState a
forall a. ([FieldType] -&gt; a) -&gt; Text -&gt; ParseState a
</span><a href="#local-6989586621679786537"><span class="hs-identifier hs-var">goMany</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[FieldType] -&gt; a
</span><a href="#local-6989586621679786644"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="annot"><span class="annottext">([FieldType] -&gt; a)
-&gt; ([FieldType] -&gt; [FieldType]) -&gt; [FieldType] -&gt; a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621679786646"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">FieldType -&gt; [FieldType] -&gt; [FieldType]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786647"><span class="hs-identifier hs-var">t'</span></a></span><span>
</span><span id="line-147"></span><span>            </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PSFail"><span class="hs-identifier hs-type">PSFail</span></a></span><span> </span><span id="local-6989586621679786648"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679786648"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ParseState a
forall a. [Char] -&gt; ParseState a
</span><a href="Database.Persist.Quasi.Internal.html#PSFail"><span class="hs-identifier hs-var">PSFail</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679786648"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-148"></span><span>            </span><span class="annot"><span class="annottext">ParseState FieldType
</span><a href="Database.Persist.Quasi.Internal.html#PSDone"><span class="hs-identifier hs-var">PSDone</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; Text -&gt; ParseState a
forall a. a -&gt; Text -&gt; ParseState a
</span><a href="Database.Persist.Quasi.Internal.html#PSSuccess"><span class="hs-identifier hs-var">PSSuccess</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[FieldType] -&gt; a
</span><a href="#local-6989586621679786644"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786645"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#breakAtNextSpace"><span class="hs-identifier hs-type">breakAtNextSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span id="breakAtNextSpace"><span class="annot"><span class="annottext">breakAtNextSpace :: Text -&gt; (Text, Text)
</span><a href="Database.Persist.Quasi.Internal.html#breakAtNextSpace"><span class="hs-identifier hs-var hs-var">breakAtNextSpace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; (Text, Text)
</span><span class="hs-identifier hs-var">T.break</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isSpace</span></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#parseFieldTypePiece"><span class="hs-identifier hs-type">parseFieldTypePiece</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span>
</span><span id="line-155"></span><span id="parseFieldTypePiece"><span class="annot"><span class="annottext">parseFieldTypePiece :: Char -&gt; Text -&gt; FieldType
</span><a href="Database.Persist.Quasi.Internal.html#parseFieldTypePiece"><span class="hs-identifier hs-var hs-var">parseFieldTypePiece</span></a></span></span><span> </span><span id="local-6989586621679786649"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786649"><span class="hs-identifier hs-var">fstChar</span></a></span></span><span> </span><span id="local-6989586621679786650"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786650"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786649"><span class="hs-identifier hs-var">fstChar</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-157"></span><span>        </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\''</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-158"></span><span>            </span><span class="annot"><span class="annottext">Text -&gt; FieldType
</span><a href="Database.Persist.Types.Base.html#FTTypePromoted"><span class="hs-identifier hs-var">FTTypePromoted</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786650"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-159"></span><span>        </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-160"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679786652"><span class="annot"><span class="annottext">t :: Text
</span><a href="#local-6989586621679786652"><span class="hs-identifier hs-var hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.cons</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786649"><span class="hs-identifier hs-var">fstChar</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786650"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-161"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Text -&gt; (Text, Text)
Text -&gt; Text -&gt; (Text, Text)
</span><span class="hs-identifier hs-var">T.breakOnEnd</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786652"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-162"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; Text -&gt; FieldType
</span><a href="Database.Persist.Types.Base.html#FTTypeCon"><span class="hs-identifier hs-var">FTTypeCon</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786652"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-163"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; Text -&gt; FieldType
</span><a href="Database.Persist.Types.Base.html#FTTypeCon"><span class="hs-identifier hs-var">FTTypeCon</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786652"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-164"></span><span>                </span><span class="hs-special">(</span><span id="local-6989586621679786655"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786655"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786656"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786656"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; Text -&gt; FieldType
</span><a href="Database.Persist.Types.Base.html#FTTypeCon"><span class="hs-identifier hs-var">FTTypeCon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Maybe Text) -&gt; Text -&gt; Maybe Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Text
Text -&gt; Text
</span><span class="hs-identifier hs-var">T.init</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786655"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786656"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="hs-keyword">data</span><span> </span><span id="PersistSettings"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-var">PersistSettings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PersistSettings"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-var">PersistSettings</span></a></span></span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="psToDBName"><span class="annot"><span class="annottext">PersistSettings -&gt; Text -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psToDBName"><span class="hs-identifier hs-var hs-var">psToDBName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Modify the Haskell-style name into a database-style name.</span></span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="psToFKName"><span class="annot"><span class="annottext">PersistSettings -&gt; EntityNameHS -&gt; ConstraintNameHS -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psToFKName"><span class="hs-identifier hs-var hs-var">psToFKName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#ConstraintNameHS"><span class="hs-identifier hs-type">ConstraintNameHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-comment">-- ^ A function for generating the constraint name, with access to</span><span>
</span><span id="line-171"></span><span>    </span><span class="hs-comment">-- the entity and constraint names. Default value: @mappend@</span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-173"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="psStrictFields"><span class="annot"><span class="annottext">PersistSettings -&gt; Bool
</span><a href="Database.Persist.Quasi.Internal.html#psStrictFields"><span class="hs-identifier hs-var hs-var">psStrictFields</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-comment">-- ^ Whether fields are by default strict. Default value: @True@.</span><span>
</span><span id="line-176"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-177"></span><span>    </span><span class="hs-comment">-- @since 1.2</span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="psIdName"><span class="annot"><span class="annottext">PersistSettings -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psIdName"><span class="hs-identifier hs-var hs-var">psIdName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-179"></span><span>    </span><span class="hs-comment">-- ^ The name of the id column. Default value: @id@</span><span>
</span><span id="line-180"></span><span>    </span><span class="hs-comment">-- The name of the id column can also be changed on a per-model basis</span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-comment">-- &lt;https://github.com/yesodweb/persistent/wiki/Persistent-entity-syntax&gt;</span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-comment">-- @since 2.0</span><span>
</span><span id="line-184"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#defaultPersistSettings"><span class="hs-identifier hs-type">defaultPersistSettings</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#upperCaseSettings"><span class="hs-identifier hs-type">upperCaseSettings</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#lowerCaseSettings"><span class="hs-identifier hs-type">lowerCaseSettings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span>
</span><span id="line-187"></span><span id="defaultPersistSettings"><span class="annot"><span class="annottext">defaultPersistSettings :: PersistSettings
</span><a href="Database.Persist.Quasi.Internal.html#defaultPersistSettings"><span class="hs-identifier hs-var hs-var">defaultPersistSettings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span>
</span><span id="line-188"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psToDBName :: Text -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psToDBName"><span class="hs-identifier hs-var">psToDBName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-189"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psToFKName :: EntityNameHS -&gt; ConstraintNameHS -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psToFKName"><span class="hs-identifier hs-var">psToFKName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span> </span><span id="local-6989586621679786665"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786665"><span class="hs-identifier hs-var">entName</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Names.html#ConstraintNameHS"><span class="hs-identifier hs-type">ConstraintNameHS</span></a></span><span> </span><span id="local-6989586621679786667"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786667"><span class="hs-identifier hs-var">conName</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786665"><span class="hs-identifier hs-var">entName</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786667"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-190"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psStrictFields :: Bool
</span><a href="Database.Persist.Quasi.Internal.html#psStrictFields"><span class="hs-identifier hs-var">psStrictFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-191"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psIdName :: Text
</span><a href="Database.Persist.Quasi.Internal.html#psIdName"><span class="hs-identifier hs-var">psIdName</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;id&quot;</span></span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span id="upperCaseSettings"><span class="annot"><span class="annottext">upperCaseSettings :: PersistSettings
</span><a href="Database.Persist.Quasi.Internal.html#upperCaseSettings"><span class="hs-identifier hs-var hs-var">upperCaseSettings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="Database.Persist.Quasi.Internal.html#defaultPersistSettings"><span class="hs-identifier hs-var">defaultPersistSettings</span></a></span><span>
</span><span id="line-195"></span><span>
</span><span id="line-196"></span><span id="lowerCaseSettings"><span class="annot"><span class="annottext">lowerCaseSettings :: PersistSettings
</span><a href="Database.Persist.Quasi.Internal.html#lowerCaseSettings"><span class="hs-identifier hs-var hs-var">lowerCaseSettings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="Database.Persist.Quasi.Internal.html#defaultPersistSettings"><span class="hs-identifier hs-var">defaultPersistSettings</span></a></span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#psToDBName"><span class="hs-identifier hs-var">psToDBName</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-198"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679786668"><span class="annot"><a href="#local-6989586621679786668"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679786669"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786669"><span class="hs-identifier hs-var">c</span></a></span></span><span>
</span><span id="line-199"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isUpper</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786669"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'_'</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char
</span><span class="hs-identifier hs-var">toLower</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786669"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-200"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Text
</span><span class="hs-identifier hs-var">T.singleton</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679786669"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-201"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.dropWhile</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">==</span></span><span> </span><span class="annot"><span class="hs-char">'_'</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.concatMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679786668"><span class="hs-identifier hs-type">go</span></a></span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-203"></span><span>
</span><span id="line-204"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#toFKNameInfixed"><span class="hs-identifier hs-type">toFKNameInfixed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#ConstraintNameHS"><span class="hs-identifier hs-type">ConstraintNameHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-205"></span><span id="toFKNameInfixed"><span class="annot"><span class="annottext">toFKNameInfixed :: Text -&gt; EntityNameHS -&gt; ConstraintNameHS -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#toFKNameInfixed"><span class="hs-identifier hs-var hs-var">toFKNameInfixed</span></a></span></span><span> </span><span id="local-6989586621679786673"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786673"><span class="hs-identifier hs-var">inf</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span> </span><span id="local-6989586621679786674"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786674"><span class="hs-identifier hs-var">entName</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Names.html#ConstraintNameHS"><span class="hs-identifier hs-type">ConstraintNameHS</span></a></span><span> </span><span id="local-6989586621679786675"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786675"><span class="hs-identifier hs-var">conName</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-206"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786674"><span class="hs-identifier hs-var">entName</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786673"><span class="hs-identifier hs-var">inf</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786675"><span class="hs-identifier hs-var">conName</span></a></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="annot"><span class="hs-comment">-- | Parses a quasi-quoted syntax into a list of entity definitions.</span></span><span>
</span><span id="line-209"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#parse"><span class="hs-identifier hs-type">parse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundEntityDef"><span class="hs-identifier hs-type">UnboundEntityDef</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-210"></span><span id="parse"><span class="annot"><span class="annottext">parse :: PersistSettings -&gt; Text -&gt; [UnboundEntityDef]
</span><a href="Database.Persist.Quasi.Internal.html#parse"><span class="hs-identifier hs-var hs-var">parse</span></a></span></span><span> </span><span id="local-6989586621679786676"><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679786676"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[UnboundEntityDef]
-&gt; (NonEmpty Line -&gt; [UnboundEntityDef])
-&gt; Maybe (NonEmpty Line)
-&gt; [UnboundEntityDef]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PersistSettings -&gt; NonEmpty Line -&gt; [UnboundEntityDef]
</span><a href="Database.Persist.Quasi.Internal.html#parseLines"><span class="hs-identifier hs-var">parseLines</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679786676"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (NonEmpty Line) -&gt; [UnboundEntityDef])
-&gt; (Text -&gt; Maybe (NonEmpty Line)) -&gt; Text -&gt; [UnboundEntityDef]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe (NonEmpty Line)
</span><a href="Database.Persist.Quasi.Internal.html#preparse"><span class="hs-identifier hs-var">preparse</span></a></span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#preparse"><span class="hs-identifier hs-type">preparse</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier hs-type">Line</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span id="preparse"><span class="annot"><span class="annottext">preparse :: Text -&gt; Maybe (NonEmpty Line)
</span><a href="Database.Persist.Quasi.Internal.html#preparse"><span class="hs-identifier hs-var hs-var">preparse</span></a></span></span><span> </span><span id="local-6989586621679786679"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786679"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-214"></span><span>    </span><span id="local-6989586621679786680"><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679786680"><span class="hs-identifier hs-var">lns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Maybe (NonEmpty Text)
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NEL.nonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; [Text]
</span><span class="hs-identifier hs-var">T.lines</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786679"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><span class="annottext">[Line] -&gt; Maybe (NonEmpty Line)
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NEL.nonEmpty</span></span><span> </span><span class="annot"><span class="annottext">([Line] -&gt; Maybe (NonEmpty Line))
-&gt; [Line] -&gt; Maybe (NonEmpty Line)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Maybe Line) -&gt; [Text] -&gt; [Line]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Line
</span><a href="Database.Persist.Quasi.Internal.html#parseLine"><span class="hs-identifier hs-var">parseLine</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty Text -&gt; [Text]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NEL.toList</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679786680"><span class="hs-identifier hs-var">lns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#parseLine"><span class="hs-identifier hs-type">parseLine</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier hs-type">Line</span></a></span><span>
</span><span id="line-218"></span><span id="parseLine"><span class="annot"><span class="annottext">parseLine :: Text -&gt; Maybe Line
</span><a href="Database.Persist.Quasi.Internal.html#parseLine"><span class="hs-identifier hs-var hs-var">parseLine</span></a></span></span><span> </span><span id="local-6989586621679786684"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786684"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-219"></span><span>    </span><span class="annot"><span class="annottext">Int -&gt; NonEmpty Token -&gt; Line
</span><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Int
</span><a href="Database.Persist.Quasi.Internal.html#parseIndentationAmount"><span class="hs-identifier hs-var">parseIndentationAmount</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786684"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NonEmpty Token -&gt; Line) -&gt; Maybe (NonEmpty Token) -&gt; Maybe Line
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Token] -&gt; Maybe (NonEmpty Token)
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NEL.nonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; [Token]
</span><a href="Database.Persist.Quasi.Internal.html#tokenize"><span class="hs-identifier hs-var">tokenize</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786684"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span class="annot"><span class="hs-comment">-- | A token used by the parser.</span></span><span>
</span><span id="line-222"></span><span class="hs-keyword">data</span><span> </span><span id="Token"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-var">Token</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Token"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-var">Token</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ @Token tok@ is token @tok@ already unquoted.</span></span><span>
</span><span id="line-223"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span id="DocComment"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#DocComment"><span class="hs-identifier hs-var">DocComment</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-comment">-- ^ @DocComment@ is a documentation comment, unmodified.</span></span><span>
</span><span id="line-224"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786691"><span id="local-6989586621679786697"><span id="local-6989586621679786701"><span class="annot"><span class="annottext">Int -&gt; Token -&gt; ShowS
[Token] -&gt; ShowS
Token -&gt; [Char]
(Int -&gt; Token -&gt; ShowS)
-&gt; (Token -&gt; [Char]) -&gt; ([Token] -&gt; ShowS) -&gt; Show Token
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Token -&gt; ShowS
showsPrec :: Int -&gt; Token -&gt; ShowS
$cshow :: Token -&gt; [Char]
show :: Token -&gt; [Char]
$cshowList :: [Token] -&gt; ShowS
showList :: [Token] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786704"><span id="local-6989586621679786708"><span class="annot"><span class="annottext">Token -&gt; Token -&gt; Bool
(Token -&gt; Token -&gt; Bool) -&gt; (Token -&gt; Token -&gt; Bool) -&gt; Eq Token
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Token -&gt; Token -&gt; Bool
== :: Token -&gt; Token -&gt; Bool
$c/= :: Token -&gt; Token -&gt; Bool
/= :: Token -&gt; Token -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#tokenText"><span class="hs-identifier hs-type">tokenText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-227"></span><span id="tokenText"><span class="annot"><span class="annottext">tokenText :: Token -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#tokenText"><span class="hs-identifier hs-var hs-var">tokenText</span></a></span></span><span> </span><span id="local-6989586621679786713"><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679786713"><span class="hs-identifier hs-var">tok</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-228"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679786713"><span class="hs-identifier hs-var">tok</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-229"></span><span>        </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span> </span><span id="local-6989586621679786714"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786714"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786714"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-230"></span><span>        </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#DocComment"><span class="hs-identifier hs-type">DocComment</span></a></span><span> </span><span id="local-6989586621679786715"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786715"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;-- | &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786715"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#parseIndentationAmount"><span class="hs-identifier hs-type">parseIndentationAmount</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-233"></span><span id="parseIndentationAmount"><span class="annot"><span class="annottext">parseIndentationAmount :: Text -&gt; Int
</span><a href="Database.Persist.Quasi.Internal.html#parseIndentationAmount"><span class="hs-identifier hs-var hs-var">parseIndentationAmount</span></a></span></span><span> </span><span id="local-6989586621679786716"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786716"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-234"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786717"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786717"><span class="hs-identifier hs-var">spaces</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; (Text, Text)
</span><span class="hs-identifier hs-var">T.span</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isSpace</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786716"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-235"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Int
</span><span class="hs-identifier hs-var">T.length</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786717"><span class="hs-identifier hs-var">spaces</span></a></span><span>
</span><span id="line-236"></span><span>
</span><span id="line-237"></span><span class="annot"><span class="hs-comment">-- | Tokenize a string.</span></span><span>
</span><span id="line-238"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#tokenize"><span class="hs-identifier hs-type">tokenize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-239"></span><span id="tokenize"><span class="annot"><span class="annottext">tokenize :: Text -&gt; [Token]
</span><a href="Database.Persist.Quasi.Internal.html#tokenize"><span class="hs-identifier hs-var hs-var">tokenize</span></a></span></span><span> </span><span id="local-6989586621679786720"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786720"><span class="hs-identifier hs-var">t</span></a></span></span><span>
</span><span id="line-240"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><span class="hs-identifier hs-var">T.null</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786720"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679786722"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786722"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Maybe Text
</span><span class="hs-identifier hs-var">T.stripPrefix</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;-- |&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786720"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text -&gt; Token
</span><a href="Database.Persist.Quasi.Internal.html#DocComment"><span class="hs-identifier hs-var">DocComment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Text
</span><span class="hs-identifier hs-var">T.stripStart</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786722"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;--&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
</span><span class="hs-operator hs-var">`T.isPrefixOf`</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786720"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- Comment until the end of the line.</span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;#&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
</span><span class="hs-operator hs-var">`T.isPrefixOf`</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786720"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- Also comment to the end of the line, needed for a CPP bug (#110)</span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Char
Text -&gt; Char
</span><span class="hs-identifier hs-var">T.head</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786720"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&quot;'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ([Text] -&gt; [Text]) -&gt; [Token]
</span><a href="#local-6989586621679786727"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Text
Text -&gt; Text
</span><span class="hs-identifier hs-var">T.tail</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786720"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Char
Text -&gt; Char
</span><span class="hs-identifier hs-var">T.head</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786720"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'('</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; ([Text] -&gt; [Text]) -&gt; [Token]
</span><a href="#local-6989586621679786729"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Text
Text -&gt; Text
</span><span class="hs-identifier hs-var">T.tail</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786720"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isSpace</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Char
Text -&gt; Char
</span><span class="hs-identifier hs-var">T.head</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786720"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-247"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; [Token]
</span><a href="Database.Persist.Quasi.Internal.html#tokenize"><span class="hs-identifier hs-var">tokenize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.dropWhile</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isSpace</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786720"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span>    </span><span class="hs-comment">-- support mid-token quotes and parens</span><span>
</span><span id="line-250"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786730"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786730"><span class="hs-identifier hs-var">beforeEquals</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786731"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786731"><span class="hs-identifier hs-var">afterEquals</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe (Text, Text)
</span><a href="#local-6989586621679786732"><span class="hs-identifier hs-var">findMidToken</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786720"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-251"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; Bool
</span><span class="hs-identifier hs-var">T.any</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isSpace</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786730"><span class="hs-identifier hs-var">beforeEquals</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span> </span><span id="local-6989586621679786735"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786735"><span class="hs-identifier hs-var">next</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679786736"><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679786736"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Token]
</span><a href="Database.Persist.Quasi.Internal.html#tokenize"><span class="hs-identifier hs-var">tokenize</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786731"><span class="hs-identifier hs-var">afterEquals</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-253"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; Token
</span><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-var">Token</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.concat</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786730"><span class="hs-identifier hs-var">beforeEquals</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;=&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786735"><span class="hs-identifier hs-var">next</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Token -&gt; [Token] -&gt; [Token]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679786736"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-254"></span><span>
</span><span id="line-255"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-256"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786738"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786738"><span class="hs-identifier hs-var">token</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786739"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786739"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; (Text, Text)
</span><span class="hs-identifier hs-var">T.break</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isSpace</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786720"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-257"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Token
</span><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-var">Token</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786738"><span class="hs-identifier hs-var">token</span></a></span><span> </span><span class="annot"><span class="annottext">Token -&gt; [Token] -&gt; [Token]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Token]
</span><a href="Database.Persist.Quasi.Internal.html#tokenize"><span class="hs-identifier hs-var">tokenize</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786739"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-258"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-259"></span><span>    </span><span class="annot"><a href="#local-6989586621679786732"><span class="hs-identifier hs-type">findMidToken</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>    </span><span id="local-6989586621679786732"><span class="annot"><span class="annottext">findMidToken :: Text -&gt; Maybe (Text, Text)
</span><a href="#local-6989586621679786732"><span class="hs-identifier hs-var hs-var">findMidToken</span></a></span></span><span> </span><span id="local-6989586621679786740"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786740"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-261"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; (Text, Text)
</span><span class="hs-identifier hs-var">T.break</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'='</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786740"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-262"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679786741"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786741"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679786742"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786742"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
</span><span class="hs-operator hs-var">`T.isPrefixOf`</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786742"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;(&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
</span><span class="hs-operator hs-var">`T.isPrefixOf`</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786742"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Text, Text) -&gt; Maybe (Text, Text)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786741"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786742"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>            </span><span class="annot"><span class="annottext">(Text, Text)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Text, Text)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-265"></span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><a href="#local-6989586621679786727"><span class="hs-identifier hs-type">quotes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-267"></span><span>    </span><span id="local-6989586621679786727"><span class="annot"><span class="annottext">quotes :: Text -&gt; ([Text] -&gt; [Text]) -&gt; [Token]
</span><a href="#local-6989586621679786727"><span class="hs-identifier hs-var hs-var">quotes</span></a></span></span><span> </span><span id="local-6989586621679786743"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786743"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span id="local-6989586621679786744"><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679786744"><span class="hs-identifier hs-var">front</span></a></span></span><span>
</span><span id="line-268"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><span class="hs-identifier hs-var">T.null</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786743"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Token]
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; [Token]) -&gt; [Char] -&gt; [Token]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; [Char]) -&gt; Text -&gt; [Char]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.concat</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; [Text] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-269"></span><span>            </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unterminated quoted string starting with &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679786744"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-270"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Char
Text -&gt; Char
</span><span class="hs-identifier hs-var">T.head</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786743"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&quot;'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Token
</span><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-var">Token</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.concat</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; [Text] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679786744"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Token -&gt; [Token] -&gt; [Token]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Token]
</span><a href="Database.Persist.Quasi.Internal.html#tokenize"><span class="hs-identifier hs-var">tokenize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Text
Text -&gt; Text
</span><span class="hs-identifier hs-var">T.tail</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786743"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Char
Text -&gt; Char
</span><span class="hs-identifier hs-var">T.head</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786743"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\\'</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Int
</span><span class="hs-identifier hs-var">T.length</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786743"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-272"></span><span>            </span><span class="annot"><span class="annottext">Text -&gt; ([Text] -&gt; [Text]) -&gt; [Token]
</span><a href="#local-6989586621679786727"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786743"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679786744"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; [Text]) -&gt; ([Text] -&gt; [Text]) -&gt; [Text] -&gt; [Text]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786743"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-274"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786749"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786749"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786750"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786750"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; (Text, Text)
</span><span class="hs-identifier hs-var">T.break</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; [Char] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\\'</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\&quot;'</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786743"><span class="hs-identifier hs-var">t'</span></a></span><span>
</span><span id="line-275"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ([Text] -&gt; [Text]) -&gt; [Token]
</span><a href="#local-6989586621679786727"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786750"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679786744"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; [Text]) -&gt; ([Text] -&gt; [Text]) -&gt; [Text] -&gt; [Text]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786749"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>
</span><span id="line-277"></span><span>    </span><span class="annot"><a href="#local-6989586621679786729"><span class="hs-identifier hs-type">parens</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-278"></span><span>    </span><span id="local-6989586621679786729"><span class="annot"><span class="annottext">parens :: Int -&gt; Text -&gt; ([Text] -&gt; [Text]) -&gt; [Token]
</span><a href="#local-6989586621679786729"><span class="hs-identifier hs-var hs-var">parens</span></a></span></span><span> </span><span id="local-6989586621679786752"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679786752"><span class="hs-identifier hs-var">count</span></a></span></span><span> </span><span id="local-6989586621679786753"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786753"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span id="local-6989586621679786754"><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679786754"><span class="hs-identifier hs-var">front</span></a></span></span><span>
</span><span id="line-279"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><span class="hs-identifier hs-var">T.null</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786753"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Token]
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; [Token]) -&gt; [Char] -&gt; [Token]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; [Char]) -&gt; Text -&gt; [Char]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.concat</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; [Text] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-280"></span><span>            </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unterminated parens string starting with &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679786754"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-281"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Char
Text -&gt; Char
</span><span class="hs-identifier hs-var">T.head</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786753"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">')'</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-282"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679786752"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Token
</span><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-var">Token</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.concat</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; [Text] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679786754"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Token -&gt; [Token] -&gt; [Token]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Token]
</span><a href="Database.Persist.Quasi.Internal.html#tokenize"><span class="hs-identifier hs-var">tokenize</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Text
Text -&gt; Text
</span><span class="hs-identifier hs-var">T.tail</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786753"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; ([Text] -&gt; [Text]) -&gt; [Token]
</span><a href="#local-6989586621679786729"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679786752"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Text
Text -&gt; Text
</span><span class="hs-identifier hs-var">T.tail</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786753"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679786754"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; [Text]) -&gt; ([Text] -&gt; [Text]) -&gt; [Text] -&gt; [Text]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;)&quot;</span></span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Char
Text -&gt; Char
</span><span class="hs-identifier hs-var">T.head</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786753"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'('</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-286"></span><span>            </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; ([Text] -&gt; [Text]) -&gt; [Token]
</span><a href="#local-6989586621679786729"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679786752"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Text
Text -&gt; Text
</span><span class="hs-identifier hs-var">T.tail</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786753"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679786754"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; [Text]) -&gt; ([Text] -&gt; [Text]) -&gt; [Text] -&gt; [Text]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;(&quot;</span></span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Char
Text -&gt; Char
</span><span class="hs-identifier hs-var">T.head</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786753"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\\'</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Int
</span><span class="hs-identifier hs-var">T.length</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786753"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-288"></span><span>            </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; ([Text] -&gt; [Text]) -&gt; [Token]
</span><a href="#local-6989586621679786729"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679786752"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786753"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679786754"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; [Text]) -&gt; ([Text] -&gt; [Text]) -&gt; [Text] -&gt; [Text]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">T.drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786753"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-290"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786756"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786756"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786757"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786757"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; (Text, Text)
</span><span class="hs-identifier hs-var">T.break</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; [Char] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\\'</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'('</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">')'</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786753"><span class="hs-identifier hs-var">t'</span></a></span><span>
</span><span id="line-291"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; ([Text] -&gt; [Text]) -&gt; [Token]
</span><a href="#local-6989586621679786729"><span class="hs-identifier hs-var">parens</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679786752"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786757"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679786754"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; [Text]) -&gt; ([Text] -&gt; [Text]) -&gt; [Text] -&gt; [Text]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786756"><span class="hs-identifier hs-var">x</span></a></span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span class="annot"><span class="hs-comment">-- | A line of parsed tokens</span></span><span>
</span><span id="line-294"></span><span class="hs-keyword">data</span><span> </span><span id="Line"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Line"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier hs-var">Line</span></a></span></span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="lineIndent"><span class="annot"><span class="annottext">Line -&gt; Int
</span><a href="Database.Persist.Quasi.Internal.html#lineIndent"><span class="hs-identifier hs-var hs-var">lineIndent</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-296"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="tokens"><span class="annot"><span class="annottext">Line -&gt; NonEmpty Token
</span><a href="Database.Persist.Quasi.Internal.html#tokens"><span class="hs-identifier hs-var hs-var">tokens</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span>
</span><span id="line-297"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786761"><span id="local-6989586621679786767"><span class="annot"><span class="annottext">Line -&gt; Line -&gt; Bool
(Line -&gt; Line -&gt; Bool) -&gt; (Line -&gt; Line -&gt; Bool) -&gt; Eq Line
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Line -&gt; Line -&gt; Bool
== :: Line -&gt; Line -&gt; Bool
$c/= :: Line -&gt; Line -&gt; Bool
/= :: Line -&gt; Line -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786771"><span id="local-6989586621679786778"><span id="local-6989586621679786782"><span class="annot"><span class="annottext">Int -&gt; Line -&gt; ShowS
[Line] -&gt; ShowS
Line -&gt; [Char]
(Int -&gt; Line -&gt; ShowS)
-&gt; (Line -&gt; [Char]) -&gt; ([Line] -&gt; ShowS) -&gt; Show Line
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Line -&gt; ShowS
showsPrec :: Int -&gt; Line -&gt; ShowS
$cshow :: Line -&gt; [Char]
show :: Line -&gt; [Char]
$cshowList :: [Line] -&gt; ShowS
showList :: [Line] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#lineText"><span class="hs-identifier hs-type">lineText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier hs-type">Line</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-300"></span><span id="lineText"><span class="annot"><span class="annottext">lineText :: Line -&gt; NonEmpty Text
</span><a href="Database.Persist.Quasi.Internal.html#lineText"><span class="hs-identifier hs-var hs-var">lineText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Text) -&gt; NonEmpty Token -&gt; NonEmpty Text
forall a b. (a -&gt; b) -&gt; NonEmpty a -&gt; NonEmpty b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Token -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#tokenText"><span class="hs-identifier hs-var">tokenText</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty Token -&gt; NonEmpty Text)
-&gt; (Line -&gt; NonEmpty Token) -&gt; Line -&gt; NonEmpty Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Line -&gt; NonEmpty Token
</span><a href="Database.Persist.Quasi.Internal.html#tokens"><span class="hs-identifier hs-var">tokens</span></a></span><span>
</span><span id="line-301"></span><span>
</span><span id="line-302"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#lowestIndent"><span class="hs-identifier hs-type">lowestIndent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier hs-type">Line</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-303"></span><span id="lowestIndent"><span class="annot"><span class="annottext">lowestIndent :: NonEmpty Line -&gt; Int
</span><a href="Database.Persist.Quasi.Internal.html#lowestIndent"><span class="hs-identifier hs-var hs-var">lowestIndent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty Int -&gt; Int
forall a. Ord a =&gt; NonEmpty a -&gt; a
forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">minimum</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty Int -&gt; Int)
-&gt; (NonEmpty Line -&gt; NonEmpty Int) -&gt; NonEmpty Line -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Line -&gt; Int) -&gt; NonEmpty Line -&gt; NonEmpty Int
forall a b. (a -&gt; b) -&gt; NonEmpty a -&gt; NonEmpty b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Line -&gt; Int
</span><a href="Database.Persist.Quasi.Internal.html#lineIndent"><span class="hs-identifier hs-var">lineIndent</span></a></span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="annot"><span class="hs-comment">-- | Divide lines into blocks and make entity definitions.</span></span><span>
</span><span id="line-306"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#parseLines"><span class="hs-identifier hs-type">parseLines</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier hs-type">Line</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundEntityDef"><span class="hs-identifier hs-type">UnboundEntityDef</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-307"></span><span id="parseLines"><span class="annot"><span class="annottext">parseLines :: PersistSettings -&gt; NonEmpty Line -&gt; [UnboundEntityDef]
</span><a href="Database.Persist.Quasi.Internal.html#parseLines"><span class="hs-identifier hs-var hs-var">parseLines</span></a></span></span><span> </span><span id="local-6989586621679786787"><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679786787"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-308"></span><span>    </span><span class="annot"><span class="annottext">(LinesWithComments -&gt; UnboundEntityDef)
-&gt; [LinesWithComments] -&gt; [UnboundEntityDef]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PersistSettings -&gt; ParsedEntityDef -&gt; UnboundEntityDef
</span><a href="Database.Persist.Quasi.Internal.html#mkUnboundEntityDef"><span class="hs-identifier hs-var">mkUnboundEntityDef</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679786787"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">(ParsedEntityDef -&gt; UnboundEntityDef)
-&gt; (LinesWithComments -&gt; ParsedEntityDef)
-&gt; LinesWithComments
-&gt; UnboundEntityDef
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; ParsedEntityDef
</span><a href="Database.Persist.Quasi.Internal.html#toParsedEntityDef"><span class="hs-identifier hs-var">toParsedEntityDef</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([LinesWithComments] -&gt; [UnboundEntityDef])
-&gt; (NonEmpty Line -&gt; [LinesWithComments])
-&gt; NonEmpty Line
-&gt; [UnboundEntityDef]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Line -&gt; [LinesWithComments]
</span><a href="Database.Persist.Quasi.Internal.html#associateLines"><span class="hs-identifier hs-var">associateLines</span></a></span><span>
</span><span id="line-309"></span><span>
</span><span id="line-310"></span><span class="hs-keyword">data</span><span> </span><span id="ParsedEntityDef"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ParsedEntityDef"><span class="hs-identifier hs-var">ParsedEntityDef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ParsedEntityDef"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ParsedEntityDef"><span class="hs-identifier hs-var">ParsedEntityDef</span></a></span></span><span>
</span><span id="line-311"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="parsedEntityDefComments"><span class="annot"><span class="annottext">ParsedEntityDef -&gt; [Text]
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefComments"><span class="hs-identifier hs-var hs-var">parsedEntityDefComments</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-312"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="parsedEntityDefEntityName"><span class="annot"><span class="annottext">ParsedEntityDef -&gt; EntityNameHS
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefEntityName"><span class="hs-identifier hs-var hs-var">parsedEntityDefEntityName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span>
</span><span id="line-313"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="parsedEntityDefIsSum"><span class="annot"><span class="annottext">ParsedEntityDef -&gt; Bool
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefIsSum"><span class="hs-identifier hs-var hs-var">parsedEntityDefIsSum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-314"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="parsedEntityDefEntityAttributes"><span class="annot"><span class="annottext">ParsedEntityDef -&gt; [Text]
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefEntityAttributes"><span class="hs-identifier hs-var hs-var">parsedEntityDefEntityAttributes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Types.Base.html#Attr"><span class="hs-identifier hs-type">Attr</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-315"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="parsedEntityDefFieldAttributes"><span class="annot"><span class="annottext">ParsedEntityDef -&gt; [[Token]]
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefFieldAttributes"><span class="hs-identifier hs-var hs-var">parsedEntityDefFieldAttributes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-316"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="parsedEntityDefExtras"><span class="annot"><span class="annottext">ParsedEntityDef -&gt; Map Text [[Text]]
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefExtras"><span class="hs-identifier hs-var hs-var">parsedEntityDefExtras</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Types.Base.html#ExtraLine"><span class="hs-identifier hs-type">ExtraLine</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-317"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-318"></span><span>
</span><span id="line-319"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#entityNamesFromParsedDef"><span class="hs-identifier hs-type">entityNamesFromParsedDef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ParsedEntityDef"><span class="hs-identifier hs-type">ParsedEntityDef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameDB"><span class="hs-identifier hs-type">EntityNameDB</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-320"></span><span id="entityNamesFromParsedDef"><span class="annot"><span class="annottext">entityNamesFromParsedDef :: PersistSettings -&gt; ParsedEntityDef -&gt; (EntityNameHS, EntityNameDB)
</span><a href="Database.Persist.Quasi.Internal.html#entityNamesFromParsedDef"><span class="hs-identifier hs-var hs-var">entityNamesFromParsedDef</span></a></span></span><span> </span><span id="local-6989586621679786800"><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679786800"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679786801"><span class="annot"><span class="annottext">ParsedEntityDef
</span><a href="#local-6989586621679786801"><span class="hs-identifier hs-var">parsedEntDef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679786802"><span class="hs-identifier hs-var">entNameHS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EntityNameDB
</span><a href="#local-6989586621679786803"><span class="hs-identifier hs-var">entNameDB</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-322"></span><span>    </span><span id="local-6989586621679786802"><span class="annot"><span class="annottext">entNameHS :: EntityNameHS
</span><a href="#local-6989586621679786802"><span class="hs-identifier hs-var hs-var">entNameHS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-323"></span><span>        </span><span class="annot"><span class="annottext">ParsedEntityDef -&gt; EntityNameHS
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefEntityName"><span class="hs-identifier hs-var">parsedEntityDefEntityName</span></a></span><span> </span><span class="annot"><span class="annottext">ParsedEntityDef
</span><a href="#local-6989586621679786801"><span class="hs-identifier hs-var">parsedEntDef</span></a></span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span>    </span><span id="local-6989586621679786803"><span class="annot"><span class="annottext">entNameDB :: EntityNameDB
</span><a href="#local-6989586621679786803"><span class="hs-identifier hs-var hs-var">entNameDB</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-326"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; EntityNameDB
</span><a href="Database.Persist.Names.html#EntityNameDB"><span class="hs-identifier hs-var">EntityNameDB</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; EntityNameDB) -&gt; Text -&gt; EntityNameDB
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PersistSettings -&gt; Text -&gt; [Text] -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#getDbName"><span class="hs-identifier hs-var">getDbName</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679786800"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityNameHS -&gt; Text
</span><a href="Database.Persist.Names.html#unEntityNameHS"><span class="hs-identifier hs-var">unEntityNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679786802"><span class="hs-identifier hs-var">entNameHS</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParsedEntityDef -&gt; [Text]
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefEntityAttributes"><span class="hs-identifier hs-var">parsedEntityDefEntityAttributes</span></a></span><span> </span><span class="annot"><span class="annottext">ParsedEntityDef
</span><a href="#local-6989586621679786801"><span class="hs-identifier hs-var">parsedEntDef</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>
</span><span id="line-328"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#toParsedEntityDef"><span class="hs-identifier hs-type">toParsedEntityDef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ParsedEntityDef"><span class="hs-identifier hs-type">ParsedEntityDef</span></a></span><span>
</span><span id="line-329"></span><span id="toParsedEntityDef"><span class="annot"><span class="annottext">toParsedEntityDef :: LinesWithComments -&gt; ParsedEntityDef
</span><a href="Database.Persist.Quasi.Internal.html#toParsedEntityDef"><span class="hs-identifier hs-var hs-var">toParsedEntityDef</span></a></span></span><span> </span><span id="local-6989586621679786807"><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786807"><span class="hs-identifier hs-var">lwc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ParsedEntityDef"><span class="hs-identifier hs-type">ParsedEntityDef</span></a></span><span>
</span><span id="line-330"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">parsedEntityDefComments :: [Text]
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefComments"><span class="hs-identifier hs-var">parsedEntityDefComments</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; [Text]
</span><a href="Database.Persist.Quasi.Internal.html#lwcComments"><span class="hs-identifier hs-var">lwcComments</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786807"><span class="hs-identifier hs-var">lwc</span></a></span><span>
</span><span id="line-331"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parsedEntityDefEntityName :: EntityNameHS
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefEntityName"><span class="hs-identifier hs-var">parsedEntityDefEntityName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679786809"><span class="hs-identifier hs-var">entNameHS</span></a></span><span>
</span><span id="line-332"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parsedEntityDefIsSum :: Bool
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefIsSum"><span class="hs-identifier hs-var">parsedEntityDefIsSum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679786810"><span class="hs-identifier hs-var">isSum</span></a></span><span>
</span><span id="line-333"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parsedEntityDefEntityAttributes :: [Text]
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefEntityAttributes"><span class="hs-identifier hs-var">parsedEntityDefEntityAttributes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679786811"><span class="hs-identifier hs-var">entAttribs</span></a></span><span>
</span><span id="line-334"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parsedEntityDefFieldAttributes :: [[Token]]
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefFieldAttributes"><span class="hs-identifier hs-var">parsedEntityDefFieldAttributes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Token]]
</span><a href="#local-6989586621679786812"><span class="hs-identifier hs-var">attribs</span></a></span><span>
</span><span id="line-335"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">parsedEntityDefExtras :: Map Text [[Text]]
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefExtras"><span class="hs-identifier hs-var">parsedEntityDefExtras</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Text [[Text]]
</span><a href="#local-6989586621679786813"><span class="hs-identifier hs-var">extras</span></a></span><span>
</span><span id="line-336"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-337"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-338"></span><span>    </span><span id="local-6989586621679786814"><span class="annot"><span class="annottext">Line
</span><a href="#local-6989586621679786814"><span class="hs-identifier hs-var">entityLine</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span id="local-6989586621679786816"><span class="annot"><span class="annottext">[Line]
</span><a href="#local-6989586621679786816"><span class="hs-identifier hs-var">fieldLines</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-339"></span><span>        </span><span class="annot"><span class="annottext">LinesWithComments -&gt; NonEmpty Line
</span><a href="Database.Persist.Quasi.Internal.html#lwcLines"><span class="hs-identifier hs-var">lwcLines</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786807"><span class="hs-identifier hs-var">lwc</span></a></span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679786818"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786818"><span class="hs-identifier hs-var">entityName</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span id="local-6989586621679786811"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679786811"><span class="hs-identifier hs-var">entAttribs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-342"></span><span>        </span><span class="annot"><span class="annottext">Line -&gt; NonEmpty Text
</span><a href="Database.Persist.Quasi.Internal.html#lineText"><span class="hs-identifier hs-var">lineText</span></a></span><span> </span><span class="annot"><span class="annottext">Line
</span><a href="#local-6989586621679786814"><span class="hs-identifier hs-var">entityLine</span></a></span><span>
</span><span id="line-343"></span><span>
</span><span id="line-344"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679786810"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679786810"><span class="hs-identifier hs-var">isSum</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786809"><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679786809"><span class="hs-identifier hs-var">entNameHS</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-345"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe (Char, Text)
</span><span class="hs-identifier hs-var">T.uncons</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786818"><span class="hs-identifier hs-var">entityName</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-346"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'+'</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786819"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786819"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; EntityNameHS
</span><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-var">EntityNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786819"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span>            </span><span class="annot"><span class="annottext">Maybe (Char, Text)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; EntityNameHS
</span><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-var">EntityNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786818"><span class="hs-identifier hs-var">entityName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679786812"><span class="annot"><span class="annottext">[[Token]]
</span><a href="#local-6989586621679786812"><span class="hs-identifier hs-var">attribs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786813"><span class="annot"><span class="annottext">Map Text [[Text]]
</span><a href="#local-6989586621679786813"><span class="hs-identifier hs-var">extras</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-350"></span><span>        </span><span class="annot"><span class="annottext">[Line] -&gt; ([[Token]], Map Text [[Text]])
</span><a href="Database.Persist.Quasi.Internal.html#parseEntityFields"><span class="hs-identifier hs-var">parseEntityFields</span></a></span><span> </span><span class="annot"><span class="annottext">[Line]
</span><a href="#local-6989586621679786816"><span class="hs-identifier hs-var">fieldLines</span></a></span><span>
</span><span id="line-351"></span><span>
</span><span id="line-352"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#isDocComment"><span class="hs-identifier hs-type">isDocComment</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-353"></span><span id="isDocComment"><span class="annot"><span class="annottext">isDocComment :: Token -&gt; Maybe Text
</span><a href="Database.Persist.Quasi.Internal.html#isDocComment"><span class="hs-identifier hs-var hs-var">isDocComment</span></a></span></span><span> </span><span id="local-6989586621679786821"><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679786821"><span class="hs-identifier hs-var">tok</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-354"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679786821"><span class="hs-identifier hs-var">tok</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-355"></span><span>        </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#DocComment"><span class="hs-identifier hs-type">DocComment</span></a></span><span> </span><span id="local-6989586621679786822"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786822"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786822"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-356"></span><span>        </span><span class="annot"><span class="annottext">Token
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-357"></span><span>
</span><span id="line-358"></span><span class="hs-keyword">data</span><span> </span><span id="LinesWithComments"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-var">LinesWithComments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LinesWithComments"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-var">LinesWithComments</span></a></span></span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="lwcLines"><span class="annot"><span class="annottext">LinesWithComments -&gt; NonEmpty Line
</span><a href="Database.Persist.Quasi.Internal.html#lwcLines"><span class="hs-identifier hs-var hs-var">lwcLines</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier hs-type">Line</span></a></span><span>
</span><span id="line-360"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="lwcComments"><span class="annot"><span class="annottext">LinesWithComments -&gt; [Text]
</span><a href="Database.Persist.Quasi.Internal.html#lwcComments"><span class="hs-identifier hs-var hs-var">lwcComments</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-361"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786825"><span id="local-6989586621679786831"><span class="annot"><span class="annottext">LinesWithComments -&gt; LinesWithComments -&gt; Bool
(LinesWithComments -&gt; LinesWithComments -&gt; Bool)
-&gt; (LinesWithComments -&gt; LinesWithComments -&gt; Bool)
-&gt; Eq LinesWithComments
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: LinesWithComments -&gt; LinesWithComments -&gt; Bool
== :: LinesWithComments -&gt; LinesWithComments -&gt; Bool
$c/= :: LinesWithComments -&gt; LinesWithComments -&gt; Bool
/= :: LinesWithComments -&gt; LinesWithComments -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786835"><span id="local-6989586621679786841"><span id="local-6989586621679786845"><span class="annot"><span class="annottext">Int -&gt; LinesWithComments -&gt; ShowS
[LinesWithComments] -&gt; ShowS
LinesWithComments -&gt; [Char]
(Int -&gt; LinesWithComments -&gt; ShowS)
-&gt; (LinesWithComments -&gt; [Char])
-&gt; ([LinesWithComments] -&gt; ShowS)
-&gt; Show LinesWithComments
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; LinesWithComments -&gt; ShowS
showsPrec :: Int -&gt; LinesWithComments -&gt; ShowS
$cshow :: LinesWithComments -&gt; [Char]
show :: LinesWithComments -&gt; [Char]
$cshowList :: [LinesWithComments] -&gt; ShowS
showList :: [LinesWithComments] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>
</span><span id="line-363"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679786849"><span id="local-6989586621679786852"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-364"></span><span>    </span><span id="local-6989586621679786859"><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786859"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679786860"><span class="annot"><span class="annottext">&lt;&gt; :: LinesWithComments -&gt; LinesWithComments -&gt; LinesWithComments
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span id="local-6989586621679786861"><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786861"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-365"></span><span>        </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span>
</span><span id="line-366"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">lwcLines :: NonEmpty Line
</span><a href="Database.Persist.Quasi.Internal.html#lwcLines"><span class="hs-identifier hs-var">lwcLines</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-367"></span><span>                </span><span class="annot"><span class="annottext">(Line -&gt; NonEmpty Line -&gt; NonEmpty Line)
-&gt; NonEmpty Line -&gt; NonEmpty Line -&gt; NonEmpty Line
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; NonEmpty a -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">Line -&gt; NonEmpty Line -&gt; NonEmpty Line
forall a. a -&gt; NonEmpty a -&gt; NonEmpty a
</span><span class="hs-identifier hs-var">NEL.cons</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LinesWithComments -&gt; NonEmpty Line
</span><a href="Database.Persist.Quasi.Internal.html#lwcLines"><span class="hs-identifier hs-var">lwcLines</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786861"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LinesWithComments -&gt; NonEmpty Line
</span><a href="Database.Persist.Quasi.Internal.html#lwcLines"><span class="hs-identifier hs-var">lwcLines</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786859"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">lwcComments :: [Text]
</span><a href="Database.Persist.Quasi.Internal.html#lwcComments"><span class="hs-identifier hs-var">lwcComments</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-369"></span><span>                </span><span class="annot"><span class="annottext">LinesWithComments -&gt; [Text]
</span><a href="Database.Persist.Quasi.Internal.html#lwcComments"><span class="hs-identifier hs-var">lwcComments</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786859"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Text] -&gt; [Text]
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mappend`</span></span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; [Text]
</span><a href="Database.Persist.Quasi.Internal.html#lwcComments"><span class="hs-identifier hs-var">lwcComments</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786861"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-370"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#appendLwc"><span class="hs-identifier hs-type">appendLwc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span>
</span><span id="line-373"></span><span id="appendLwc"><span class="annot"><span class="annottext">appendLwc :: LinesWithComments -&gt; LinesWithComments -&gt; LinesWithComments
</span><a href="Database.Persist.Quasi.Internal.html#appendLwc"><span class="hs-identifier hs-var hs-var">appendLwc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; LinesWithComments -&gt; LinesWithComments
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#newLine"><span class="hs-identifier hs-type">newLine</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier hs-type">Line</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span>
</span><span id="line-376"></span><span id="newLine"><span class="annot"><span class="annottext">newLine :: Line -&gt; LinesWithComments
</span><a href="Database.Persist.Quasi.Internal.html#newLine"><span class="hs-identifier hs-var hs-var">newLine</span></a></span></span><span> </span><span id="local-6989586621679786866"><span class="annot"><span class="annottext">Line
</span><a href="#local-6989586621679786866"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty Line -&gt; [Text] -&gt; LinesWithComments
</span><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-var">LinesWithComments</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Line -&gt; NonEmpty Line
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Line
</span><a href="#local-6989586621679786866"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#firstLine"><span class="hs-identifier hs-type">firstLine</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier hs-type">Line</span></a></span><span>
</span><span id="line-379"></span><span id="firstLine"><span class="annot"><span class="annottext">firstLine :: LinesWithComments -&gt; Line
</span><a href="Database.Persist.Quasi.Internal.html#firstLine"><span class="hs-identifier hs-var hs-var">firstLine</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty Line -&gt; Line
forall a. NonEmpty a -&gt; a
</span><span class="hs-identifier hs-var">NEL.head</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty Line -&gt; Line)
-&gt; (LinesWithComments -&gt; NonEmpty Line)
-&gt; LinesWithComments
-&gt; Line
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; NonEmpty Line
</span><a href="Database.Persist.Quasi.Internal.html#lwcLines"><span class="hs-identifier hs-var">lwcLines</span></a></span><span>
</span><span id="line-380"></span><span>
</span><span id="line-381"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#consLine"><span class="hs-identifier hs-type">consLine</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier hs-type">Line</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span>
</span><span id="line-382"></span><span id="consLine"><span class="annot"><span class="annottext">consLine :: Line -&gt; LinesWithComments -&gt; LinesWithComments
</span><a href="Database.Persist.Quasi.Internal.html#consLine"><span class="hs-identifier hs-var hs-var">consLine</span></a></span></span><span> </span><span id="local-6989586621679786870"><span class="annot"><span class="annottext">Line
</span><a href="#local-6989586621679786870"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679786871"><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786871"><span class="hs-identifier hs-var">lwc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786871"><span class="hs-identifier hs-var">lwc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#lwcLines"><span class="hs-identifier hs-var">lwcLines</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NEL.cons</span></span><span> </span><span class="annot"><a href="#local-6989586621679786870"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#lwcLines"><span class="hs-identifier hs-var">lwcLines</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679786871"><span class="hs-identifier hs-type">lwc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#consComment"><span class="hs-identifier hs-type">consComment</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span>
</span><span id="line-385"></span><span id="consComment"><span class="annot"><span class="annottext">consComment :: Text -&gt; LinesWithComments -&gt; LinesWithComments
</span><a href="Database.Persist.Quasi.Internal.html#consComment"><span class="hs-identifier hs-var hs-var">consComment</span></a></span></span><span> </span><span id="local-6989586621679786873"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786873"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679786874"><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786874"><span class="hs-identifier hs-var">lwc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786874"><span class="hs-identifier hs-var">lwc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#lwcComments"><span class="hs-identifier hs-var">lwcComments</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621679786873"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#lwcComments"><span class="hs-identifier hs-var">lwcComments</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679786874"><span class="hs-identifier hs-type">lwc</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-386"></span><span>
</span><span id="line-387"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#associateLines"><span class="hs-identifier hs-type">associateLines</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier hs-type">Line</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-388"></span><span id="associateLines"><span class="annot"><span class="annottext">associateLines :: NonEmpty Line -&gt; [LinesWithComments]
</span><a href="Database.Persist.Quasi.Internal.html#associateLines"><span class="hs-identifier hs-var hs-var">associateLines</span></a></span></span><span> </span><span id="local-6989586621679786875"><span class="annot"><span class="annottext">NonEmpty Line
</span><a href="#local-6989586621679786875"><span class="hs-identifier hs-var">lines</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-389"></span><span>    </span><span class="annot"><span class="annottext">(LinesWithComments -&gt; [LinesWithComments] -&gt; [LinesWithComments])
-&gt; [LinesWithComments]
-&gt; [LinesWithComments]
-&gt; [LinesWithComments]
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; [LinesWithComments] -&gt; [LinesWithComments]
</span><a href="#local-6989586621679786876"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">([LinesWithComments] -&gt; [LinesWithComments])
-&gt; [LinesWithComments] -&gt; [LinesWithComments]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-390"></span><span>    </span><span class="annot"><span class="annottext">(Line -&gt; [LinesWithComments] -&gt; [LinesWithComments])
-&gt; [LinesWithComments] -&gt; NonEmpty Line -&gt; [LinesWithComments]
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; NonEmpty a -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">Line -&gt; [LinesWithComments] -&gt; [LinesWithComments]
</span><a href="#local-6989586621679786877"><span class="hs-identifier hs-var">toLinesWithComments</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">NonEmpty Line
</span><a href="#local-6989586621679786875"><span class="hs-identifier hs-var">lines</span></a></span><span>
</span><span id="line-391"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-392"></span><span>    </span><span class="annot"><a href="#local-6989586621679786877"><span class="hs-identifier hs-type">toLinesWithComments</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier hs-type">Line</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-393"></span><span>    </span><span id="local-6989586621679786877"><span class="annot"><span class="annottext">toLinesWithComments :: Line -&gt; [LinesWithComments] -&gt; [LinesWithComments]
</span><a href="#local-6989586621679786877"><span class="hs-identifier hs-var hs-var">toLinesWithComments</span></a></span></span><span> </span><span id="local-6989586621679786878"><span class="annot"><span class="annottext">Line
</span><a href="#local-6989586621679786878"><span class="hs-identifier hs-var">line</span></a></span></span><span> </span><span id="local-6989586621679786879"><span class="annot"><span class="annottext">[LinesWithComments]
</span><a href="#local-6989586621679786879"><span class="hs-identifier hs-var">linesWithComments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-394"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[LinesWithComments]
</span><a href="#local-6989586621679786879"><span class="hs-identifier hs-var">linesWithComments</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-395"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-396"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Line -&gt; LinesWithComments
</span><a href="Database.Persist.Quasi.Internal.html#newLine"><span class="hs-identifier hs-var">newLine</span></a></span><span> </span><span class="annot"><span class="annottext">Line
</span><a href="#local-6989586621679786878"><span class="hs-identifier hs-var">line</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-397"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679786880"><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786880"><span class="hs-identifier hs-var">lwc</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679786881"><span class="annot"><span class="annottext">[LinesWithComments]
</span><a href="#local-6989586621679786881"><span class="hs-identifier hs-var">lwcs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-398"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Token -&gt; Maybe Text
</span><a href="Database.Persist.Quasi.Internal.html#isDocComment"><span class="hs-identifier hs-var">isDocComment</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty Token -&gt; Token
forall a. NonEmpty a -&gt; a
</span><span class="hs-identifier hs-var">NEL.head</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Line -&gt; NonEmpty Token
</span><a href="Database.Persist.Quasi.Internal.html#tokens"><span class="hs-identifier hs-var">tokens</span></a></span><span> </span><span class="annot"><span class="annottext">Line
</span><a href="#local-6989586621679786878"><span class="hs-identifier hs-var">line</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-399"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679786882"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786882"><span class="hs-identifier hs-var">comment</span></a></span></span><span>
</span><span id="line-400"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Line -&gt; Int
</span><a href="Database.Persist.Quasi.Internal.html#lineIndent"><span class="hs-identifier hs-var">lineIndent</span></a></span><span> </span><span class="annot"><span class="annottext">Line
</span><a href="#local-6989586621679786878"><span class="hs-identifier hs-var">line</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Line -&gt; Int
</span><a href="Database.Persist.Quasi.Internal.html#lowestIndent"><span class="hs-identifier hs-var">lowestIndent</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty Line
</span><a href="#local-6989586621679786875"><span class="hs-identifier hs-var">lines</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-401"></span><span>                        </span><span class="annot"><span class="annottext">Text -&gt; LinesWithComments -&gt; LinesWithComments
</span><a href="Database.Persist.Quasi.Internal.html#consComment"><span class="hs-identifier hs-var">consComment</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679786882"><span class="hs-identifier hs-var">comment</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786880"><span class="hs-identifier hs-var">lwc</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; [LinesWithComments] -&gt; [LinesWithComments]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LinesWithComments]
</span><a href="#local-6989586621679786881"><span class="hs-identifier hs-var">lwcs</span></a></span><span>
</span><span id="line-402"></span><span>                    </span><span class="annot"><span class="annottext">Maybe Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-403"></span><span>                        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Line -&gt; Int
</span><a href="Database.Persist.Quasi.Internal.html#lineIndent"><span class="hs-identifier hs-var">lineIndent</span></a></span><span> </span><span class="annot"><span class="annottext">Line
</span><a href="#local-6989586621679786878"><span class="hs-identifier hs-var">line</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Line -&gt; Int
</span><a href="Database.Persist.Quasi.Internal.html#lineIndent"><span class="hs-identifier hs-var">lineIndent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LinesWithComments -&gt; Line
</span><a href="Database.Persist.Quasi.Internal.html#firstLine"><span class="hs-identifier hs-var">firstLine</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786880"><span class="hs-identifier hs-var">lwc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-404"></span><span>                            </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Line -&gt; Int
</span><a href="Database.Persist.Quasi.Internal.html#lineIndent"><span class="hs-identifier hs-var">lineIndent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LinesWithComments -&gt; Line
</span><a href="Database.Persist.Quasi.Internal.html#firstLine"><span class="hs-identifier hs-var">firstLine</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786880"><span class="hs-identifier hs-var">lwc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty Line -&gt; Int
</span><a href="Database.Persist.Quasi.Internal.html#lowestIndent"><span class="hs-identifier hs-var">lowestIndent</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty Line
</span><a href="#local-6989586621679786875"><span class="hs-identifier hs-var">lines</span></a></span><span>
</span><span id="line-405"></span><span>                        </span><span class="hs-keyword">then</span><span>
</span><span id="line-406"></span><span>                            </span><span class="annot"><span class="annottext">Line -&gt; LinesWithComments -&gt; LinesWithComments
</span><a href="Database.Persist.Quasi.Internal.html#consLine"><span class="hs-identifier hs-var">consLine</span></a></span><span> </span><span class="annot"><span class="annottext">Line
</span><a href="#local-6989586621679786878"><span class="hs-identifier hs-var">line</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786880"><span class="hs-identifier hs-var">lwc</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; [LinesWithComments] -&gt; [LinesWithComments]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LinesWithComments]
</span><a href="#local-6989586621679786881"><span class="hs-identifier hs-var">lwcs</span></a></span><span>
</span><span id="line-407"></span><span>                        </span><span class="hs-keyword">else</span><span>
</span><span id="line-408"></span><span>                            </span><span class="annot"><span class="annottext">Line -&gt; LinesWithComments
</span><a href="Database.Persist.Quasi.Internal.html#newLine"><span class="hs-identifier hs-var">newLine</span></a></span><span> </span><span class="annot"><span class="annottext">Line
</span><a href="#local-6989586621679786878"><span class="hs-identifier hs-var">line</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; [LinesWithComments] -&gt; [LinesWithComments]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786880"><span class="hs-identifier hs-var">lwc</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; [LinesWithComments] -&gt; [LinesWithComments]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LinesWithComments]
</span><a href="#local-6989586621679786881"><span class="hs-identifier hs-var">lwcs</span></a></span><span>
</span><span id="line-409"></span><span>
</span><span id="line-410"></span><span>    </span><span class="annot"><a href="#local-6989586621679786876"><span class="hs-identifier hs-type">combine</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-411"></span><span>    </span><span id="local-6989586621679786876"><span class="annot"><span class="annottext">combine :: LinesWithComments -&gt; [LinesWithComments] -&gt; [LinesWithComments]
</span><a href="#local-6989586621679786876"><span class="hs-identifier hs-var hs-var">combine</span></a></span></span><span> </span><span id="local-6989586621679786885"><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786885"><span class="hs-identifier hs-var">lwc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-412"></span><span>        </span><span class="hs-special">[</span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786885"><span class="hs-identifier hs-var">lwc</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-413"></span><span>    </span><span class="annot"><a href="#local-6989586621679786876"><span class="hs-identifier hs-var">combine</span></a></span><span> </span><span id="local-6989586621679786886"><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786886"><span class="hs-identifier hs-var">lwc</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786887"><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786887"><span class="hs-identifier hs-var">lwc'</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679786888"><span class="annot"><span class="annottext">[LinesWithComments]
</span><a href="#local-6989586621679786888"><span class="hs-identifier hs-var">lwcs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-414"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679786889"><span class="annot"><span class="annottext">minIndent :: Int
</span><a href="#local-6989586621679786889"><span class="hs-identifier hs-var hs-var">minIndent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; Int
</span><a href="#local-6989586621679786890"><span class="hs-identifier hs-var">minimumIndentOf</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786886"><span class="hs-identifier hs-var">lwc</span></a></span><span>
</span><span id="line-415"></span><span>            </span><span id="local-6989586621679786891"><span class="annot"><span class="annottext">otherIndent :: Int
</span><a href="#local-6989586621679786891"><span class="hs-identifier hs-var hs-var">otherIndent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; Int
</span><a href="#local-6989586621679786890"><span class="hs-identifier hs-var">minimumIndentOf</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786887"><span class="hs-identifier hs-var">lwc'</span></a></span><span>
</span><span id="line-416"></span><span>         </span><span class="hs-keyword">in</span><span>
</span><span id="line-417"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679786889"><span class="hs-identifier hs-var">minIndent</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679786891"><span class="hs-identifier hs-var">otherIndent</span></a></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-418"></span><span>                </span><span class="annot"><span class="annottext">LinesWithComments -&gt; LinesWithComments -&gt; LinesWithComments
</span><a href="Database.Persist.Quasi.Internal.html#appendLwc"><span class="hs-identifier hs-var">appendLwc</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786886"><span class="hs-identifier hs-var">lwc</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786887"><span class="hs-identifier hs-var">lwc'</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; [LinesWithComments] -&gt; [LinesWithComments]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LinesWithComments]
</span><a href="#local-6989586621679786888"><span class="hs-identifier hs-var">lwcs</span></a></span><span>
</span><span id="line-419"></span><span>            </span><span class="hs-keyword">else</span><span>
</span><span id="line-420"></span><span>                </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786886"><span class="hs-identifier hs-var">lwc</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; [LinesWithComments] -&gt; [LinesWithComments]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">LinesWithComments
</span><a href="#local-6989586621679786887"><span class="hs-identifier hs-var">lwc'</span></a></span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; [LinesWithComments] -&gt; [LinesWithComments]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[LinesWithComments]
</span><a href="#local-6989586621679786888"><span class="hs-identifier hs-var">lwcs</span></a></span><span>
</span><span id="line-421"></span><span>
</span><span id="line-422"></span><span>    </span><span class="annot"><a href="#local-6989586621679786890"><span class="hs-identifier hs-type">minimumIndentOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#LinesWithComments"><span class="hs-identifier hs-type">LinesWithComments</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-423"></span><span>    </span><span id="local-6989586621679786890"><span class="annot"><span class="annottext">minimumIndentOf :: LinesWithComments -&gt; Int
</span><a href="#local-6989586621679786890"><span class="hs-identifier hs-var hs-var">minimumIndentOf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty Line -&gt; Int
</span><a href="Database.Persist.Quasi.Internal.html#lowestIndent"><span class="hs-identifier hs-var">lowestIndent</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty Line -&gt; Int)
-&gt; (LinesWithComments -&gt; NonEmpty Line) -&gt; LinesWithComments -&gt; Int
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">LinesWithComments -&gt; NonEmpty Line
</span><a href="Database.Persist.Quasi.Internal.html#lwcLines"><span class="hs-identifier hs-var">lwcLines</span></a></span><span>
</span><span id="line-424"></span><span>
</span><span id="line-425"></span><span class="hs-comment">-- | An 'EntityDef' produced by the QuasiQuoter. It contains information that</span><span>
</span><span id="line-426"></span><span class="hs-comment">-- the QuasiQuoter is capable of knowing about the entities. It is inherently</span><span>
</span><span id="line-427"></span><span class="hs-comment">-- unfinished, though - there are many other @Unbound@ datatypes that also</span><span>
</span><span id="line-428"></span><span class="hs-comment">-- contain partial information.</span><span>
</span><span id="line-429"></span><span class="hs-comment">--</span><span>
</span><span id="line-430"></span><span class="hs-comment">-- The 'unboundEntityDef' is not complete or reliable - to know which fields are</span><span>
</span><span id="line-431"></span><span class="hs-comment">-- safe to use, consult the parsing code.</span><span>
</span><span id="line-432"></span><span class="hs-comment">--</span><span>
</span><span id="line-433"></span><span class="hs-comment">-- This type was completely internal until 2.13.0.0, when it was exposed as part</span><span>
</span><span id="line-434"></span><span class="hs-comment">-- of the &quot;Database.Persist.Quasi.Internal&quot; module.</span><span>
</span><span id="line-435"></span><span class="hs-comment">--</span><span>
</span><span id="line-436"></span><span class="hs-comment">-- TODO: refactor this so we can expose it for consumers.</span><span>
</span><span id="line-437"></span><span class="hs-comment">--</span><span>
</span><span id="line-438"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-439"></span><span class="hs-keyword">data</span><span> </span><span id="UnboundEntityDef"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundEntityDef"><span class="hs-identifier hs-var">UnboundEntityDef</span></a></span></span><span>
</span><span id="line-440"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="UnboundEntityDef"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundEntityDef"><span class="hs-identifier hs-var">UnboundEntityDef</span></a></span></span><span>
</span><span id="line-441"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unboundForeignDefs"><span class="annot"><span class="annottext">UnboundEntityDef -&gt; [UnboundForeignDef]
</span><a href="Database.Persist.Quasi.Internal.html#unboundForeignDefs"><span class="hs-identifier hs-var hs-var">unboundForeignDefs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignDef"><span class="hs-identifier hs-type">UnboundForeignDef</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-442"></span><span>    </span><span class="hs-comment">-- ^ A list of foreign definitions on the parsed entity.</span><span>
</span><span id="line-443"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-444"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-445"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundPrimarySpec"><span class="annot"><span class="annottext">UnboundEntityDef -&gt; PrimarySpec
</span><a href="Database.Persist.Quasi.Internal.html#unboundPrimarySpec"><span class="hs-identifier hs-var hs-var">unboundPrimarySpec</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PrimarySpec"><span class="hs-identifier hs-type">PrimarySpec</span></a></span><span>
</span><span id="line-446"></span><span>    </span><span class="hs-comment">-- ^ The specification for the primary key of the unbound entity.</span><span>
</span><span id="line-447"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-448"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-449"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundEntityDef"><span class="annot"><span class="annottext">UnboundEntityDef -&gt; EntityDef
</span><a href="Database.Persist.Quasi.Internal.html#unboundEntityDef"><span class="hs-identifier hs-var hs-var">unboundEntityDef</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#EntityDef"><span class="hs-identifier hs-type">EntityDef</span></a></span><span>
</span><span id="line-450"></span><span>    </span><span class="hs-comment">-- ^ The incomplete and partial 'EntityDef' that we're defining. We re-use</span><span>
</span><span id="line-451"></span><span>    </span><span class="hs-comment">-- the type here to prevent duplication, but several of the fields are unset</span><span>
</span><span id="line-452"></span><span>    </span><span class="hs-comment">-- and left to defaults.</span><span>
</span><span id="line-453"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-454"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-455"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundEntityFields"><span class="annot"><span class="annottext">UnboundEntityDef -&gt; [UnboundFieldDef]
</span><a href="Database.Persist.Quasi.Internal.html#unboundEntityFields"><span class="hs-identifier hs-var hs-var">unboundEntityFields</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-456"></span><span>    </span><span class="hs-comment">-- ^ The list of fields for the entity. We're not capable of knowing</span><span>
</span><span id="line-457"></span><span>    </span><span class="hs-comment">-- information like &quot;is this a reference?&quot; or &quot;what's the underlying type of</span><span>
</span><span id="line-458"></span><span>    </span><span class="hs-comment">-- the field?&quot; yet, so we defer those to the Template Haskell execution.</span><span>
</span><span id="line-459"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-460"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-461"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-462"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679786900"><span id="local-6989586621679786910"><span class="annot"><span class="annottext">UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool
(UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool)
-&gt; (UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool)
-&gt; Eq UnboundEntityDef
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool
== :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool
$c/= :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool
/= :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786918"><span id="local-6989586621679786929"><span id="local-6989586621679786937"><span id="local-6989586621679786941"><span id="local-6989586621679786944"><span id="local-6989586621679786947"><span id="local-6989586621679786950"><span class="annot"><span class="annottext">Eq UnboundEntityDef
Eq UnboundEntityDef =&gt;
(UnboundEntityDef -&gt; UnboundEntityDef -&gt; Ordering)
-&gt; (UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool)
-&gt; (UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool)
-&gt; (UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool)
-&gt; (UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool)
-&gt; (UnboundEntityDef -&gt; UnboundEntityDef -&gt; UnboundEntityDef)
-&gt; (UnboundEntityDef -&gt; UnboundEntityDef -&gt; UnboundEntityDef)
-&gt; Ord UnboundEntityDef
UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool
UnboundEntityDef -&gt; UnboundEntityDef -&gt; Ordering
UnboundEntityDef -&gt; UnboundEntityDef -&gt; UnboundEntityDef
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; Ordering
compare :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; Ordering
$c&lt; :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool
&lt; :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool
$c&lt;= :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool
&lt;= :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool
$c&gt; :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool
&gt; :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool
$c&gt;= :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool
&gt;= :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; Bool
$cmax :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; UnboundEntityDef
max :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; UnboundEntityDef
$cmin :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; UnboundEntityDef
min :: UnboundEntityDef -&gt; UnboundEntityDef -&gt; UnboundEntityDef
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786956"><span id="local-6989586621679786967"><span id="local-6989586621679786971"><span class="annot"><span class="annottext">Int -&gt; UnboundEntityDef -&gt; ShowS
[UnboundEntityDef] -&gt; ShowS
UnboundEntityDef -&gt; [Char]
(Int -&gt; UnboundEntityDef -&gt; ShowS)
-&gt; (UnboundEntityDef -&gt; [Char])
-&gt; ([UnboundEntityDef] -&gt; ShowS)
-&gt; Show UnboundEntityDef
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; UnboundEntityDef -&gt; ShowS
showsPrec :: Int -&gt; UnboundEntityDef -&gt; ShowS
$cshow :: UnboundEntityDef -&gt; [Char]
show :: UnboundEntityDef -&gt; [Char]
$cshowList :: [UnboundEntityDef] -&gt; ShowS
showList :: [UnboundEntityDef] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679786976"><span id="local-6989586621679786993"><span class="annot"><span class="annottext">(forall (m :: * -&gt; *). Quote m =&gt; UnboundEntityDef -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *).
    Quote m =&gt;
    UnboundEntityDef -&gt; Code m UnboundEntityDef)
-&gt; Lift UnboundEntityDef
forall t.
(forall (m :: * -&gt; *). Quote m =&gt; t -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; t -&gt; Code m t) -&gt; Lift t
forall (m :: * -&gt; *). Quote m =&gt; UnboundEntityDef -&gt; m Exp
forall (m :: * -&gt; *).
Quote m =&gt;
UnboundEntityDef -&gt; Code m UnboundEntityDef
$clift :: forall (m :: * -&gt; *). Quote m =&gt; UnboundEntityDef -&gt; m Exp
lift :: forall (m :: * -&gt; *). Quote m =&gt; UnboundEntityDef -&gt; m Exp
$cliftTyped :: forall (m :: * -&gt; *).
Quote m =&gt;
UnboundEntityDef -&gt; Code m UnboundEntityDef
liftTyped :: forall (m :: * -&gt; *).
Quote m =&gt;
UnboundEntityDef -&gt; Code m UnboundEntityDef
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Lift</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>
</span><span id="line-464"></span><span class="hs-comment">-- | Convert an 'EntityDef' into an 'UnboundEntityDef'. This &quot;forgets&quot;</span><span>
</span><span id="line-465"></span><span class="hs-comment">-- information about the 'EntityDef', but it is all kept present on the</span><span>
</span><span id="line-466"></span><span class="hs-comment">-- 'unboundEntityDef' field if necessary.</span><span>
</span><span id="line-467"></span><span class="hs-comment">--</span><span>
</span><span id="line-468"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-469"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#unbindEntityDef"><span class="hs-identifier hs-type">unbindEntityDef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#EntityDef"><span class="hs-identifier hs-type">EntityDef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundEntityDef"><span class="hs-identifier hs-type">UnboundEntityDef</span></a></span><span>
</span><span id="line-470"></span><span id="unbindEntityDef"><span class="annot"><span class="annottext">unbindEntityDef :: EntityDef -&gt; UnboundEntityDef
</span><a href="Database.Persist.Quasi.Internal.html#unbindEntityDef"><span class="hs-identifier hs-var hs-var">unbindEntityDef</span></a></span></span><span> </span><span id="local-6989586621679787010"><span class="annot"><span class="annottext">EntityDef
</span><a href="#local-6989586621679787010"><span class="hs-identifier hs-var">ed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-471"></span><span>    </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundEntityDef"><span class="hs-identifier hs-type">UnboundEntityDef</span></a></span><span>
</span><span id="line-472"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">unboundForeignDefs :: [UnboundForeignDef]
</span><a href="Database.Persist.Quasi.Internal.html#unboundForeignDefs"><span class="hs-identifier hs-var">unboundForeignDefs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-473"></span><span>            </span><span class="annot"><span class="annottext">(ForeignDef -&gt; UnboundForeignDef)
-&gt; [ForeignDef] -&gt; [UnboundForeignDef]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">ForeignDef -&gt; UnboundForeignDef
</span><a href="Database.Persist.Quasi.Internal.html#unbindForeignDef"><span class="hs-identifier hs-var">unbindForeignDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityDef -&gt; [ForeignDef]
</span><a href="Database.Persist.Types.Base.html#entityForeigns"><span class="hs-identifier hs-var">entityForeigns</span></a></span><span> </span><span class="annot"><span class="annottext">EntityDef
</span><a href="#local-6989586621679787010"><span class="hs-identifier hs-var">ed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-474"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundPrimarySpec :: PrimarySpec
</span><a href="Database.Persist.Quasi.Internal.html#unboundPrimarySpec"><span class="hs-identifier hs-var">unboundPrimarySpec</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-475"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EntityDef -&gt; EntityIdDef
</span><a href="Database.Persist.Types.Base.html#entityId"><span class="hs-identifier hs-var">entityId</span></a></span><span> </span><span class="annot"><span class="annottext">EntityDef
</span><a href="#local-6989586621679787010"><span class="hs-identifier hs-var">ed</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-476"></span><span>                </span><span class="annot"><a href="Database.Persist.Types.Base.html#EntityIdField"><span class="hs-identifier hs-type">EntityIdField</span></a></span><span> </span><span id="local-6989586621679787015"><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787015"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-477"></span><span>                    </span><span class="annot"><span class="annottext">UnboundIdDef -&gt; PrimarySpec
</span><a href="Database.Persist.Quasi.Internal.html#SurrogateKey"><span class="hs-identifier hs-var">SurrogateKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityNameHS -&gt; FieldDef -&gt; UnboundIdDef
</span><a href="Database.Persist.Quasi.Internal.html#unbindIdDef"><span class="hs-identifier hs-var">unbindIdDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityDef -&gt; EntityNameHS
</span><a href="Database.Persist.Types.Base.html#entityHaskell"><span class="hs-identifier hs-var">entityHaskell</span></a></span><span> </span><span class="annot"><span class="annottext">EntityDef
</span><a href="#local-6989586621679787010"><span class="hs-identifier hs-var">ed</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787015"><span class="hs-identifier hs-var">fd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-478"></span><span>                </span><span class="annot"><a href="Database.Persist.Types.Base.html#EntityIdNaturalKey"><span class="hs-identifier hs-type">EntityIdNaturalKey</span></a></span><span> </span><span id="local-6989586621679787020"><span class="annot"><span class="annottext">CompositeDef
</span><a href="#local-6989586621679787020"><span class="hs-identifier hs-var">cd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-479"></span><span>                    </span><span class="annot"><span class="annottext">UnboundCompositeDef -&gt; PrimarySpec
</span><a href="Database.Persist.Quasi.Internal.html#NaturalKey"><span class="hs-identifier hs-var">NaturalKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CompositeDef -&gt; UnboundCompositeDef
</span><a href="Database.Persist.Quasi.Internal.html#unbindCompositeDef"><span class="hs-identifier hs-var">unbindCompositeDef</span></a></span><span> </span><span class="annot"><span class="annottext">CompositeDef
</span><a href="#local-6989586621679787020"><span class="hs-identifier hs-var">cd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-480"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundEntityDef :: EntityDef
</span><a href="Database.Persist.Quasi.Internal.html#unboundEntityDef"><span class="hs-identifier hs-var">unboundEntityDef</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-481"></span><span>            </span><span class="annot"><span class="annottext">EntityDef
</span><a href="#local-6989586621679787010"><span class="hs-identifier hs-var">ed</span></a></span><span>
</span><span id="line-482"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundEntityFields :: [UnboundFieldDef]
</span><a href="Database.Persist.Quasi.Internal.html#unboundEntityFields"><span class="hs-identifier hs-var">unboundEntityFields</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-483"></span><span>            </span><span class="annot"><span class="annottext">(FieldDef -&gt; UnboundFieldDef) -&gt; [FieldDef] -&gt; [UnboundFieldDef]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">FieldDef -&gt; UnboundFieldDef
</span><a href="Database.Persist.Quasi.Internal.html#unbindFieldDef"><span class="hs-identifier hs-var">unbindFieldDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityDef -&gt; [FieldDef]
</span><a href="Database.Persist.Types.Base.html#entityFields"><span class="hs-identifier hs-var">entityFields</span></a></span><span> </span><span class="annot"><span class="annottext">EntityDef
</span><a href="#local-6989586621679787010"><span class="hs-identifier hs-var">ed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-484"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span class="hs-comment">-- | Returns the @['UnboundFieldDef']@ for an 'UnboundEntityDef'. This returns</span><span>
</span><span id="line-487"></span><span class="hs-comment">-- all fields defined on the entity.</span><span>
</span><span id="line-488"></span><span class="hs-comment">--</span><span>
</span><span id="line-489"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-490"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#getUnboundFieldDefs"><span class="hs-identifier hs-type">getUnboundFieldDefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundEntityDef"><span class="hs-identifier hs-type">UnboundEntityDef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-491"></span><span id="getUnboundFieldDefs"><span class="annot"><span class="annottext">getUnboundFieldDefs :: UnboundEntityDef -&gt; [UnboundFieldDef]
</span><a href="Database.Persist.Quasi.Internal.html#getUnboundFieldDefs"><span class="hs-identifier hs-var hs-var">getUnboundFieldDefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnboundEntityDef -&gt; [UnboundFieldDef]
</span><a href="Database.Persist.Quasi.Internal.html#unboundEntityFields"><span class="hs-identifier hs-var">unboundEntityFields</span></a></span><span>
</span><span id="line-492"></span><span>
</span><span id="line-493"></span><span class="hs-comment">-- | This function forgets information about the 'CompositeDef' so that it can</span><span>
</span><span id="line-494"></span><span class="hs-comment">-- be remembered through Template Haskell.</span><span>
</span><span id="line-495"></span><span class="hs-comment">--</span><span>
</span><span id="line-496"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-497"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#unbindCompositeDef"><span class="hs-identifier hs-type">unbindCompositeDef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#CompositeDef"><span class="hs-identifier hs-type">CompositeDef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundCompositeDef"><span class="hs-identifier hs-type">UnboundCompositeDef</span></a></span><span>
</span><span id="line-498"></span><span id="unbindCompositeDef"><span class="annot"><span class="annottext">unbindCompositeDef :: CompositeDef -&gt; UnboundCompositeDef
</span><a href="Database.Persist.Quasi.Internal.html#unbindCompositeDef"><span class="hs-identifier hs-var hs-var">unbindCompositeDef</span></a></span></span><span> </span><span id="local-6989586621679787026"><span class="annot"><span class="annottext">CompositeDef
</span><a href="#local-6989586621679787026"><span class="hs-identifier hs-var">cd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-499"></span><span>    </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundCompositeDef"><span class="hs-identifier hs-type">UnboundCompositeDef</span></a></span><span>
</span><span id="line-500"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">unboundCompositeCols :: NonEmpty FieldNameHS
</span><a href="Database.Persist.Quasi.Internal.html#unboundCompositeCols"><span class="hs-identifier hs-var">unboundCompositeCols</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-501"></span><span>            </span><span class="annot"><span class="annottext">(FieldDef -&gt; FieldNameHS)
-&gt; NonEmpty FieldDef -&gt; NonEmpty FieldNameHS
forall a b. (a -&gt; b) -&gt; NonEmpty a -&gt; NonEmpty b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">FieldDef -&gt; FieldNameHS
</span><a href="Database.Persist.Types.Base.html#fieldHaskell"><span class="hs-identifier hs-var">fieldHaskell</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CompositeDef -&gt; NonEmpty FieldDef
</span><a href="Database.Persist.Types.Base.html#compositeFields"><span class="hs-identifier hs-var">compositeFields</span></a></span><span> </span><span class="annot"><span class="annottext">CompositeDef
</span><a href="#local-6989586621679787026"><span class="hs-identifier hs-var">cd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-502"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundCompositeAttrs :: [Text]
</span><a href="Database.Persist.Quasi.Internal.html#unboundCompositeAttrs"><span class="hs-identifier hs-var">unboundCompositeAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-503"></span><span>            </span><span class="annot"><span class="annottext">CompositeDef -&gt; [Text]
</span><a href="Database.Persist.Types.Base.html#compositeAttrs"><span class="hs-identifier hs-var">compositeAttrs</span></a></span><span> </span><span class="annot"><span class="annottext">CompositeDef
</span><a href="#local-6989586621679787026"><span class="hs-identifier hs-var">cd</span></a></span><span>
</span><span id="line-504"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-505"></span><span>
</span><span id="line-506"></span><span class="hs-comment">-- | A representation of a database column, with everything that can be known at</span><span>
</span><span id="line-507"></span><span class="hs-comment">-- parse time.</span><span>
</span><span id="line-508"></span><span class="hs-comment">--</span><span>
</span><span id="line-509"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-510"></span><span class="hs-keyword">data</span><span> </span><span id="UnboundFieldDef"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-var">UnboundFieldDef</span></a></span></span><span>
</span><span id="line-511"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="UnboundFieldDef"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-var">UnboundFieldDef</span></a></span></span><span>
</span><span id="line-512"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unboundFieldNameHS"><span class="annot"><span class="annottext">UnboundFieldDef -&gt; FieldNameHS
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldNameHS"><span class="hs-identifier hs-var hs-var">unboundFieldNameHS</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#FieldNameHS"><span class="hs-identifier hs-type">FieldNameHS</span></a></span><span>
</span><span id="line-513"></span><span>    </span><span class="hs-comment">-- ^  The Haskell name of the field. This is parsed directly from the</span><span>
</span><span id="line-514"></span><span>    </span><span class="hs-comment">-- definition, and is used to generate the Haskell record field and the</span><span>
</span><span id="line-515"></span><span>    </span><span class="hs-comment">-- 'EntityField' definition.</span><span>
</span><span id="line-516"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-517"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-518"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundFieldNameDB"><span class="annot"><span class="annottext">UnboundFieldDef -&gt; FieldNameDB
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldNameDB"><span class="hs-identifier hs-var hs-var">unboundFieldNameDB</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-type">FieldNameDB</span></a></span><span>
</span><span id="line-519"></span><span>    </span><span class="hs-comment">-- ^ The database name of the field. By default, this is determined by the</span><span>
</span><span id="line-520"></span><span>    </span><span class="hs-comment">-- 'PersistSettings' record at parse time. You can customize this with</span><span>
</span><span id="line-521"></span><span>    </span><span class="hs-comment">-- a @sql=@ attribute:</span><span>
</span><span id="line-522"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-523"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-524"></span><span>    </span><span class="hs-comment">--     name Text  sql=foo_name</span><span>
</span><span id="line-525"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-526"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-527"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-528"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundFieldAttrs"><span class="annot"><span class="annottext">UnboundFieldDef -&gt; [FieldAttr]
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldAttrs"><span class="hs-identifier hs-var hs-var">unboundFieldAttrs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldAttr"><span class="hs-identifier hs-type">FieldAttr</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-529"></span><span>    </span><span class="hs-comment">-- ^ The attributes present on the field. For rules on parsing and utility,</span><span>
</span><span id="line-530"></span><span>    </span><span class="hs-comment">-- see the comments on the datatype.</span><span>
</span><span id="line-531"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-532"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-533"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundFieldStrict"><span class="annot"><span class="annottext">UnboundFieldDef -&gt; Bool
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldStrict"><span class="hs-identifier hs-var hs-var">unboundFieldStrict</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-534"></span><span>    </span><span class="hs-comment">-- ^ Whether or not the field should be strict in the generated Haskell</span><span>
</span><span id="line-535"></span><span>    </span><span class="hs-comment">-- code.</span><span>
</span><span id="line-536"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-537"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-538"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundFieldType"><span class="annot"><span class="annottext">UnboundFieldDef -&gt; FieldType
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldType"><span class="hs-identifier hs-var hs-var">unboundFieldType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span>
</span><span id="line-539"></span><span>    </span><span class="hs-comment">-- ^ The type of the field, as far as is known at parse time.</span><span>
</span><span id="line-540"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-541"></span><span>    </span><span class="hs-comment">-- The TemplateHaskell code will reconstruct a 'Type' out of this, but the</span><span>
</span><span id="line-542"></span><span>    </span><span class="hs-comment">-- names will be imported as-is.</span><span>
</span><span id="line-543"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-544"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-545"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundFieldCascade"><span class="annot"><span class="annottext">UnboundFieldDef -&gt; FieldCascade
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldCascade"><span class="hs-identifier hs-var hs-var">unboundFieldCascade</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldCascade"><span class="hs-identifier hs-type">FieldCascade</span></a></span><span>
</span><span id="line-546"></span><span>    </span><span class="hs-comment">-- ^ We parse if there's a 'FieldCascade' on the field. If the field is not</span><span>
</span><span id="line-547"></span><span>    </span><span class="hs-comment">-- a reference, this information is ignored.</span><span>
</span><span id="line-548"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-549"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-550"></span><span>    </span><span class="hs-comment">-- Post</span><span>
</span><span id="line-551"></span><span>    </span><span class="hs-comment">--    user UserId OnDeleteCascade</span><span>
</span><span id="line-552"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-553"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-554"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-555"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundFieldGenerated"><span class="annot"><span class="annottext">UnboundFieldDef -&gt; Maybe Text
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldGenerated"><span class="hs-identifier hs-var hs-var">unboundFieldGenerated</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-556"></span><span>    </span><span class="hs-comment">-- ^ Contains an expression to generate the column. If this is present, then</span><span>
</span><span id="line-557"></span><span>    </span><span class="hs-comment">-- the column will not be written to the database, but generated by the</span><span>
</span><span id="line-558"></span><span>    </span><span class="hs-comment">-- expression every time.</span><span>
</span><span id="line-559"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-560"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-561"></span><span>    </span><span class="hs-comment">-- Item</span><span>
</span><span id="line-562"></span><span>    </span><span class="hs-comment">--     subtotal Int</span><span>
</span><span id="line-563"></span><span>    </span><span class="hs-comment">--     taxRate  Rational</span><span>
</span><span id="line-564"></span><span>    </span><span class="hs-comment">--     total    Int      generated=&quot;subtotal * tax_rate&quot;</span><span>
</span><span id="line-565"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-566"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-567"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-568"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundFieldComments"><span class="annot"><span class="annottext">UnboundFieldDef -&gt; Maybe Text
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldComments"><span class="hs-identifier hs-var hs-var">unboundFieldComments</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-569"></span><span>    </span><span class="hs-comment">-- ^ Any comments present on the field. Documentation comments use</span><span>
</span><span id="line-570"></span><span>    </span><span class="hs-comment">-- a Haskell-like syntax, and must be present before the field in question.</span><span>
</span><span id="line-571"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-572"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-573"></span><span>    </span><span class="hs-comment">-- Post</span><span>
</span><span id="line-574"></span><span>    </span><span class="hs-comment">--     -- | This is the blog post title.</span><span>
</span><span id="line-575"></span><span>    </span><span class="hs-comment">--     title Text</span><span>
</span><span id="line-576"></span><span>    </span><span class="hs-comment">--     -- | You can have multi-line comments.</span><span>
</span><span id="line-577"></span><span>    </span><span class="hs-comment">--     -- | But each line must have the pipe character.</span><span>
</span><span id="line-578"></span><span>    </span><span class="hs-comment">--     author UserId</span><span>
</span><span id="line-579"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-580"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-581"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-582"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-583"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787043"><span id="local-6989586621679787056"><span class="annot"><span class="annottext">UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool
(UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool)
-&gt; (UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool)
-&gt; Eq UnboundFieldDef
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool
== :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool
$c/= :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool
/= :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787061"><span id="local-6989586621679787078"><span id="local-6989586621679787089"><span id="local-6989586621679787092"><span id="local-6989586621679787095"><span id="local-6989586621679787098"><span id="local-6989586621679787101"><span class="annot"><span class="annottext">Eq UnboundFieldDef
Eq UnboundFieldDef =&gt;
(UnboundFieldDef -&gt; UnboundFieldDef -&gt; Ordering)
-&gt; (UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool)
-&gt; (UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool)
-&gt; (UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool)
-&gt; (UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool)
-&gt; (UnboundFieldDef -&gt; UnboundFieldDef -&gt; UnboundFieldDef)
-&gt; (UnboundFieldDef -&gt; UnboundFieldDef -&gt; UnboundFieldDef)
-&gt; Ord UnboundFieldDef
UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool
UnboundFieldDef -&gt; UnboundFieldDef -&gt; Ordering
UnboundFieldDef -&gt; UnboundFieldDef -&gt; UnboundFieldDef
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; Ordering
compare :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; Ordering
$c&lt; :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool
&lt; :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool
$c&lt;= :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool
&lt;= :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool
$c&gt; :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool
&gt; :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool
$c&gt;= :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool
&gt;= :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; Bool
$cmax :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; UnboundFieldDef
max :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; UnboundFieldDef
$cmin :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; UnboundFieldDef
min :: UnboundFieldDef -&gt; UnboundFieldDef -&gt; UnboundFieldDef
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787105"><span id="local-6989586621679787121"><span id="local-6989586621679787124"><span class="annot"><span class="annottext">Int -&gt; UnboundFieldDef -&gt; ShowS
[UnboundFieldDef] -&gt; ShowS
UnboundFieldDef -&gt; [Char]
(Int -&gt; UnboundFieldDef -&gt; ShowS)
-&gt; (UnboundFieldDef -&gt; [Char])
-&gt; ([UnboundFieldDef] -&gt; ShowS)
-&gt; Show UnboundFieldDef
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; UnboundFieldDef -&gt; ShowS
showsPrec :: Int -&gt; UnboundFieldDef -&gt; ShowS
$cshow :: UnboundFieldDef -&gt; [Char]
show :: UnboundFieldDef -&gt; [Char]
$cshowList :: [UnboundFieldDef] -&gt; ShowS
showList :: [UnboundFieldDef] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787128"><span id="local-6989586621679787156"><span class="annot"><span class="annottext">(forall (m :: * -&gt; *). Quote m =&gt; UnboundFieldDef -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *).
    Quote m =&gt;
    UnboundFieldDef -&gt; Code m UnboundFieldDef)
-&gt; Lift UnboundFieldDef
forall t.
(forall (m :: * -&gt; *). Quote m =&gt; t -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; t -&gt; Code m t) -&gt; Lift t
forall (m :: * -&gt; *). Quote m =&gt; UnboundFieldDef -&gt; m Exp
forall (m :: * -&gt; *).
Quote m =&gt;
UnboundFieldDef -&gt; Code m UnboundFieldDef
$clift :: forall (m :: * -&gt; *). Quote m =&gt; UnboundFieldDef -&gt; m Exp
lift :: forall (m :: * -&gt; *). Quote m =&gt; UnboundFieldDef -&gt; m Exp
$cliftTyped :: forall (m :: * -&gt; *).
Quote m =&gt;
UnboundFieldDef -&gt; Code m UnboundFieldDef
liftTyped :: forall (m :: * -&gt; *).
Quote m =&gt;
UnboundFieldDef -&gt; Code m UnboundFieldDef
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Lift</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-584"></span><span>
</span><span id="line-585"></span><span class="hs-comment">-- | Forget innformation about a 'FieldDef' so it can beused as an</span><span>
</span><span id="line-586"></span><span class="hs-comment">-- 'UnboundFieldDef'.</span><span>
</span><span id="line-587"></span><span class="hs-comment">--</span><span>
</span><span id="line-588"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-589"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#unbindFieldDef"><span class="hs-identifier hs-type">unbindFieldDef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span>
</span><span id="line-590"></span><span id="unbindFieldDef"><span class="annot"><span class="annottext">unbindFieldDef :: FieldDef -&gt; UnboundFieldDef
</span><a href="Database.Persist.Quasi.Internal.html#unbindFieldDef"><span class="hs-identifier hs-var hs-var">unbindFieldDef</span></a></span></span><span> </span><span id="local-6989586621679787180"><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787180"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span>
</span><span id="line-591"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">unboundFieldNameHS :: FieldNameHS
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldNameHS"><span class="hs-identifier hs-var">unboundFieldNameHS</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-592"></span><span>        </span><span class="annot"><span class="annottext">FieldDef -&gt; FieldNameHS
</span><a href="Database.Persist.Types.Base.html#fieldHaskell"><span class="hs-identifier hs-var">fieldHaskell</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787180"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-593"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundFieldNameDB :: FieldNameDB
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldNameDB"><span class="hs-identifier hs-var">unboundFieldNameDB</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-594"></span><span>        </span><span class="annot"><span class="annottext">FieldDef -&gt; FieldNameDB
</span><a href="Database.Persist.Types.Base.html#fieldDB"><span class="hs-identifier hs-var">fieldDB</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787180"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-595"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundFieldAttrs :: [FieldAttr]
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldAttrs"><span class="hs-identifier hs-var">unboundFieldAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-596"></span><span>        </span><span class="annot"><span class="annottext">FieldDef -&gt; [FieldAttr]
</span><a href="Database.Persist.Types.Base.html#fieldAttrs"><span class="hs-identifier hs-var">fieldAttrs</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787180"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-597"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundFieldType :: FieldType
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldType"><span class="hs-identifier hs-var">unboundFieldType</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-598"></span><span>        </span><span class="annot"><span class="annottext">FieldDef -&gt; FieldType
</span><a href="Database.Persist.Types.Base.html#fieldType"><span class="hs-identifier hs-var">fieldType</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787180"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-599"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundFieldStrict :: Bool
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldStrict"><span class="hs-identifier hs-var">unboundFieldStrict</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-600"></span><span>        </span><span class="annot"><span class="annottext">FieldDef -&gt; Bool
</span><a href="Database.Persist.Types.Base.html#fieldStrict"><span class="hs-identifier hs-var">fieldStrict</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787180"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-601"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundFieldCascade :: FieldCascade
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldCascade"><span class="hs-identifier hs-var">unboundFieldCascade</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-602"></span><span>        </span><span class="annot"><span class="annottext">FieldDef -&gt; FieldCascade
</span><a href="Database.Persist.Types.Base.html#fieldCascade"><span class="hs-identifier hs-var">fieldCascade</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787180"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-603"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundFieldComments :: Maybe Text
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldComments"><span class="hs-identifier hs-var">unboundFieldComments</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-604"></span><span>        </span><span class="annot"><span class="annottext">FieldDef -&gt; Maybe Text
</span><a href="Database.Persist.Types.Base.html#fieldComments"><span class="hs-identifier hs-var">fieldComments</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787180"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-605"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundFieldGenerated :: Maybe Text
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldGenerated"><span class="hs-identifier hs-var">unboundFieldGenerated</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-606"></span><span>        </span><span class="annot"><span class="annottext">FieldDef -&gt; Maybe Text
</span><a href="Database.Persist.Types.Base.html#fieldGenerated"><span class="hs-identifier hs-var">fieldGenerated</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787180"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-607"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-608"></span><span>
</span><span id="line-609"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#isUnboundFieldNullable"><span class="hs-identifier hs-type">isUnboundFieldNullable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#IsNullable"><span class="hs-identifier hs-type">IsNullable</span></a></span><span>
</span><span id="line-610"></span><span id="isUnboundFieldNullable"><span class="annot"><span class="annottext">isUnboundFieldNullable :: UnboundFieldDef -&gt; IsNullable
</span><a href="Database.Persist.Quasi.Internal.html#isUnboundFieldNullable"><span class="hs-identifier hs-var hs-var">isUnboundFieldNullable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-611"></span><span>    </span><span class="annot"><span class="annottext">[FieldAttr] -&gt; IsNullable
</span><a href="Database.Persist.Types.Base.html#fieldAttrsContainsNullable"><span class="hs-identifier hs-var">fieldAttrsContainsNullable</span></a></span><span> </span><span class="annot"><span class="annottext">([FieldAttr] -&gt; IsNullable)
-&gt; (UnboundFieldDef -&gt; [FieldAttr])
-&gt; UnboundFieldDef
-&gt; IsNullable
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">UnboundFieldDef -&gt; [FieldAttr]
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldAttrs"><span class="hs-identifier hs-var">unboundFieldAttrs</span></a></span><span>
</span><span id="line-612"></span><span>
</span><span id="line-613"></span><span class="hs-comment">-- | The specification for how an entity's primary key should be formed.</span><span>
</span><span id="line-614"></span><span class="hs-comment">--</span><span>
</span><span id="line-615"></span><span class="hs-comment">-- Persistent requires that every table have a primary key. By default, an</span><span>
</span><span id="line-616"></span><span class="hs-comment">-- implied ID is assigned, based on the 'mpsImplicitIdDef' field on</span><span>
</span><span id="line-617"></span><span class="hs-comment">-- 'MkPersistSettings'. Because we can't access that type at parse-time, we</span><span>
</span><span id="line-618"></span><span class="hs-comment">-- defer that decision until later.</span><span>
</span><span id="line-619"></span><span class="hs-comment">--</span><span>
</span><span id="line-620"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-621"></span><span class="hs-keyword">data</span><span> </span><span id="PrimarySpec"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PrimarySpec"><span class="hs-identifier hs-var">PrimarySpec</span></a></span></span><span>
</span><span id="line-622"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="NaturalKey"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#NaturalKey"><span class="hs-identifier hs-var">NaturalKey</span></a></span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundCompositeDef"><span class="hs-identifier hs-type">UnboundCompositeDef</span></a></span><span>
</span><span id="line-623"></span><span>    </span><span class="hs-comment">-- ^ A 'NaturalKey' contains columns that are defined on the datatype</span><span>
</span><span id="line-624"></span><span>    </span><span class="hs-comment">-- itself. This is defined using the @Primary@ keyword and given a non-empty</span><span>
</span><span id="line-625"></span><span>    </span><span class="hs-comment">-- list of columns.</span><span>
</span><span id="line-626"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-627"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-628"></span><span>    </span><span class="hs-comment">-- User</span><span>
</span><span id="line-629"></span><span>    </span><span class="hs-comment">--     name    Text</span><span>
</span><span id="line-630"></span><span>    </span><span class="hs-comment">--     email   Text</span><span>
</span><span id="line-631"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-632"></span><span>    </span><span class="hs-comment">--     Primary name email</span><span>
</span><span id="line-633"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-634"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-635"></span><span>    </span><span class="hs-comment">-- A natural key may also contain only a single column. A natural key with</span><span>
</span><span id="line-636"></span><span>    </span><span class="hs-comment">-- multiple columns is called a 'composite key'.</span><span>
</span><span id="line-637"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-638"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-639"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="SurrogateKey"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#SurrogateKey"><span class="hs-identifier hs-var">SurrogateKey</span></a></span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundIdDef"><span class="hs-identifier hs-type">UnboundIdDef</span></a></span><span>
</span><span id="line-640"></span><span>    </span><span class="hs-comment">-- ^ A surrogate key is not part of the domain model for a database table.</span><span>
</span><span id="line-641"></span><span>    </span><span class="hs-comment">-- You can specify a custom surro</span><span>
</span><span id="line-642"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-643"></span><span>    </span><span class="hs-comment">-- You can specify a custom surrogate key using the @Id@ syntax.</span><span>
</span><span id="line-644"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-645"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-646"></span><span>    </span><span class="hs-comment">-- User</span><span>
</span><span id="line-647"></span><span>    </span><span class="hs-comment">--     Id    Text</span><span>
</span><span id="line-648"></span><span>    </span><span class="hs-comment">--     name  Text</span><span>
</span><span id="line-649"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-650"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-651"></span><span>    </span><span class="hs-comment">-- Note that you must provide a @default=@ expression when using this in</span><span>
</span><span id="line-652"></span><span>    </span><span class="hs-comment">-- order to use 'insert' or related functions. The 'insertKey' function can</span><span>
</span><span id="line-653"></span><span>    </span><span class="hs-comment">-- be used instead, as it allows you to specify a key directly. Fixing this</span><span>
</span><span id="line-654"></span><span>    </span><span class="hs-comment">-- issue is tracked in #1247 on GitHub.</span><span>
</span><span id="line-655"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-656"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-657"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="DefaultKey"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#DefaultKey"><span class="hs-identifier hs-var">DefaultKey</span></a></span></span><span> </span><span class="annot"><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-type">FieldNameDB</span></a></span><span>
</span><span id="line-658"></span><span>    </span><span class="hs-comment">-- ^ The default key for the entity using the settings in</span><span>
</span><span id="line-659"></span><span>    </span><span class="hs-comment">-- 'MkPersistSettings'.</span><span>
</span><span id="line-660"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-661"></span><span>    </span><span class="hs-comment">-- This is implicit - a table without an @Id@ or @Primary@ declaration will</span><span>
</span><span id="line-662"></span><span>    </span><span class="hs-comment">-- have a 'DefaultKey'.</span><span>
</span><span id="line-663"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-664"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-665"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787191"><span id="local-6989586621679787198"><span class="annot"><span class="annottext">PrimarySpec -&gt; PrimarySpec -&gt; Bool
(PrimarySpec -&gt; PrimarySpec -&gt; Bool)
-&gt; (PrimarySpec -&gt; PrimarySpec -&gt; Bool) -&gt; Eq PrimarySpec
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: PrimarySpec -&gt; PrimarySpec -&gt; Bool
== :: PrimarySpec -&gt; PrimarySpec -&gt; Bool
$c/= :: PrimarySpec -&gt; PrimarySpec -&gt; Bool
/= :: PrimarySpec -&gt; PrimarySpec -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787203"><span id="local-6989586621679787210"><span id="local-6989586621679787215"><span id="local-6989586621679787218"><span id="local-6989586621679787221"><span id="local-6989586621679787224"><span id="local-6989586621679787227"><span class="annot"><span class="annottext">Eq PrimarySpec
Eq PrimarySpec =&gt;
(PrimarySpec -&gt; PrimarySpec -&gt; Ordering)
-&gt; (PrimarySpec -&gt; PrimarySpec -&gt; Bool)
-&gt; (PrimarySpec -&gt; PrimarySpec -&gt; Bool)
-&gt; (PrimarySpec -&gt; PrimarySpec -&gt; Bool)
-&gt; (PrimarySpec -&gt; PrimarySpec -&gt; Bool)
-&gt; (PrimarySpec -&gt; PrimarySpec -&gt; PrimarySpec)
-&gt; (PrimarySpec -&gt; PrimarySpec -&gt; PrimarySpec)
-&gt; Ord PrimarySpec
PrimarySpec -&gt; PrimarySpec -&gt; Bool
PrimarySpec -&gt; PrimarySpec -&gt; Ordering
PrimarySpec -&gt; PrimarySpec -&gt; PrimarySpec
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: PrimarySpec -&gt; PrimarySpec -&gt; Ordering
compare :: PrimarySpec -&gt; PrimarySpec -&gt; Ordering
$c&lt; :: PrimarySpec -&gt; PrimarySpec -&gt; Bool
&lt; :: PrimarySpec -&gt; PrimarySpec -&gt; Bool
$c&lt;= :: PrimarySpec -&gt; PrimarySpec -&gt; Bool
&lt;= :: PrimarySpec -&gt; PrimarySpec -&gt; Bool
$c&gt; :: PrimarySpec -&gt; PrimarySpec -&gt; Bool
&gt; :: PrimarySpec -&gt; PrimarySpec -&gt; Bool
$c&gt;= :: PrimarySpec -&gt; PrimarySpec -&gt; Bool
&gt;= :: PrimarySpec -&gt; PrimarySpec -&gt; Bool
$cmax :: PrimarySpec -&gt; PrimarySpec -&gt; PrimarySpec
max :: PrimarySpec -&gt; PrimarySpec -&gt; PrimarySpec
$cmin :: PrimarySpec -&gt; PrimarySpec -&gt; PrimarySpec
min :: PrimarySpec -&gt; PrimarySpec -&gt; PrimarySpec
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787230"><span id="local-6989586621679787240"><span id="local-6989586621679787243"><span class="annot"><span class="annottext">Int -&gt; PrimarySpec -&gt; ShowS
[PrimarySpec] -&gt; ShowS
PrimarySpec -&gt; [Char]
(Int -&gt; PrimarySpec -&gt; ShowS)
-&gt; (PrimarySpec -&gt; [Char])
-&gt; ([PrimarySpec] -&gt; ShowS)
-&gt; Show PrimarySpec
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; PrimarySpec -&gt; ShowS
showsPrec :: Int -&gt; PrimarySpec -&gt; ShowS
$cshow :: PrimarySpec -&gt; [Char]
show :: PrimarySpec -&gt; [Char]
$cshowList :: [PrimarySpec] -&gt; ShowS
showList :: [PrimarySpec] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787246"><span id="local-6989586621679787260"><span class="annot"><span class="annottext">(forall (m :: * -&gt; *). Quote m =&gt; PrimarySpec -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *).
    Quote m =&gt;
    PrimarySpec -&gt; Code m PrimarySpec)
-&gt; Lift PrimarySpec
forall t.
(forall (m :: * -&gt; *). Quote m =&gt; t -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; t -&gt; Code m t) -&gt; Lift t
forall (m :: * -&gt; *). Quote m =&gt; PrimarySpec -&gt; m Exp
forall (m :: * -&gt; *). Quote m =&gt; PrimarySpec -&gt; Code m PrimarySpec
$clift :: forall (m :: * -&gt; *). Quote m =&gt; PrimarySpec -&gt; m Exp
lift :: forall (m :: * -&gt; *). Quote m =&gt; PrimarySpec -&gt; m Exp
$cliftTyped :: forall (m :: * -&gt; *). Quote m =&gt; PrimarySpec -&gt; Code m PrimarySpec
liftTyped :: forall (m :: * -&gt; *). Quote m =&gt; PrimarySpec -&gt; Code m PrimarySpec
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Lift</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-666"></span><span>
</span><span id="line-667"></span><span class="annot"><span class="hs-comment">-- | Construct an entity definition.</span></span><span>
</span><span id="line-668"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#mkUnboundEntityDef"><span class="hs-identifier hs-type">mkUnboundEntityDef</span></a></span><span>
</span><span id="line-669"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span>
</span><span id="line-670"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ParsedEntityDef"><span class="hs-identifier hs-type">ParsedEntityDef</span></a></span><span> </span><span class="annot"><span class="hs-comment">-- ^ parsed entity definition</span></span><span>
</span><span id="line-671"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundEntityDef"><span class="hs-identifier hs-type">UnboundEntityDef</span></a></span><span>
</span><span id="line-672"></span><span id="mkUnboundEntityDef"><span class="annot"><span class="annottext">mkUnboundEntityDef :: PersistSettings -&gt; ParsedEntityDef -&gt; UnboundEntityDef
</span><a href="Database.Persist.Quasi.Internal.html#mkUnboundEntityDef"><span class="hs-identifier hs-var hs-var">mkUnboundEntityDef</span></a></span></span><span> </span><span id="local-6989586621679787271"><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787271"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679787272"><span class="annot"><span class="annottext">ParsedEntityDef
</span><a href="#local-6989586621679787272"><span class="hs-identifier hs-var">parsedEntDef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-673"></span><span>    </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundEntityDef"><span class="hs-identifier hs-type">UnboundEntityDef</span></a></span><span>
</span><span id="line-674"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">unboundForeignDefs :: [UnboundForeignDef]
</span><a href="Database.Persist.Quasi.Internal.html#unboundForeignDefs"><span class="hs-identifier hs-var">unboundForeignDefs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-675"></span><span>            </span><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; [UnboundForeignDef]
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsForeignsList"><span class="hs-identifier hs-var">entityConstraintDefsForeignsList</span></a></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs
</span><a href="#local-6989586621679787274"><span class="hs-identifier hs-var">entityConstraintDefs</span></a></span><span>
</span><span id="line-676"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundPrimarySpec :: PrimarySpec
</span><a href="Database.Persist.Quasi.Internal.html#unboundPrimarySpec"><span class="hs-identifier hs-var">unboundPrimarySpec</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-677"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe UnboundIdDef
</span><a href="#local-6989586621679787275"><span class="hs-identifier hs-var">idField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe UnboundCompositeDef
</span><a href="#local-6989586621679787276"><span class="hs-identifier hs-var">primaryComposite</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-678"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-679"></span><span>                    </span><span class="annot"><span class="annottext">[Char] -&gt; PrimarySpec
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Specified both an ID field and a Primary field&quot;</span></span><span>
</span><span id="line-680"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679787277"><span class="annot"><span class="annottext">UnboundIdDef
</span><a href="#local-6989586621679787277"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe UnboundCompositeDef
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-681"></span><span>                    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">UnboundIdDef -&gt; Maybe FieldType
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdType"><span class="hs-identifier hs-var">unboundIdType</span></a></span><span> </span><span class="annot"><span class="annottext">UnboundIdDef
</span><a href="#local-6989586621679787277"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe FieldType -&gt; Maybe FieldType -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FieldType -&gt; Maybe FieldType
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityNameHS -&gt; FieldType
</span><a href="Database.Persist.Quasi.Internal.html#mkKeyConType"><span class="hs-identifier hs-var">mkKeyConType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnboundIdDef -&gt; EntityNameHS
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdEntityName"><span class="hs-identifier hs-var">unboundIdEntityName</span></a></span><span> </span><span class="annot"><span class="annottext">UnboundIdDef
</span><a href="#local-6989586621679787277"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-682"></span><span>                    </span><span class="hs-keyword">then</span><span>
</span><span id="line-683"></span><span>                        </span><span class="annot"><span class="annottext">FieldNameDB -&gt; PrimarySpec
</span><a href="Database.Persist.Quasi.Internal.html#DefaultKey"><span class="hs-identifier hs-var">DefaultKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; FieldNameDB
</span><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-var">FieldNameDB</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; FieldNameDB) -&gt; Text -&gt; FieldNameDB
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PersistSettings -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psIdName"><span class="hs-identifier hs-var">psIdName</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787271"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-684"></span><span>                    </span><span class="hs-keyword">else</span><span>
</span><span id="line-685"></span><span>                        </span><span class="annot"><span class="annottext">UnboundIdDef -&gt; PrimarySpec
</span><a href="Database.Persist.Quasi.Internal.html#SurrogateKey"><span class="hs-identifier hs-var">SurrogateKey</span></a></span><span> </span><span class="annot"><span class="annottext">UnboundIdDef
</span><a href="#local-6989586621679787277"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-686"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe UnboundIdDef
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679787281"><span class="annot"><span class="annottext">UnboundCompositeDef
</span><a href="#local-6989586621679787281"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-687"></span><span>                    </span><span class="annot"><span class="annottext">UnboundCompositeDef -&gt; PrimarySpec
</span><a href="Database.Persist.Quasi.Internal.html#NaturalKey"><span class="hs-identifier hs-var">NaturalKey</span></a></span><span> </span><span class="annot"><span class="annottext">UnboundCompositeDef
</span><a href="#local-6989586621679787281"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-688"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe UnboundIdDef
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe UnboundCompositeDef
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-689"></span><span>                    </span><span class="annot"><span class="annottext">FieldNameDB -&gt; PrimarySpec
</span><a href="Database.Persist.Quasi.Internal.html#DefaultKey"><span class="hs-identifier hs-var">DefaultKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; FieldNameDB
</span><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-var">FieldNameDB</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; FieldNameDB) -&gt; Text -&gt; FieldNameDB
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PersistSettings -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psIdName"><span class="hs-identifier hs-var">psIdName</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787271"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-690"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundEntityFields :: [UnboundFieldDef]
</span><a href="Database.Persist.Quasi.Internal.html#unboundEntityFields"><span class="hs-identifier hs-var">unboundEntityFields</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-691"></span><span>            </span><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787282"><span class="hs-identifier hs-var">cols</span></a></span><span>
</span><span id="line-692"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundEntityDef :: EntityDef
</span><a href="Database.Persist.Quasi.Internal.html#unboundEntityDef"><span class="hs-identifier hs-var">unboundEntityDef</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-693"></span><span>            </span><span class="annot"><a href="Database.Persist.Types.Base.html#EntityDef"><span class="hs-identifier hs-type">EntityDef</span></a></span><span>
</span><span id="line-694"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">entityHaskell :: EntityNameHS
</span><a href="Database.Persist.Types.Base.html#entityHaskell"><span class="hs-identifier hs-var">entityHaskell</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787283"><span class="hs-identifier hs-var">entNameHS</span></a></span><span>
</span><span id="line-695"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">entityDB :: EntityNameDB
</span><a href="Database.Persist.Types.Base.html#entityDB"><span class="hs-identifier hs-var">entityDB</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EntityNameDB
</span><a href="#local-6989586621679787285"><span class="hs-identifier hs-var">entNameDB</span></a></span><span>
</span><span id="line-696"></span><span>                </span><span class="hs-comment">-- idField is the user-specified Id</span><span>
</span><span id="line-697"></span><span>                </span><span class="hs-comment">-- otherwise useAutoIdField</span><span>
</span><span id="line-698"></span><span>                </span><span class="hs-comment">-- but, adjust it if the user specified a Primary</span><span>
</span><span id="line-699"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">entityId :: EntityIdDef
</span><a href="Database.Persist.Types.Base.html#entityId"><span class="hs-identifier hs-var">entityId</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-700"></span><span>                    </span><span class="annot"><span class="annottext">FieldDef -&gt; EntityIdDef
</span><a href="Database.Persist.Types.Base.html#EntityIdField"><span class="hs-identifier hs-var">EntityIdField</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldDef -&gt; EntityIdDef) -&gt; FieldDef -&gt; EntityIdDef
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-701"></span><span>                    </span><span class="annot"><span class="annottext">FieldDef
-&gt; (UnboundIdDef -&gt; FieldDef) -&gt; Maybe UnboundIdDef -&gt; FieldDef
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787286"><span class="hs-identifier hs-var">autoIdField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldNameDB -&gt; EntityNameHS -&gt; UnboundIdDef -&gt; FieldDef
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdDefToFieldDef"><span class="hs-identifier hs-var">unboundIdDefToFieldDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PersistSettings -&gt; FieldNameDB
</span><a href="Database.Persist.Quasi.Internal.html#defaultIdName"><span class="hs-identifier hs-var">defaultIdName</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787271"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787283"><span class="hs-identifier hs-var">entNameHS</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe UnboundIdDef
</span><a href="#local-6989586621679787275"><span class="hs-identifier hs-var">idField</span></a></span><span>
</span><span id="line-702"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">entityAttrs :: [Text]
</span><a href="Database.Persist.Types.Base.html#entityAttrs"><span class="hs-identifier hs-var">entityAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-703"></span><span>                    </span><span class="annot"><span class="annottext">ParsedEntityDef -&gt; [Text]
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefEntityAttributes"><span class="hs-identifier hs-var">parsedEntityDefEntityAttributes</span></a></span><span> </span><span class="annot"><span class="annottext">ParsedEntityDef
</span><a href="#local-6989586621679787272"><span class="hs-identifier hs-var">parsedEntDef</span></a></span><span>
</span><span id="line-704"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">entityFields :: [FieldDef]
</span><a href="Database.Persist.Types.Base.html#entityFields"><span class="hs-identifier hs-var">entityFields</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-705"></span><span>                    </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-706"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">entityUniques :: [UniqueDef]
</span><a href="Database.Persist.Types.Base.html#entityUniques"><span class="hs-identifier hs-var">entityUniques</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; [UniqueDef]
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsUniquesList"><span class="hs-identifier hs-var">entityConstraintDefsUniquesList</span></a></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs
</span><a href="#local-6989586621679787274"><span class="hs-identifier hs-var">entityConstraintDefs</span></a></span><span>
</span><span id="line-707"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">entityForeigns :: [ForeignDef]
</span><a href="Database.Persist.Types.Base.html#entityForeigns"><span class="hs-identifier hs-var">entityForeigns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-708"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">entityDerives :: [Text]
</span><a href="Database.Persist.Types.Base.html#entityDerives"><span class="hs-identifier hs-var">entityDerives</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Text]] -&gt; [Text]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">([[Text]] -&gt; [Text]) -&gt; [[Text]] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Maybe [Text]) -&gt; [[Text]] -&gt; [[Text]]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Maybe [Text]
</span><a href="Database.Persist.Quasi.Internal.html#takeDerives"><span class="hs-identifier hs-var">takeDerives</span></a></span><span> </span><span class="annot"><span class="annottext">[[Text]]
</span><a href="#local-6989586621679787294"><span class="hs-identifier hs-var">textAttribs</span></a></span><span>
</span><span id="line-709"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">entityExtra :: Map Text [[Text]]
</span><a href="Database.Persist.Types.Base.html#entityExtra"><span class="hs-identifier hs-var">entityExtra</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParsedEntityDef -&gt; Map Text [[Text]]
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefExtras"><span class="hs-identifier hs-var">parsedEntityDefExtras</span></a></span><span> </span><span class="annot"><span class="annottext">ParsedEntityDef
</span><a href="#local-6989586621679787272"><span class="hs-identifier hs-var">parsedEntDef</span></a></span><span>
</span><span id="line-710"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">entitySum :: Bool
</span><a href="Database.Persist.Types.Base.html#entitySum"><span class="hs-identifier hs-var">entitySum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParsedEntityDef -&gt; Bool
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefIsSum"><span class="hs-identifier hs-var">parsedEntityDefIsSum</span></a></span><span> </span><span class="annot"><span class="annottext">ParsedEntityDef
</span><a href="#local-6989586621679787272"><span class="hs-identifier hs-var">parsedEntDef</span></a></span><span>
</span><span id="line-711"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">entityComments :: Maybe Text
</span><a href="Database.Persist.Types.Base.html#entityComments"><span class="hs-identifier hs-var">entityComments</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-712"></span><span>                    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ParsedEntityDef -&gt; [Text]
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefComments"><span class="hs-identifier hs-var">parsedEntityDefComments</span></a></span><span> </span><span class="annot"><span class="annottext">ParsedEntityDef
</span><a href="#local-6989586621679787272"><span class="hs-identifier hs-var">parsedEntDef</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-713"></span><span>                        </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-714"></span><span>                        </span><span id="local-6989586621679787298"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787298"><span class="hs-identifier hs-var">comments</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.unlines</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787298"><span class="hs-identifier hs-var">comments</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-715"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-716"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-717"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-718"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679787283"><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787283"><span class="hs-identifier hs-var">entNameHS</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787285"><span class="annot"><span class="annottext">EntityNameDB
</span><a href="#local-6989586621679787285"><span class="hs-identifier hs-var">entNameDB</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-719"></span><span>        </span><span class="annot"><span class="annottext">PersistSettings -&gt; ParsedEntityDef -&gt; (EntityNameHS, EntityNameDB)
</span><a href="Database.Persist.Quasi.Internal.html#entityNamesFromParsedDef"><span class="hs-identifier hs-var">entityNamesFromParsedDef</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787271"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">ParsedEntityDef
</span><a href="#local-6989586621679787272"><span class="hs-identifier hs-var">parsedEntDef</span></a></span><span>
</span><span id="line-720"></span><span>
</span><span id="line-721"></span><span>    </span><span id="local-6989586621679787300"><span class="annot"><span class="annottext">attribs :: [[Token]]
</span><a href="#local-6989586621679787300"><span class="hs-identifier hs-var hs-var">attribs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-722"></span><span>        </span><span class="annot"><span class="annottext">ParsedEntityDef -&gt; [[Token]]
</span><a href="Database.Persist.Quasi.Internal.html#parsedEntityDefFieldAttributes"><span class="hs-identifier hs-var">parsedEntityDefFieldAttributes</span></a></span><span> </span><span class="annot"><span class="annottext">ParsedEntityDef
</span><a href="#local-6989586621679787272"><span class="hs-identifier hs-var">parsedEntDef</span></a></span><span>
</span><span id="line-723"></span><span>
</span><span id="line-724"></span><span>    </span><span class="annot"><a href="#local-6989586621679787294"><span class="hs-identifier hs-type">textAttribs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-725"></span><span>    </span><span id="local-6989586621679787294"><span class="annot"><span class="annottext">textAttribs :: [[Text]]
</span><a href="#local-6989586621679787294"><span class="hs-identifier hs-var hs-var">textAttribs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-726"></span><span>        </span><span class="annot"><span class="annottext">(Token -&gt; Text) -&gt; [Token] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Token -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#tokenText"><span class="hs-identifier hs-var">tokenText</span></a></span><span> </span><span class="annot"><span class="annottext">([Token] -&gt; [Text]) -&gt; [[Token]] -&gt; [[Text]]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[[Token]]
</span><a href="#local-6989586621679787300"><span class="hs-identifier hs-var">attribs</span></a></span><span>
</span><span id="line-727"></span><span>
</span><span id="line-728"></span><span>    </span><span id="local-6989586621679787274"><span class="annot"><span class="annottext">entityConstraintDefs :: EntityConstraintDefs
</span><a href="#local-6989586621679787274"><span class="hs-identifier hs-var hs-var">entityConstraintDefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-729"></span><span>        </span><span class="annot"><span class="annottext">([Text] -&gt; EntityConstraintDefs)
-&gt; [[Text]] -&gt; EntityConstraintDefs
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; [a] -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityConstraintDefs
-&gt; (NonEmpty Text -&gt; EntityConstraintDefs)
-&gt; Maybe (NonEmpty Text)
-&gt; EntityConstraintDefs
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PersistSettings
-&gt; EntityNameHS
-&gt; [UnboundFieldDef]
-&gt; NonEmpty Text
-&gt; EntityConstraintDefs
</span><a href="Database.Persist.Quasi.Internal.html#takeConstraint"><span class="hs-identifier hs-var">takeConstraint</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787271"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787283"><span class="hs-identifier hs-var">entNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787282"><span class="hs-identifier hs-var">cols</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (NonEmpty Text) -&gt; EntityConstraintDefs)
-&gt; ([Text] -&gt; Maybe (NonEmpty Text))
-&gt; [Text]
-&gt; EntityConstraintDefs
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Maybe (NonEmpty Text)
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NEL.nonEmpty</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[Text]]
</span><a href="#local-6989586621679787294"><span class="hs-identifier hs-var">textAttribs</span></a></span><span>
</span><span id="line-730"></span><span>
</span><span id="line-731"></span><span>    </span><span id="local-6989586621679787275"><span class="annot"><span class="annottext">idField :: Maybe UnboundIdDef
</span><a href="#local-6989586621679787275"><span class="hs-identifier hs-var hs-var">idField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-732"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; SetOnceAtMost UnboundIdDef
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsIdField"><span class="hs-identifier hs-var">entityConstraintDefsIdField</span></a></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs
</span><a href="#local-6989586621679787274"><span class="hs-identifier hs-var">entityConstraintDefs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-733"></span><span>            </span><span class="annot"><span class="annottext">SetOnceAtMost UnboundIdDef
</span><a href="Database.Persist.Quasi.Internal.html#SetMoreThanOnce"><span class="hs-identifier hs-var">SetMoreThanOnce</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Maybe UnboundIdDef
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;expected only one Id declaration per entity&quot;</span></span><span>
</span><span id="line-734"></span><span>            </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#SetOnce"><span class="hs-identifier hs-type">SetOnce</span></a></span><span> </span><span id="local-6989586621679787306"><span class="annot"><span class="annottext">UnboundIdDef
</span><a href="#local-6989586621679787306"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnboundIdDef -&gt; Maybe UnboundIdDef
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">UnboundIdDef
</span><a href="#local-6989586621679787306"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-735"></span><span>            </span><span class="annot"><span class="annottext">SetOnceAtMost UnboundIdDef
</span><a href="Database.Persist.Quasi.Internal.html#NotSet"><span class="hs-identifier hs-var">NotSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe UnboundIdDef
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-736"></span><span>
</span><span id="line-737"></span><span>    </span><span id="local-6989586621679787276"><span class="annot"><span class="annottext">primaryComposite :: Maybe UnboundCompositeDef
</span><a href="#local-6989586621679787276"><span class="hs-identifier hs-var hs-var">primaryComposite</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-738"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; SetOnceAtMost UnboundCompositeDef
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsPrimaryComposite"><span class="hs-identifier hs-var">entityConstraintDefsPrimaryComposite</span></a></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs
</span><a href="#local-6989586621679787274"><span class="hs-identifier hs-var">entityConstraintDefs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-739"></span><span>            </span><span class="annot"><span class="annottext">SetOnceAtMost UnboundCompositeDef
</span><a href="Database.Persist.Quasi.Internal.html#SetMoreThanOnce"><span class="hs-identifier hs-var">SetMoreThanOnce</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Maybe UnboundCompositeDef
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;expected only one Primary declaration per entity&quot;</span></span><span>
</span><span id="line-740"></span><span>            </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#SetOnce"><span class="hs-identifier hs-type">SetOnce</span></a></span><span> </span><span id="local-6989586621679787309"><span class="annot"><span class="annottext">UnboundCompositeDef
</span><a href="#local-6989586621679787309"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnboundCompositeDef -&gt; Maybe UnboundCompositeDef
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">UnboundCompositeDef
</span><a href="#local-6989586621679787309"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-741"></span><span>            </span><span class="annot"><span class="annottext">SetOnceAtMost UnboundCompositeDef
</span><a href="Database.Persist.Quasi.Internal.html#NotSet"><span class="hs-identifier hs-var">NotSet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe UnboundCompositeDef
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-742"></span><span>
</span><span id="line-743"></span><span>    </span><span class="annot"><a href="#local-6989586621679787282"><span class="hs-identifier hs-type">cols</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-744"></span><span>    </span><span id="local-6989586621679787282"><span class="annot"><span class="annottext">cols :: [UnboundFieldDef]
</span><a href="#local-6989586621679787282"><span class="hs-identifier hs-var hs-var">cols</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[UnboundFieldDef] -&gt; [UnboundFieldDef]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">([UnboundFieldDef] -&gt; [UnboundFieldDef])
-&gt; ([[Token]] -&gt; [UnboundFieldDef])
-&gt; [[Token]]
-&gt; [UnboundFieldDef]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">([UnboundFieldDef], [Text]) -&gt; [UnboundFieldDef]
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(([UnboundFieldDef], [Text]) -&gt; [UnboundFieldDef])
-&gt; ([[Token]] -&gt; ([UnboundFieldDef], [Text]))
-&gt; [[Token]]
-&gt; [UnboundFieldDef]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">([Token]
 -&gt; ([UnboundFieldDef], [Text]) -&gt; ([UnboundFieldDef], [Text]))
-&gt; ([UnboundFieldDef], [Text])
-&gt; [[Token]]
-&gt; ([UnboundFieldDef], [Text])
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PersistSettings
-&gt; [Token]
-&gt; ([UnboundFieldDef], [Text])
-&gt; ([UnboundFieldDef], [Text])
</span><a href="Database.Persist.Quasi.Internal.html#associateComments"><span class="hs-identifier hs-var">associateComments</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787271"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([[Token]] -&gt; [UnboundFieldDef]) -&gt; [[Token]] -&gt; [UnboundFieldDef]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[[Token]] -&gt; [[Token]]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[[Token]]
</span><a href="#local-6989586621679787300"><span class="hs-identifier hs-var">attribs</span></a></span><span>
</span><span id="line-745"></span><span>
</span><span id="line-746"></span><span>    </span><span class="annot"><a href="#local-6989586621679787286"><span class="hs-identifier hs-type">autoIdField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span>
</span><span id="line-747"></span><span>    </span><span id="local-6989586621679787286"><span class="annot"><span class="annottext">autoIdField :: FieldDef
</span><a href="#local-6989586621679787286"><span class="hs-identifier hs-var hs-var">autoIdField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-748"></span><span>        </span><span class="annot"><span class="annottext">PersistSettings -&gt; EntityNameHS -&gt; SqlType -&gt; FieldDef
</span><a href="Database.Persist.Quasi.Internal.html#mkAutoIdField"><span class="hs-identifier hs-var">mkAutoIdField</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787271"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787283"><span class="hs-identifier hs-var">entNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">SqlType
</span><a href="#local-6989586621679787314"><span class="hs-identifier hs-var">idSqlType</span></a></span><span>
</span><span id="line-749"></span><span>
</span><span id="line-750"></span><span>    </span><span class="annot"><a href="#local-6989586621679787314"><span class="hs-identifier hs-type">idSqlType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#SqlType"><span class="hs-identifier hs-type">SqlType</span></a></span><span>
</span><span id="line-751"></span><span>    </span><span id="local-6989586621679787314"><span class="annot"><span class="annottext">idSqlType :: SqlType
</span><a href="#local-6989586621679787314"><span class="hs-identifier hs-var hs-var">idSqlType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-752"></span><span>        </span><span class="annot"><span class="annottext">SqlType
-&gt; (UnboundCompositeDef -&gt; SqlType)
-&gt; Maybe UnboundCompositeDef
-&gt; SqlType
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">SqlType
</span><a href="Database.Persist.Types.Base.html#SqlInt64"><span class="hs-identifier hs-var">SqlInt64</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SqlType -&gt; UnboundCompositeDef -&gt; SqlType
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(SqlType -&gt; UnboundCompositeDef -&gt; SqlType)
-&gt; SqlType -&gt; UnboundCompositeDef -&gt; SqlType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; SqlType
</span><a href="Database.Persist.Types.Base.html#SqlOther"><span class="hs-identifier hs-var">SqlOther</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Primary Key&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe UnboundCompositeDef
</span><a href="#local-6989586621679787276"><span class="hs-identifier hs-var">primaryComposite</span></a></span><span>
</span><span id="line-753"></span><span>
</span><span id="line-754"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#defaultIdName"><span class="hs-identifier hs-type">defaultIdName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-type">FieldNameDB</span></a></span><span>
</span><span id="line-755"></span><span id="defaultIdName"><span class="annot"><span class="annottext">defaultIdName :: PersistSettings -&gt; FieldNameDB
</span><a href="Database.Persist.Quasi.Internal.html#defaultIdName"><span class="hs-identifier hs-var hs-var">defaultIdName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; FieldNameDB
</span><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-var">FieldNameDB</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; FieldNameDB)
-&gt; (PersistSettings -&gt; Text) -&gt; PersistSettings -&gt; FieldNameDB
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PersistSettings -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psIdName"><span class="hs-identifier hs-var">psIdName</span></a></span><span>
</span><span id="line-756"></span><span>
</span><span id="line-757"></span><span class="hs-comment">-- | Convert an 'UnboundIdDef' into a 'FieldDef' suitable for use in the</span><span>
</span><span id="line-758"></span><span class="hs-comment">-- 'EntityIdField' constructor.</span><span>
</span><span id="line-759"></span><span class="hs-comment">--</span><span>
</span><span id="line-760"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-761"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#unboundIdDefToFieldDef"><span class="hs-identifier hs-type">unboundIdDefToFieldDef</span></a></span><span>
</span><span id="line-762"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-type">FieldNameDB</span></a></span><span>
</span><span id="line-763"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span>
</span><span id="line-764"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundIdDef"><span class="hs-identifier hs-type">UnboundIdDef</span></a></span><span>
</span><span id="line-765"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span>
</span><span id="line-766"></span><span id="unboundIdDefToFieldDef"><span class="annot"><span class="annottext">unboundIdDefToFieldDef :: FieldNameDB -&gt; EntityNameHS -&gt; UnboundIdDef -&gt; FieldDef
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdDefToFieldDef"><span class="hs-identifier hs-var hs-var">unboundIdDefToFieldDef</span></a></span></span><span> </span><span id="local-6989586621679787319"><span class="annot"><span class="annottext">FieldNameDB
</span><a href="#local-6989586621679787319"><span class="hs-identifier hs-var">dbField</span></a></span></span><span> </span><span id="local-6989586621679787320"><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787320"><span class="hs-identifier hs-var">entNameHS</span></a></span></span><span> </span><span id="local-6989586621679787321"><span class="annot"><span class="annottext">UnboundIdDef
</span><a href="#local-6989586621679787321"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-767"></span><span>    </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span>
</span><span id="line-768"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fieldHaskell :: FieldNameHS
</span><a href="Database.Persist.Types.Base.html#fieldHaskell"><span class="hs-identifier hs-var">fieldHaskell</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-769"></span><span>            </span><span class="annot"><span class="annottext">Text -&gt; FieldNameHS
</span><a href="Database.Persist.Names.html#FieldNameHS"><span class="hs-identifier hs-var">FieldNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Id&quot;</span></span><span>
</span><span id="line-770"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldDB :: FieldNameDB
</span><a href="Database.Persist.Types.Base.html#fieldDB"><span class="hs-identifier hs-var">fieldDB</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-771"></span><span>            </span><span class="annot"><span class="annottext">FieldNameDB -&gt; [FieldAttr] -&gt; FieldNameDB
</span><a href="Database.Persist.Quasi.Internal.html#getSqlNameOr"><span class="hs-identifier hs-var">getSqlNameOr</span></a></span><span> </span><span class="annot"><span class="annottext">FieldNameDB
</span><a href="#local-6989586621679787319"><span class="hs-identifier hs-var">dbField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnboundIdDef -&gt; [FieldAttr]
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdAttrs"><span class="hs-identifier hs-var">unboundIdAttrs</span></a></span><span> </span><span class="annot"><span class="annottext">UnboundIdDef
</span><a href="#local-6989586621679787321"><span class="hs-identifier hs-var">uid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-772"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldType :: FieldType
</span><a href="Database.Persist.Types.Base.html#fieldType"><span class="hs-identifier hs-var">fieldType</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-773"></span><span>            </span><span class="annot"><span class="annottext">FieldType -&gt; Maybe FieldType -&gt; FieldType
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityNameHS -&gt; FieldType
</span><a href="Database.Persist.Quasi.Internal.html#mkKeyConType"><span class="hs-identifier hs-var">mkKeyConType</span></a></span><span> </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787320"><span class="hs-identifier hs-var">entNameHS</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe FieldType -&gt; FieldType) -&gt; Maybe FieldType -&gt; FieldType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">UnboundIdDef -&gt; Maybe FieldType
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdType"><span class="hs-identifier hs-var">unboundIdType</span></a></span><span> </span><span class="annot"><span class="annottext">UnboundIdDef
</span><a href="#local-6989586621679787321"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-774"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldSqlType :: SqlType
</span><a href="Database.Persist.Types.Base.html#fieldSqlType"><span class="hs-identifier hs-var">fieldSqlType</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-775"></span><span>            </span><span class="annot"><span class="annottext">Text -&gt; SqlType
</span><a href="Database.Persist.Types.Base.html#SqlOther"><span class="hs-identifier hs-var">SqlOther</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;SqlType unset for Id&quot;</span></span><span>
</span><span id="line-776"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldStrict :: Bool
</span><a href="Database.Persist.Types.Base.html#fieldStrict"><span class="hs-identifier hs-var">fieldStrict</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-777"></span><span>            </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-778"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldReference :: ReferenceDef
</span><a href="Database.Persist.Types.Base.html#fieldReference"><span class="hs-identifier hs-var">fieldReference</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-779"></span><span>            </span><span class="annot"><span class="annottext">EntityNameHS -&gt; ReferenceDef
</span><a href="Database.Persist.Types.Base.html#ForeignRef"><span class="hs-identifier hs-var">ForeignRef</span></a></span><span> </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787320"><span class="hs-identifier hs-var">entNameHS</span></a></span><span>
</span><span id="line-780"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldAttrs :: [FieldAttr]
</span><a href="Database.Persist.Types.Base.html#fieldAttrs"><span class="hs-identifier hs-var">fieldAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-781"></span><span>            </span><span class="annot"><span class="annottext">UnboundIdDef -&gt; [FieldAttr]
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdAttrs"><span class="hs-identifier hs-var">unboundIdAttrs</span></a></span><span> </span><span class="annot"><span class="annottext">UnboundIdDef
</span><a href="#local-6989586621679787321"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-782"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldComments :: Maybe Text
</span><a href="Database.Persist.Types.Base.html#fieldComments"><span class="hs-identifier hs-var">fieldComments</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-783"></span><span>            </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-784"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldCascade :: FieldCascade
</span><a href="Database.Persist.Types.Base.html#fieldCascade"><span class="hs-identifier hs-var">fieldCascade</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnboundIdDef -&gt; FieldCascade
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdCascade"><span class="hs-identifier hs-var">unboundIdCascade</span></a></span><span> </span><span class="annot"><span class="annottext">UnboundIdDef
</span><a href="#local-6989586621679787321"><span class="hs-identifier hs-var">uid</span></a></span><span>
</span><span id="line-785"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldGenerated :: Maybe Text
</span><a href="Database.Persist.Types.Base.html#fieldGenerated"><span class="hs-identifier hs-var">fieldGenerated</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-786"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldIsImplicitIdColumn :: Bool
</span><a href="Database.Persist.Types.Base.html#fieldIsImplicitIdColumn"><span class="hs-identifier hs-var">fieldIsImplicitIdColumn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-787"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-788"></span><span>
</span><span id="line-789"></span><span class="hs-comment">-- | Convert an 'EntityNameHS' into 'FieldType' that will get parsed into the ID</span><span>
</span><span id="line-790"></span><span class="hs-comment">-- type for the entity.</span><span>
</span><span id="line-791"></span><span class="hs-comment">--</span><span>
</span><span id="line-792"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-793"></span><span class="hs-comment">-- &gt;&gt;&gt; mkKeyConType (EntityNameHS &quot;Hello)</span><span>
</span><span id="line-794"></span><span class="hs-comment">-- FTTypeCon Nothing &quot;HelloId&quot;</span><span>
</span><span id="line-795"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-796"></span><span class="hs-comment">--</span><span>
</span><span id="line-797"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-798"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#mkKeyConType"><span class="hs-identifier hs-type">mkKeyConType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span>
</span><span id="line-799"></span><span id="mkKeyConType"><span class="annot"><span class="annottext">mkKeyConType :: EntityNameHS -&gt; FieldType
</span><a href="Database.Persist.Quasi.Internal.html#mkKeyConType"><span class="hs-identifier hs-var hs-var">mkKeyConType</span></a></span></span><span> </span><span id="local-6989586621679787329"><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787329"><span class="hs-identifier hs-var">entNameHs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-800"></span><span>    </span><span class="annot"><span class="annottext">Maybe Text -&gt; Text -&gt; FieldType
</span><a href="Database.Persist.Types.Base.html#FTTypeCon"><span class="hs-identifier hs-var">FTTypeCon</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityNameHS -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#keyConName"><span class="hs-identifier hs-var">keyConName</span></a></span><span> </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787329"><span class="hs-identifier hs-var">entNameHs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-801"></span><span>
</span><span id="line-802"></span><span class="hs-comment">-- | Assuming that the provided 'FieldDef' is an ID field, this converts it into</span><span>
</span><span id="line-803"></span><span class="hs-comment">-- an 'UnboundIdDef'.</span><span>
</span><span id="line-804"></span><span class="hs-comment">--</span><span>
</span><span id="line-805"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-806"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#unbindIdDef"><span class="hs-identifier hs-type">unbindIdDef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundIdDef"><span class="hs-identifier hs-type">UnboundIdDef</span></a></span><span>
</span><span id="line-807"></span><span id="unbindIdDef"><span class="annot"><span class="annottext">unbindIdDef :: EntityNameHS -&gt; FieldDef -&gt; UnboundIdDef
</span><a href="Database.Persist.Quasi.Internal.html#unbindIdDef"><span class="hs-identifier hs-var hs-var">unbindIdDef</span></a></span></span><span> </span><span id="local-6989586621679787331"><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787331"><span class="hs-identifier hs-var">entityName</span></a></span></span><span> </span><span id="local-6989586621679787332"><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787332"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-808"></span><span>    </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundIdDef"><span class="hs-identifier hs-type">UnboundIdDef</span></a></span><span>
</span><span id="line-809"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">unboundIdEntityName :: EntityNameHS
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdEntityName"><span class="hs-identifier hs-var">unboundIdEntityName</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-810"></span><span>            </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787331"><span class="hs-identifier hs-var">entityName</span></a></span><span>
</span><span id="line-811"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundIdDBName :: FieldNameDB
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdDBName"><span class="hs-identifier hs-var">unboundIdDBName</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-812"></span><span>            </span><span class="annot"><span class="annottext">FieldDef -&gt; FieldNameDB
</span><a href="Database.Persist.Types.Base.html#fieldDB"><span class="hs-identifier hs-var">fieldDB</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787332"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-813"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundIdAttrs :: [FieldAttr]
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdAttrs"><span class="hs-identifier hs-var">unboundIdAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-814"></span><span>            </span><span class="annot"><span class="annottext">FieldDef -&gt; [FieldAttr]
</span><a href="Database.Persist.Types.Base.html#fieldAttrs"><span class="hs-identifier hs-var">fieldAttrs</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787332"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-815"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundIdCascade :: FieldCascade
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdCascade"><span class="hs-identifier hs-var">unboundIdCascade</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-816"></span><span>            </span><span class="annot"><span class="annottext">FieldDef -&gt; FieldCascade
</span><a href="Database.Persist.Types.Base.html#fieldCascade"><span class="hs-identifier hs-var">fieldCascade</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787332"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-817"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundIdType :: Maybe FieldType
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdType"><span class="hs-identifier hs-var">unboundIdType</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-818"></span><span>            </span><span class="annot"><span class="annottext">FieldType -&gt; Maybe FieldType
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(FieldType -&gt; Maybe FieldType) -&gt; FieldType -&gt; Maybe FieldType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldDef -&gt; FieldType
</span><a href="Database.Persist.Types.Base.html#fieldType"><span class="hs-identifier hs-var">fieldType</span></a></span><span> </span><span class="annot"><span class="annottext">FieldDef
</span><a href="#local-6989586621679787332"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-819"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-820"></span><span>
</span><span id="line-821"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#associateComments"><span class="hs-identifier hs-type">associateComments</span></a></span><span>
</span><span id="line-822"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span>
</span><span id="line-823"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-824"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-825"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-826"></span><span id="associateComments"><span class="annot"><span class="annottext">associateComments :: PersistSettings
-&gt; [Token]
-&gt; ([UnboundFieldDef], [Text])
-&gt; ([UnboundFieldDef], [Text])
</span><a href="Database.Persist.Quasi.Internal.html#associateComments"><span class="hs-identifier hs-var hs-var">associateComments</span></a></span></span><span> </span><span id="local-6989586621679787334"><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787334"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679787335"><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679787335"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">!</span><span id="local-6989586621679787336"><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787336"><span class="hs-identifier hs-var">acc</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679787337"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787337"><span class="hs-identifier hs-var">comments</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-827"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Token] -&gt; Maybe Token
forall a. [a] -&gt; Maybe a
</span><span class="hs-identifier hs-var">listToMaybe</span></span><span> </span><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679787335"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-828"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#DocComment"><span class="hs-identifier hs-type">DocComment</span></a></span><span> </span><span id="local-6989586621679787338"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787338"><span class="hs-identifier hs-var">comment</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-829"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787336"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787338"><span class="hs-identifier hs-var">comment</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787337"><span class="hs-identifier hs-var">comments</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-830"></span><span>        </span><span class="annot"><span class="annottext">Maybe Token
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-831"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; UnboundFieldDef -&gt; UnboundFieldDef
</span><a href="Database.Persist.Quasi.Internal.html#setFieldComments"><span class="hs-identifier hs-var">setFieldComments</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787337"><span class="hs-identifier hs-var">comments</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(UnboundFieldDef -&gt; UnboundFieldDef)
-&gt; Maybe UnboundFieldDef -&gt; Maybe UnboundFieldDef
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PersistSettings -&gt; [Text] -&gt; Maybe UnboundFieldDef
</span><a href="Database.Persist.Quasi.Internal.html#takeColsEx"><span class="hs-identifier hs-var">takeColsEx</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787334"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Token -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#tokenText"><span class="hs-identifier hs-var">tokenText</span></a></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Text) -&gt; [Token] -&gt; [Text]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679787335"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-832"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679787340"><span class="annot"><span class="annottext">UnboundFieldDef
</span><a href="#local-6989586621679787340"><span class="hs-identifier hs-var">sm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-833"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnboundFieldDef
</span><a href="#local-6989586621679787340"><span class="hs-identifier hs-var">sm</span></a></span><span> </span><span class="annot"><span class="annottext">UnboundFieldDef -&gt; [UnboundFieldDef] -&gt; [UnboundFieldDef]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787336"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-834"></span><span>              </span><span class="annot"><span class="annottext">Maybe UnboundFieldDef
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-835"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787336"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-836"></span><span>
</span><span id="line-837"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#setFieldComments"><span class="hs-identifier hs-type">setFieldComments</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span>
</span><span id="line-838"></span><span id="setFieldComments"><span class="annot"><span class="annottext">setFieldComments :: [Text] -&gt; UnboundFieldDef -&gt; UnboundFieldDef
</span><a href="Database.Persist.Quasi.Internal.html#setFieldComments"><span class="hs-identifier hs-var hs-var">setFieldComments</span></a></span></span><span> </span><span id="local-6989586621679787341"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787341"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621679787342"><span class="annot"><span class="annottext">UnboundFieldDef
</span><a href="#local-6989586621679787342"><span class="hs-identifier hs-var">fld</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-839"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787341"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-840"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnboundFieldDef
</span><a href="#local-6989586621679787342"><span class="hs-identifier hs-var">fld</span></a></span><span>
</span><span id="line-841"></span><span>        </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnboundFieldDef
</span><a href="#local-6989586621679787342"><span class="hs-identifier hs-var">fld</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#unboundFieldComments"><span class="hs-identifier hs-var">unboundFieldComments</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">T.unlines</span></span><span> </span><span class="annot"><a href="#local-6989586621679787341"><span class="hs-identifier hs-type">xs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-842"></span><span>
</span><span id="line-843"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#mkAutoIdField"><span class="hs-identifier hs-type">mkAutoIdField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#SqlType"><span class="hs-identifier hs-type">SqlType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span>
</span><span id="line-844"></span><span id="mkAutoIdField"><span class="annot"><span class="annottext">mkAutoIdField :: PersistSettings -&gt; EntityNameHS -&gt; SqlType -&gt; FieldDef
</span><a href="Database.Persist.Quasi.Internal.html#mkAutoIdField"><span class="hs-identifier hs-var hs-var">mkAutoIdField</span></a></span></span><span> </span><span id="local-6989586621679787343"><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787343"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-845"></span><span>    </span><span class="annot"><span class="annottext">FieldNameDB -&gt; EntityNameHS -&gt; SqlType -&gt; FieldDef
</span><a href="Database.Persist.Quasi.Internal.html#mkAutoIdField%27"><span class="hs-identifier hs-var">mkAutoIdField'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; FieldNameDB
</span><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-var">FieldNameDB</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; FieldNameDB) -&gt; Text -&gt; FieldNameDB
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PersistSettings -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psIdName"><span class="hs-identifier hs-var">psIdName</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787343"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-846"></span><span>
</span><span id="line-847"></span><span class="hs-comment">-- | Creates a default ID field.</span><span>
</span><span id="line-848"></span><span class="hs-comment">--</span><span>
</span><span id="line-849"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-850"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#mkAutoIdField%27"><span class="hs-identifier hs-type">mkAutoIdField'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-type">FieldNameDB</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#SqlType"><span class="hs-identifier hs-type">SqlType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span>
</span><span id="line-851"></span><span id="mkAutoIdField%27"><span class="annot"><span class="annottext">mkAutoIdField' :: FieldNameDB -&gt; EntityNameHS -&gt; SqlType -&gt; FieldDef
</span><a href="Database.Persist.Quasi.Internal.html#mkAutoIdField%27"><span class="hs-identifier hs-var hs-var">mkAutoIdField'</span></a></span></span><span> </span><span id="local-6989586621679787344"><span class="annot"><span class="annottext">FieldNameDB
</span><a href="#local-6989586621679787344"><span class="hs-identifier hs-var">dbName</span></a></span></span><span> </span><span id="local-6989586621679787345"><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787345"><span class="hs-identifier hs-var">entName</span></a></span></span><span> </span><span id="local-6989586621679787346"><span class="annot"><span class="annottext">SqlType
</span><a href="#local-6989586621679787346"><span class="hs-identifier hs-var">idSqlType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-852"></span><span>    </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldDef"><span class="hs-identifier hs-type">FieldDef</span></a></span><span>
</span><span id="line-853"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fieldHaskell :: FieldNameHS
</span><a href="Database.Persist.Types.Base.html#fieldHaskell"><span class="hs-identifier hs-var">fieldHaskell</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; FieldNameHS
</span><a href="Database.Persist.Names.html#FieldNameHS"><span class="hs-identifier hs-var">FieldNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Id&quot;</span></span><span>
</span><span id="line-854"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldDB :: FieldNameDB
</span><a href="Database.Persist.Types.Base.html#fieldDB"><span class="hs-identifier hs-var">fieldDB</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldNameDB
</span><a href="#local-6989586621679787344"><span class="hs-identifier hs-var">dbName</span></a></span><span>
</span><span id="line-855"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldType :: FieldType
</span><a href="Database.Persist.Types.Base.html#fieldType"><span class="hs-identifier hs-var">fieldType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; Text -&gt; FieldType
</span><a href="Database.Persist.Types.Base.html#FTTypeCon"><span class="hs-identifier hs-var">FTTypeCon</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; FieldType) -&gt; Text -&gt; FieldType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EntityNameHS -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#keyConName"><span class="hs-identifier hs-var">keyConName</span></a></span><span> </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787345"><span class="hs-identifier hs-var">entName</span></a></span><span>
</span><span id="line-856"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldSqlType :: SqlType
</span><a href="Database.Persist.Types.Base.html#fieldSqlType"><span class="hs-identifier hs-var">fieldSqlType</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SqlType
</span><a href="#local-6989586621679787346"><span class="hs-identifier hs-var">idSqlType</span></a></span><span>
</span><span id="line-857"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldReference :: ReferenceDef
</span><a href="Database.Persist.Types.Base.html#fieldReference"><span class="hs-identifier hs-var">fieldReference</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-858"></span><span>            </span><span class="annot"><span class="annottext">ReferenceDef
</span><a href="Database.Persist.Types.Base.html#NoReference"><span class="hs-identifier hs-var">NoReference</span></a></span><span>
</span><span id="line-859"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldAttrs :: [FieldAttr]
</span><a href="Database.Persist.Types.Base.html#fieldAttrs"><span class="hs-identifier hs-var">fieldAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-860"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldStrict :: Bool
</span><a href="Database.Persist.Types.Base.html#fieldStrict"><span class="hs-identifier hs-var">fieldStrict</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-861"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldComments :: Maybe Text
</span><a href="Database.Persist.Types.Base.html#fieldComments"><span class="hs-identifier hs-var">fieldComments</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-862"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldCascade :: FieldCascade
</span><a href="Database.Persist.Types.Base.html#fieldCascade"><span class="hs-identifier hs-var">fieldCascade</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldCascade
</span><a href="Database.Persist.Types.Base.html#noCascade"><span class="hs-identifier hs-var">noCascade</span></a></span><span>
</span><span id="line-863"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldGenerated :: Maybe Text
</span><a href="Database.Persist.Types.Base.html#fieldGenerated"><span class="hs-identifier hs-var">fieldGenerated</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-864"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fieldIsImplicitIdColumn :: Bool
</span><a href="Database.Persist.Types.Base.html#fieldIsImplicitIdColumn"><span class="hs-identifier hs-var">fieldIsImplicitIdColumn</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-865"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-866"></span><span>
</span><span id="line-867"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#keyConName"><span class="hs-identifier hs-type">keyConName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-868"></span><span id="keyConName"><span class="annot"><span class="annottext">keyConName :: EntityNameHS -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#keyConName"><span class="hs-identifier hs-var hs-var">keyConName</span></a></span></span><span> </span><span id="local-6989586621679787349"><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787349"><span class="hs-identifier hs-var">entName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EntityNameHS -&gt; Text
</span><a href="Database.Persist.Names.html#unEntityNameHS"><span class="hs-identifier hs-var">unEntityNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787349"><span class="hs-identifier hs-var">entName</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mappend`</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Id&quot;</span></span><span>
</span><span id="line-869"></span><span>
</span><span id="line-870"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#parseEntityFields"><span class="hs-identifier hs-type">parseEntityFields</span></a></span><span>
</span><span id="line-871"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Line"><span class="hs-identifier hs-type">Line</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-872"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Types.Base.html#ExtraLine"><span class="hs-identifier hs-type">ExtraLine</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-873"></span><span id="parseEntityFields"><span class="annot"><span class="annottext">parseEntityFields :: [Line] -&gt; ([[Token]], Map Text [[Text]])
</span><a href="Database.Persist.Quasi.Internal.html#parseEntityFields"><span class="hs-identifier hs-var hs-var">parseEntityFields</span></a></span></span><span> </span><span id="local-6989586621679787350"><span class="annot"><span class="annottext">[Line]
</span><a href="#local-6989586621679787350"><span class="hs-identifier hs-var">lns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-874"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Line]
</span><a href="#local-6989586621679787350"><span class="hs-identifier hs-var">lns</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-875"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map Text [[Text]]
forall k a. Map k a
</span><span class="hs-identifier hs-var">M.empty</span></span><span class="hs-special">)</span><span>
</span><span id="line-876"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679787352"><span class="annot"><span class="annottext">Line
</span><a href="#local-6989586621679787352"><span class="hs-identifier hs-var">line</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679787353"><span class="annot"><span class="annottext">[Line]
</span><a href="#local-6989586621679787353"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-877"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NonEmpty Token -&gt; [Token]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NEL.toList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Line -&gt; NonEmpty Token
</span><a href="Database.Persist.Quasi.Internal.html#tokens"><span class="hs-identifier hs-var">tokens</span></a></span><span> </span><span class="annot"><span class="annottext">Line
</span><a href="#local-6989586621679787352"><span class="hs-identifier hs-var">line</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-878"></span><span>                </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span> </span><span id="local-6989586621679787354"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787354"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">]</span><span>
</span><span id="line-879"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><a href="Database.Persist.Quasi.Internal.html#isCapitalizedText"><span class="hs-identifier hs-var">isCapitalizedText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787354"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-880"></span><span>                    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787356"><span class="annot"><span class="annottext">[Line]
</span><a href="#local-6989586621679787356"><span class="hs-identifier hs-var">children</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787357"><span class="annot"><span class="annottext">[Line]
</span><a href="#local-6989586621679787357"><span class="hs-identifier hs-var">rest'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Line -&gt; Bool) -&gt; [Line] -&gt; ([Line], [Line])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">span</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Line -&gt; Int
</span><a href="Database.Persist.Quasi.Internal.html#lineIndent"><span class="hs-identifier hs-var">lineIndent</span></a></span><span> </span><span class="annot"><span class="annottext">Line
</span><a href="#local-6989586621679787352"><span class="hs-identifier hs-var">line</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Bool) -&gt; (Line -&gt; Int) -&gt; Line -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Line -&gt; Int
</span><a href="Database.Persist.Quasi.Internal.html#lineIndent"><span class="hs-identifier hs-var">lineIndent</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Line]
</span><a href="#local-6989586621679787353"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-881"></span><span>                        </span><span class="hs-special">(</span><span id="local-6989586621679787359"><span class="annot"><span class="annottext">[[Token]]
</span><a href="#local-6989586621679787359"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787360"><span class="annot"><span class="annottext">Map Text [[Text]]
</span><a href="#local-6989586621679787360"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Line] -&gt; ([[Token]], Map Text [[Text]])
</span><a href="Database.Persist.Quasi.Internal.html#parseEntityFields"><span class="hs-identifier hs-var">parseEntityFields</span></a></span><span> </span><span class="annot"><span class="annottext">[Line]
</span><a href="#local-6989586621679787357"><span class="hs-identifier hs-var">rest'</span></a></span><span>
</span><span id="line-882"></span><span>                     </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[Token]]
</span><a href="#local-6989586621679787359"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [[Text]] -&gt; Map Text [[Text]] -&gt; Map Text [[Text]]
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insert</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787354"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty Text -&gt; [Text]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NEL.toList</span></span><span> </span><span class="annot"><span class="annottext">(NonEmpty Text -&gt; [Text])
-&gt; (Line -&gt; NonEmpty Text) -&gt; Line -&gt; [Text]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Line -&gt; NonEmpty Text
</span><a href="Database.Persist.Quasi.Internal.html#lineText"><span class="hs-identifier hs-var">lineText</span></a></span><span> </span><span class="annot"><span class="annottext">(Line -&gt; [Text]) -&gt; [Line] -&gt; [[Text]]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Line]
</span><a href="#local-6989586621679787356"><span class="hs-identifier hs-var">children</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Text [[Text]]
</span><a href="#local-6989586621679787360"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-883"></span><span>                </span><span id="local-6989586621679787362"><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679787362"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-884"></span><span>                    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787363"><span class="annot"><span class="annottext">[[Token]]
</span><a href="#local-6989586621679787363"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787364"><span class="annot"><span class="annottext">Map Text [[Text]]
</span><a href="#local-6989586621679787364"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Line] -&gt; ([[Token]], Map Text [[Text]])
</span><a href="Database.Persist.Quasi.Internal.html#parseEntityFields"><span class="hs-identifier hs-var">parseEntityFields</span></a></span><span> </span><span class="annot"><span class="annottext">[Line]
</span><a href="#local-6989586621679787353"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-885"></span><span>                     </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679787362"><span class="hs-identifier hs-var">ts</span></a></span><span class="annot"><span class="annottext">[Token] -&gt; [[Token]] -&gt; [[Token]]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[[Token]]
</span><a href="#local-6989586621679787363"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map Text [[Text]]
</span><a href="#local-6989586621679787364"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-886"></span><span>
</span><span id="line-887"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#isCapitalizedText"><span class="hs-identifier hs-type">isCapitalizedText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-888"></span><span id="isCapitalizedText"><span class="annot"><span class="annottext">isCapitalizedText :: Text -&gt; Bool
</span><a href="Database.Persist.Quasi.Internal.html#isCapitalizedText"><span class="hs-identifier hs-var hs-var">isCapitalizedText</span></a></span></span><span> </span><span id="local-6989586621679787365"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787365"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-889"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><span class="hs-identifier hs-var">T.null</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787365"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isUpper</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Char
Text -&gt; Char
</span><span class="hs-identifier hs-var">T.head</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787365"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-890"></span><span>
</span><span id="line-891"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeColsEx"><span class="hs-identifier hs-type">takeColsEx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span>
</span><span id="line-892"></span><span id="takeColsEx"><span class="annot"><span class="annottext">takeColsEx :: PersistSettings -&gt; [Text] -&gt; Maybe UnboundFieldDef
</span><a href="Database.Persist.Quasi.Internal.html#takeColsEx"><span class="hs-identifier hs-var hs-var">takeColsEx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-893"></span><span>    </span><span class="annot"><span class="annottext">(Text -&gt; [Char] -&gt; Maybe UnboundFieldDef)
-&gt; PersistSettings -&gt; [Text] -&gt; Maybe UnboundFieldDef
</span><a href="Database.Persist.Quasi.Internal.html#takeCols"><span class="hs-identifier hs-var">takeCols</span></a></span><span>
</span><span id="line-894"></span><span>        </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679787367"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787367"><span class="hs-identifier hs-var">ft</span></a></span></span><span> </span><span id="local-6989586621679787368"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679787368"><span class="hs-identifier hs-var">perr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Maybe UnboundFieldDef
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Maybe UnboundFieldDef)
-&gt; [Char] -&gt; Maybe UnboundFieldDef
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Invalid field type &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787367"><span class="hs-identifier hs-var">ft</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679787368"><span class="hs-identifier hs-var">perr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-895"></span><span>
</span><span id="line-896"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeCols"><span class="hs-identifier hs-type">takeCols</span></a></span><span>
</span><span id="line-897"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-898"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span>
</span><span id="line-899"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-900"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span>
</span><span id="line-901"></span><span id="takeCols"><span class="annot"><span class="annottext">takeCols :: (Text -&gt; [Char] -&gt; Maybe UnboundFieldDef)
-&gt; PersistSettings -&gt; [Text] -&gt; Maybe UnboundFieldDef
</span><a href="Database.Persist.Quasi.Internal.html#takeCols"><span class="hs-identifier hs-var hs-var">takeCols</span></a></span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char] -&gt; Maybe UnboundFieldDef
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;deriving&quot;</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe UnboundFieldDef
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-902"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeCols"><span class="hs-identifier hs-var">takeCols</span></a></span><span> </span><span id="local-6989586621679787369"><span class="annot"><span class="annottext">Text -&gt; [Char] -&gt; Maybe UnboundFieldDef
</span><a href="#local-6989586621679787369"><span class="hs-identifier hs-var">onErr</span></a></span></span><span> </span><span id="local-6989586621679787370"><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787370"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787371"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787371"><span class="hs-identifier hs-var">n'</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679787372"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787372"><span class="hs-identifier hs-var">typ</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679787373"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787373"><span class="hs-identifier hs-var">rest'</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-903"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><span class="hs-identifier hs-var">T.null</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787374"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isLower</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Char
Text -&gt; Char
</span><span class="hs-identifier hs-var">T.head</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787374"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-904"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either [Char] FieldType
</span><a href="Database.Persist.Quasi.Internal.html#parseFieldType"><span class="hs-identifier hs-var">parseFieldType</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787372"><span class="hs-identifier hs-var">typ</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-905"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679787375"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679787375"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char] -&gt; Maybe UnboundFieldDef
</span><a href="#local-6989586621679787369"><span class="hs-identifier hs-var">onErr</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787372"><span class="hs-identifier hs-var">typ</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679787375"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-906"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679787376"><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621679787376"><span class="hs-identifier hs-var">ft</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UnboundFieldDef -&gt; Maybe UnboundFieldDef
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span>
</span><span id="line-907"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">unboundFieldNameHS :: FieldNameHS
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldNameHS"><span class="hs-identifier hs-var">unboundFieldNameHS</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-908"></span><span>                    </span><span class="annot"><span class="annottext">Text -&gt; FieldNameHS
</span><a href="Database.Persist.Names.html#FieldNameHS"><span class="hs-identifier hs-var">FieldNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787374"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-909"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundFieldNameDB :: FieldNameDB
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldNameDB"><span class="hs-identifier hs-var">unboundFieldNameDB</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-910"></span><span>                    </span><span class="annot"><span class="annottext">PersistSettings -&gt; Text -&gt; [FieldAttr] -&gt; FieldNameDB
</span><a href="Database.Persist.Quasi.Internal.html#getDbName%27"><span class="hs-identifier hs-var">getDbName'</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787370"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787374"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldAttr]
</span><a href="#local-6989586621679787378"><span class="hs-identifier hs-var">fieldAttrs_</span></a></span><span>
</span><span id="line-911"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundFieldType :: FieldType
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldType"><span class="hs-identifier hs-var">unboundFieldType</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-912"></span><span>                    </span><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621679787376"><span class="hs-identifier hs-var">ft</span></a></span><span>
</span><span id="line-913"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundFieldAttrs :: [FieldAttr]
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldAttrs"><span class="hs-identifier hs-var">unboundFieldAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-914"></span><span>                    </span><span class="annot"><span class="annottext">[FieldAttr]
</span><a href="#local-6989586621679787378"><span class="hs-identifier hs-var">fieldAttrs_</span></a></span><span>
</span><span id="line-915"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundFieldStrict :: Bool
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldStrict"><span class="hs-identifier hs-var">unboundFieldStrict</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-916"></span><span>                    </span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool -&gt; Bool
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PersistSettings -&gt; Bool
</span><a href="Database.Persist.Quasi.Internal.html#psStrictFields"><span class="hs-identifier hs-var">psStrictFields</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787370"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621679787379"><span class="hs-identifier hs-var">mstrict</span></a></span><span>
</span><span id="line-917"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundFieldComments :: Maybe Text
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldComments"><span class="hs-identifier hs-var">unboundFieldComments</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-918"></span><span>                    </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-919"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundFieldCascade :: FieldCascade
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldCascade"><span class="hs-identifier hs-var">unboundFieldCascade</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-920"></span><span>                    </span><span class="annot"><span class="annottext">FieldCascade
</span><a href="#local-6989586621679787380"><span class="hs-identifier hs-var">cascade_</span></a></span><span>
</span><span id="line-921"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundFieldGenerated :: Maybe Text
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldGenerated"><span class="hs-identifier hs-var">unboundFieldGenerated</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-922"></span><span>                    </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679787381"><span class="hs-identifier hs-var">generated_</span></a></span><span>
</span><span id="line-923"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-924"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-925"></span><span>    </span><span id="local-6989586621679787378"><span class="annot"><span class="annottext">fieldAttrs_ :: [FieldAttr]
</span><a href="#local-6989586621679787378"><span class="hs-identifier hs-var hs-var">fieldAttrs_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [FieldAttr]
</span><a href="Database.Persist.Types.Base.html#parseFieldAttrs"><span class="hs-identifier hs-var">parseFieldAttrs</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787383"><span class="hs-identifier hs-var">attrs_</span></a></span><span>
</span><span id="line-926"></span><span>    </span><span id="local-6989586621679787381"><span class="annot"><span class="annottext">generated_ :: Maybe Text
</span><a href="#local-6989586621679787381"><span class="hs-identifier hs-var hs-var">generated_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Maybe Text
</span><a href="Database.Persist.Quasi.Internal.html#parseGenerated"><span class="hs-identifier hs-var">parseGenerated</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787383"><span class="hs-identifier hs-var">attrs_</span></a></span><span>
</span><span id="line-927"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679787380"><span class="annot"><span class="annottext">FieldCascade
</span><a href="#local-6989586621679787380"><span class="hs-identifier hs-var">cascade_</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787383"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787383"><span class="hs-identifier hs-var">attrs_</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; (FieldCascade, [Text])
</span><a href="Database.Persist.Quasi.Internal.html#parseCascade"><span class="hs-identifier hs-var">parseCascade</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787373"><span class="hs-identifier hs-var">rest'</span></a></span><span>
</span><span id="line-928"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679787379"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621679787379"><span class="hs-identifier hs-var">mstrict</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787374"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787374"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-929"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679787386"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787386"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Maybe Text
</span><span class="hs-identifier hs-var">T.stripPrefix</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;!&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787371"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787386"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-930"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679787387"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787387"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Maybe Text
</span><span class="hs-identifier hs-var">T.stripPrefix</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;~&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787371"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787387"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-931"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787371"><span class="hs-identifier hs-var">n'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-932"></span><span>
</span><span id="line-933"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeCols"><span class="hs-identifier hs-var">takeCols</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char] -&gt; Maybe UnboundFieldDef
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe UnboundFieldDef
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-934"></span><span>
</span><span id="line-935"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#parseGenerated"><span class="hs-identifier hs-type">parseGenerated</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-936"></span><span id="parseGenerated"><span class="annot"><span class="annottext">parseGenerated :: [Text] -&gt; Maybe Text
</span><a href="Database.Persist.Quasi.Internal.html#parseGenerated"><span class="hs-identifier hs-var hs-var">parseGenerated</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe Text -&gt; Text -&gt; Maybe Text)
-&gt; Maybe Text -&gt; [Text] -&gt; Maybe Text
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679787388"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679787388"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621679787389"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787389"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679787388"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; Maybe Text -&gt; Maybe Text
forall a. Maybe a -&gt; Maybe a -&gt; Maybe a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Maybe Text
</span><span class="hs-identifier hs-var">T.stripPrefix</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;generated=&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787389"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-937"></span><span>
</span><span id="line-938"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#getDbName"><span class="hs-identifier hs-type">getDbName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-939"></span><span id="getDbName"><span class="annot"><span class="annottext">getDbName :: PersistSettings -&gt; Text -&gt; [Text] -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#getDbName"><span class="hs-identifier hs-var hs-var">getDbName</span></a></span></span><span> </span><span id="local-6989586621679787390"><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787390"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679787391"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787391"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-940"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text -&gt; Text
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PersistSettings -&gt; Text -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psToDBName"><span class="hs-identifier hs-var">psToDBName</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787390"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787391"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe Text -&gt; Text) -&gt; ([Text] -&gt; Maybe Text) -&gt; [Text] -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Maybe Text
forall a. [a] -&gt; Maybe a
</span><span class="hs-identifier hs-var">listToMaybe</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Maybe Text)
-&gt; ([Text] -&gt; [Text]) -&gt; [Text] -&gt; Maybe Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Maybe Text) -&gt; [Text] -&gt; [Text]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Maybe Text
</span><span class="hs-identifier hs-var">T.stripPrefix</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;sql=&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-941"></span><span>
</span><span id="line-942"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#getDbName%27"><span class="hs-identifier hs-type">getDbName'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldAttr"><span class="hs-identifier hs-type">FieldAttr</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-type">FieldNameDB</span></a></span><span>
</span><span id="line-943"></span><span id="getDbName%27"><span class="annot"><span class="annottext">getDbName' :: PersistSettings -&gt; Text -&gt; [FieldAttr] -&gt; FieldNameDB
</span><a href="Database.Persist.Quasi.Internal.html#getDbName%27"><span class="hs-identifier hs-var hs-var">getDbName'</span></a></span></span><span> </span><span id="local-6989586621679787392"><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787392"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679787393"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787393"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-944"></span><span>    </span><span class="annot"><span class="annottext">FieldNameDB -&gt; [FieldAttr] -&gt; FieldNameDB
</span><a href="Database.Persist.Quasi.Internal.html#getSqlNameOr"><span class="hs-identifier hs-var">getSqlNameOr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; FieldNameDB
</span><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-var">FieldNameDB</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; FieldNameDB) -&gt; Text -&gt; FieldNameDB
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PersistSettings -&gt; Text -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psToDBName"><span class="hs-identifier hs-var">psToDBName</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787392"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787393"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-945"></span><span>
</span><span id="line-946"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#getSqlNameOr"><span class="hs-identifier hs-type">getSqlNameOr</span></a></span><span>
</span><span id="line-947"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-type">FieldNameDB</span></a></span><span>
</span><span id="line-948"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldAttr"><span class="hs-identifier hs-type">FieldAttr</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-949"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-type">FieldNameDB</span></a></span><span>
</span><span id="line-950"></span><span id="getSqlNameOr"><span class="annot"><span class="annottext">getSqlNameOr :: FieldNameDB -&gt; [FieldAttr] -&gt; FieldNameDB
</span><a href="Database.Persist.Quasi.Internal.html#getSqlNameOr"><span class="hs-identifier hs-var hs-var">getSqlNameOr</span></a></span></span><span> </span><span id="local-6989586621679787394"><span class="annot"><span class="annottext">FieldNameDB
</span><a href="#local-6989586621679787394"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-951"></span><span>    </span><span class="annot"><span class="annottext">FieldNameDB -&gt; (Text -&gt; FieldNameDB) -&gt; Maybe Text -&gt; FieldNameDB
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">FieldNameDB
</span><a href="#local-6989586621679787394"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; FieldNameDB
</span><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-var">FieldNameDB</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Text -&gt; FieldNameDB)
-&gt; ([FieldAttr] -&gt; Maybe Text) -&gt; [FieldAttr] -&gt; FieldNameDB
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[FieldAttr] -&gt; Maybe Text
</span><a href="#local-6989586621679787395"><span class="hs-identifier hs-var">findAttrSql</span></a></span><span>
</span><span id="line-952"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-953"></span><span>    </span><span id="local-6989586621679787395"><span class="annot"><span class="annottext">findAttrSql :: [FieldAttr] -&gt; Maybe Text
</span><a href="#local-6989586621679787395"><span class="hs-identifier hs-var hs-var">findAttrSql</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-954"></span><span>        </span><span class="annot"><span class="annottext">[Text] -&gt; Maybe Text
forall a. [a] -&gt; Maybe a
</span><span class="hs-identifier hs-var">listToMaybe</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Maybe Text)
-&gt; ([FieldAttr] -&gt; [Text]) -&gt; [FieldAttr] -&gt; Maybe Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(FieldAttr -&gt; Maybe Text) -&gt; [FieldAttr] -&gt; [Text]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">FieldAttr -&gt; Maybe Text
</span><a href="#local-6989586621679787396"><span class="hs-identifier hs-var">isAttrSql</span></a></span><span>
</span><span id="line-955"></span><span>    </span><span id="local-6989586621679787396"><span class="annot"><span class="annottext">isAttrSql :: FieldAttr -&gt; Maybe Text
</span><a href="#local-6989586621679787396"><span class="hs-identifier hs-var hs-var">isAttrSql</span></a></span></span><span> </span><span id="local-6989586621679787397"><span class="annot"><span class="annottext">FieldAttr
</span><a href="#local-6989586621679787397"><span class="hs-identifier hs-var">attr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-956"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">FieldAttr
</span><a href="#local-6989586621679787397"><span class="hs-identifier hs-var">attr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-957"></span><span>            </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldAttrSql"><span class="hs-identifier hs-type">FieldAttrSql</span></a></span><span> </span><span id="local-6989586621679787399"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787399"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-958"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787399"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-959"></span><span>            </span><span class="annot"><span class="annottext">FieldAttr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-960"></span><span>                </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-961"></span><span>
</span><span id="line-962"></span><span class="hs-keyword">data</span><span> </span><span id="SetOnceAtMost"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#SetOnceAtMost"><span class="hs-identifier hs-var">SetOnceAtMost</span></a></span></span><span> </span><span id="local-6989586621679786085"><span class="annot"><a href="#local-6989586621679786085"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-963"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NotSet"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#NotSet"><span class="hs-identifier hs-var">NotSet</span></a></span></span><span>
</span><span id="line-964"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SetOnce"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#SetOnce"><span class="hs-identifier hs-var">SetOnce</span></a></span></span><span> </span><span class="annot"><a href="#local-6989586621679786085"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-965"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="SetMoreThanOnce"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#SetMoreThanOnce"><span class="hs-identifier hs-var">SetMoreThanOnce</span></a></span></span><span>
</span><span id="line-966"></span><span>
</span><span id="line-967"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679786084"><span id="local-6989586621679787402"><span id="local-6989586621679787406"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#SetOnceAtMost"><span class="hs-identifier hs-type">SetOnceAtMost</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679786084"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-968"></span><span>    </span><span id="local-6989586621679787410"><span class="annot"><span class="annottext">SetOnceAtMost a
</span><a href="#local-6989586621679787410"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679787411"><span class="annot"><span class="annottext">&lt;&gt; :: SetOnceAtMost a -&gt; SetOnceAtMost a -&gt; SetOnceAtMost a
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span id="local-6989586621679787412"><span class="annot"><span class="annottext">SetOnceAtMost a
</span><a href="#local-6989586621679787412"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-969"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SetOnceAtMost a
</span><a href="#local-6989586621679787410"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SetOnceAtMost a
</span><a href="#local-6989586621679787412"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-970"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SetOnceAtMost a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SetOnceAtMost a
</span><a href="Database.Persist.Quasi.Internal.html#NotSet"><span class="hs-identifier hs-var">NotSet</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SetOnceAtMost a
</span><a href="#local-6989586621679787410"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-971"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SetOnceAtMost a
</span><a href="Database.Persist.Quasi.Internal.html#NotSet"><span class="hs-identifier hs-var">NotSet</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SetOnceAtMost a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SetOnceAtMost a
</span><a href="#local-6989586621679787412"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-972"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#SetOnce"><span class="hs-identifier hs-type">SetOnce</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#SetOnce"><span class="hs-identifier hs-type">SetOnce</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SetOnceAtMost a
forall a. SetOnceAtMost a
</span><a href="Database.Persist.Quasi.Internal.html#SetMoreThanOnce"><span class="hs-identifier hs-var">SetMoreThanOnce</span></a></span><span>
</span><span id="line-973"></span><span>            </span><span class="annot"><span class="annottext">(SetOnceAtMost a, SetOnceAtMost a)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SetOnceAtMost a
</span><a href="#local-6989586621679787410"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-974"></span><span>
</span><span id="line-975"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679786087"><span id="local-6989586621679787417"><span id="local-6989586621679787421"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#SetOnceAtMost"><span class="hs-identifier hs-type">SetOnceAtMost</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679786087"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-976"></span><span>    </span><span id="local-6989586621679787424"><span class="annot"><span class="annottext">mempty :: SetOnceAtMost a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-977"></span><span>        </span><span class="annot"><span class="annottext">SetOnceAtMost a
forall a. SetOnceAtMost a
</span><a href="Database.Persist.Quasi.Internal.html#NotSet"><span class="hs-identifier hs-var">NotSet</span></a></span><span>
</span><span id="line-978"></span><span>
</span><span id="line-979"></span><span class="hs-keyword">data</span><span> </span><span id="EntityConstraintDefs"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#EntityConstraintDefs"><span class="hs-identifier hs-var">EntityConstraintDefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EntityConstraintDefs"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#EntityConstraintDefs"><span class="hs-identifier hs-var">EntityConstraintDefs</span></a></span></span><span>
</span><span id="line-980"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="entityConstraintDefsIdField"><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; SetOnceAtMost UnboundIdDef
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsIdField"><span class="hs-identifier hs-var hs-var">entityConstraintDefsIdField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#SetOnceAtMost"><span class="hs-identifier hs-type">SetOnceAtMost</span></a></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundIdDef"><span class="hs-identifier hs-type">UnboundIdDef</span></a></span><span>
</span><span id="line-981"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="entityConstraintDefsPrimaryComposite"><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; SetOnceAtMost UnboundCompositeDef
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsPrimaryComposite"><span class="hs-identifier hs-var hs-var">entityConstraintDefsPrimaryComposite</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#SetOnceAtMost"><span class="hs-identifier hs-type">SetOnceAtMost</span></a></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundCompositeDef"><span class="hs-identifier hs-type">UnboundCompositeDef</span></a></span><span>
</span><span id="line-982"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="entityConstraintDefsUniques"><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; Maybe (NonEmpty UniqueDef)
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsUniques"><span class="hs-identifier hs-var hs-var">entityConstraintDefsUniques</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#UniqueDef"><span class="hs-identifier hs-type">UniqueDef</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-983"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="entityConstraintDefsForeigns"><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; Maybe (NonEmpty UnboundForeignDef)
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsForeigns"><span class="hs-identifier hs-var hs-var">entityConstraintDefsForeigns</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignDef"><span class="hs-identifier hs-type">UnboundForeignDef</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-984"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-985"></span><span>
</span><span id="line-986"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679787430"><span id="local-6989586621679787434"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#EntityConstraintDefs"><span class="hs-identifier hs-type">EntityConstraintDefs</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-987"></span><span>    </span><span id="local-6989586621679787446"><span class="annot"><span class="annottext">EntityConstraintDefs
</span><a href="#local-6989586621679787446"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679787447"><span class="annot"><span class="annottext">&lt;&gt; :: EntityConstraintDefs
-&gt; EntityConstraintDefs -&gt; EntityConstraintDefs
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span id="local-6989586621679787448"><span class="annot"><span class="annottext">EntityConstraintDefs
</span><a href="#local-6989586621679787448"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-988"></span><span>        </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#EntityConstraintDefs"><span class="hs-identifier hs-type">EntityConstraintDefs</span></a></span><span>
</span><span id="line-989"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">entityConstraintDefsIdField :: SetOnceAtMost UnboundIdDef
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsIdField"><span class="hs-identifier hs-var">entityConstraintDefsIdField</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; SetOnceAtMost UnboundIdDef
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsIdField"><span class="hs-identifier hs-var">entityConstraintDefsIdField</span></a></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs
</span><a href="#local-6989586621679787446"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">SetOnceAtMost UnboundIdDef
-&gt; SetOnceAtMost UnboundIdDef -&gt; SetOnceAtMost UnboundIdDef
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; SetOnceAtMost UnboundIdDef
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsIdField"><span class="hs-identifier hs-var">entityConstraintDefsIdField</span></a></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs
</span><a href="#local-6989586621679787448"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-990"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">entityConstraintDefsPrimaryComposite :: SetOnceAtMost UnboundCompositeDef
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsPrimaryComposite"><span class="hs-identifier hs-var">entityConstraintDefsPrimaryComposite</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; SetOnceAtMost UnboundCompositeDef
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsPrimaryComposite"><span class="hs-identifier hs-var">entityConstraintDefsPrimaryComposite</span></a></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs
</span><a href="#local-6989586621679787446"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">SetOnceAtMost UnboundCompositeDef
-&gt; SetOnceAtMost UnboundCompositeDef
-&gt; SetOnceAtMost UnboundCompositeDef
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; SetOnceAtMost UnboundCompositeDef
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsPrimaryComposite"><span class="hs-identifier hs-var">entityConstraintDefsPrimaryComposite</span></a></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs
</span><a href="#local-6989586621679787448"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-991"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">entityConstraintDefsUniques :: Maybe (NonEmpty UniqueDef)
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsUniques"><span class="hs-identifier hs-var">entityConstraintDefsUniques</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; Maybe (NonEmpty UniqueDef)
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsUniques"><span class="hs-identifier hs-var">entityConstraintDefsUniques</span></a></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs
</span><a href="#local-6989586621679787446"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty UniqueDef)
-&gt; Maybe (NonEmpty UniqueDef) -&gt; Maybe (NonEmpty UniqueDef)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; Maybe (NonEmpty UniqueDef)
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsUniques"><span class="hs-identifier hs-var">entityConstraintDefsUniques</span></a></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs
</span><a href="#local-6989586621679787448"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-992"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">entityConstraintDefsForeigns :: Maybe (NonEmpty UnboundForeignDef)
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsForeigns"><span class="hs-identifier hs-var">entityConstraintDefsForeigns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; Maybe (NonEmpty UnboundForeignDef)
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsForeigns"><span class="hs-identifier hs-var">entityConstraintDefsForeigns</span></a></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs
</span><a href="#local-6989586621679787446"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty UnboundForeignDef)
-&gt; Maybe (NonEmpty UnboundForeignDef)
-&gt; Maybe (NonEmpty UnboundForeignDef)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; Maybe (NonEmpty UnboundForeignDef)
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsForeigns"><span class="hs-identifier hs-var">entityConstraintDefsForeigns</span></a></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs
</span><a href="#local-6989586621679787448"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-993"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-994"></span><span>
</span><span id="line-995"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679787453"><span id="local-6989586621679787456"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#EntityConstraintDefs"><span class="hs-identifier hs-type">EntityConstraintDefs</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-996"></span><span>    </span><span id="local-6989586621679787460"><span class="annot"><span class="annottext">mempty :: EntityConstraintDefs
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-997"></span><span>        </span><span class="annot"><span class="annottext">SetOnceAtMost UnboundIdDef
-&gt; SetOnceAtMost UnboundCompositeDef
-&gt; Maybe (NonEmpty UniqueDef)
-&gt; Maybe (NonEmpty UnboundForeignDef)
-&gt; EntityConstraintDefs
</span><a href="Database.Persist.Quasi.Internal.html#EntityConstraintDefs"><span class="hs-identifier hs-var">EntityConstraintDefs</span></a></span><span> </span><span class="annot"><span class="annottext">SetOnceAtMost UnboundIdDef
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">SetOnceAtMost UnboundCompositeDef
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty UniqueDef)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty UnboundForeignDef)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-998"></span><span>
</span><span id="line-999"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsUniquesList"><span class="hs-identifier hs-type">entityConstraintDefsUniquesList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#EntityConstraintDefs"><span class="hs-identifier hs-type">EntityConstraintDefs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Types.Base.html#UniqueDef"><span class="hs-identifier hs-type">UniqueDef</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1000"></span><span id="entityConstraintDefsUniquesList"><span class="annot"><span class="annottext">entityConstraintDefsUniquesList :: EntityConstraintDefs -&gt; [UniqueDef]
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsUniquesList"><span class="hs-identifier hs-var hs-var">entityConstraintDefsUniquesList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NonEmpty UniqueDef -&gt; [UniqueDef])
-&gt; Maybe (NonEmpty UniqueDef) -&gt; [UniqueDef]
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Maybe a -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty UniqueDef -&gt; [UniqueDef]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NEL.toList</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (NonEmpty UniqueDef) -&gt; [UniqueDef])
-&gt; (EntityConstraintDefs -&gt; Maybe (NonEmpty UniqueDef))
-&gt; EntityConstraintDefs
-&gt; [UniqueDef]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; Maybe (NonEmpty UniqueDef)
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsUniques"><span class="hs-identifier hs-var">entityConstraintDefsUniques</span></a></span><span>
</span><span id="line-1001"></span><span>
</span><span id="line-1002"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsForeignsList"><span class="hs-identifier hs-type">entityConstraintDefsForeignsList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#EntityConstraintDefs"><span class="hs-identifier hs-type">EntityConstraintDefs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignDef"><span class="hs-identifier hs-type">UnboundForeignDef</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1003"></span><span id="entityConstraintDefsForeignsList"><span class="annot"><span class="annottext">entityConstraintDefsForeignsList :: EntityConstraintDefs -&gt; [UnboundForeignDef]
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsForeignsList"><span class="hs-identifier hs-var hs-var">entityConstraintDefsForeignsList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(NonEmpty UnboundForeignDef -&gt; [UnboundForeignDef])
-&gt; Maybe (NonEmpty UnboundForeignDef) -&gt; [UnboundForeignDef]
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; Maybe a -&gt; m
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty UnboundForeignDef -&gt; [UnboundForeignDef]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NEL.toList</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (NonEmpty UnboundForeignDef) -&gt; [UnboundForeignDef])
-&gt; (EntityConstraintDefs -&gt; Maybe (NonEmpty UnboundForeignDef))
-&gt; EntityConstraintDefs
-&gt; [UnboundForeignDef]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">EntityConstraintDefs -&gt; Maybe (NonEmpty UnboundForeignDef)
</span><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsForeigns"><span class="hs-identifier hs-var">entityConstraintDefsForeigns</span></a></span><span>
</span><span id="line-1004"></span><span>
</span><span id="line-1005"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeConstraint"><span class="hs-identifier hs-type">takeConstraint</span></a></span><span>
</span><span id="line-1006"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span>
</span><span id="line-1007"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span>
</span><span id="line-1008"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1009"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1010"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#EntityConstraintDefs"><span class="hs-identifier hs-type">EntityConstraintDefs</span></a></span><span>
</span><span id="line-1011"></span><span id="takeConstraint"><span class="annot"><span class="annottext">takeConstraint :: PersistSettings
-&gt; EntityNameHS
-&gt; [UnboundFieldDef]
-&gt; NonEmpty Text
-&gt; EntityConstraintDefs
</span><a href="Database.Persist.Quasi.Internal.html#takeConstraint"><span class="hs-identifier hs-var hs-var">takeConstraint</span></a></span></span><span> </span><span id="local-6989586621679787461"><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787461"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679787462"><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787462"><span class="hs-identifier hs-var">entityName</span></a></span></span><span> </span><span id="local-6989586621679787463"><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787463"><span class="hs-identifier hs-var">defs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787464"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787464"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span id="local-6989586621679787465"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787465"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1012"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787464"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1013"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unique&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1014"></span><span>            </span><span class="annot"><span class="annottext">EntityConstraintDefs
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1015"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsUniques"><span class="hs-identifier hs-var">entityConstraintDefsUniques</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1016"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeUniq"><span class="hs-identifier hs-type">takeUniq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679787461"><span class="hs-identifier hs-type">ps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Names.html#unEntityNameHS"><span class="hs-identifier hs-var">unEntityNameHS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679787462"><span class="hs-identifier hs-type">entityName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679787463"><span class="hs-identifier hs-type">defs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679787465"><span class="hs-identifier hs-type">rest</span></a></span><span>
</span><span id="line-1017"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-1018"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Foreign&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1019"></span><span>            </span><span class="annot"><span class="annottext">EntityConstraintDefs
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1020"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsForeigns"><span class="hs-identifier hs-var">entityConstraintDefsForeigns</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1021"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeForeign"><span class="hs-identifier hs-type">takeForeign</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679787461"><span class="hs-identifier hs-type">ps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679787462"><span class="hs-identifier hs-type">entityName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679787465"><span class="hs-identifier hs-type">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1022"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-1023"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Primary&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1024"></span><span>            </span><span class="hs-keyword">let</span><span>
</span><span id="line-1025"></span><span>                </span><span id="local-6989586621679787468"><span class="annot"><span class="annottext">unboundComposite :: UnboundCompositeDef
</span><a href="#local-6989586621679787468"><span class="hs-identifier hs-var hs-var">unboundComposite</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1026"></span><span>                    </span><span class="annot"><span class="annottext">[FieldNameHS] -&gt; [Text] -&gt; UnboundCompositeDef
</span><a href="Database.Persist.Quasi.Internal.html#takeComposite"><span class="hs-identifier hs-var">takeComposite</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnboundFieldDef -&gt; FieldNameHS
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldNameHS"><span class="hs-identifier hs-var">unboundFieldNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">(UnboundFieldDef -&gt; FieldNameHS)
-&gt; [UnboundFieldDef] -&gt; [FieldNameHS]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787463"><span class="hs-identifier hs-var">defs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787465"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1027"></span><span>            </span><span class="hs-keyword">in</span><span>
</span><span id="line-1028"></span><span>                </span><span class="annot"><span class="annottext">EntityConstraintDefs
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1029"></span><span>                    </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsPrimaryComposite"><span class="hs-identifier hs-var">entityConstraintDefsPrimaryComposite</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1030"></span><span>                        </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#SetOnce"><span class="hs-identifier hs-type">SetOnce</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679787468"><span class="hs-identifier hs-type">unboundComposite</span></a></span><span>
</span><span id="line-1031"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsUniques"><span class="hs-identifier hs-var">entityConstraintDefsUniques</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1032"></span><span>                        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#compositeToUniqueDef"><span class="hs-identifier hs-type">compositeToUniqueDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679787462"><span class="hs-identifier hs-type">entityName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679787463"><span class="hs-identifier hs-type">defs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679787468"><span class="hs-identifier hs-type">unboundComposite</span></a></span><span>
</span><span id="line-1033"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-1034"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Id&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1035"></span><span>            </span><span class="annot"><span class="annottext">EntityConstraintDefs
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1036"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsIdField"><span class="hs-identifier hs-var">entityConstraintDefsIdField</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1037"></span><span>                    </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#SetOnce"><span class="hs-identifier hs-type">SetOnce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeId"><span class="hs-identifier hs-type">takeId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679787461"><span class="hs-identifier hs-type">ps</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679787462"><span class="hs-identifier hs-type">entityName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679787465"><span class="hs-identifier hs-type">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1038"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-1039"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><a href="Database.Persist.Quasi.Internal.html#isCapitalizedText"><span class="hs-identifier hs-var">isCapitalizedText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787464"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1040"></span><span>            </span><span class="annot"><span class="annottext">EntityConstraintDefs
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1041"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#entityConstraintDefsUniques"><span class="hs-identifier hs-var">entityConstraintDefsUniques</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1042"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeUniq"><span class="hs-identifier hs-type">takeUniq</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679787461"><span class="hs-identifier hs-type">ps</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><a href="#local-6989586621679787463"><span class="hs-identifier hs-type">defs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679787464"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><a href="#local-6989586621679787465"><span class="hs-identifier hs-type">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1043"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-1044"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1045"></span><span>            </span><span class="annot"><span class="annottext">EntityConstraintDefs
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1046"></span><span>
</span><span id="line-1047"></span><span class="hs-comment">-- | This type represents an @Id@ declaration in the QuasiQuoted syntax.</span><span>
</span><span id="line-1048"></span><span class="hs-comment">--</span><span>
</span><span id="line-1049"></span><span class="hs-comment">-- &gt; Id</span><span>
</span><span id="line-1050"></span><span class="hs-comment">--</span><span>
</span><span id="line-1051"></span><span class="hs-comment">-- This uses the implied settings, and is equivalent to omitting the @Id@</span><span>
</span><span id="line-1052"></span><span class="hs-comment">-- statement entirely.</span><span>
</span><span id="line-1053"></span><span class="hs-comment">--</span><span>
</span><span id="line-1054"></span><span class="hs-comment">-- &gt; Id Text</span><span>
</span><span id="line-1055"></span><span class="hs-comment">--</span><span>
</span><span id="line-1056"></span><span class="hs-comment">-- This will set the field type of the ID to be 'Text'.</span><span>
</span><span id="line-1057"></span><span class="hs-comment">--</span><span>
</span><span id="line-1058"></span><span class="hs-comment">-- &gt; Id Text sql=foo_id</span><span>
</span><span id="line-1059"></span><span class="hs-comment">--</span><span>
</span><span id="line-1060"></span><span class="hs-comment">-- This will set the field type of the Id to be 'Text' and the SQL DB name to be @foo_id@.</span><span>
</span><span id="line-1061"></span><span class="hs-comment">--</span><span>
</span><span id="line-1062"></span><span class="hs-comment">-- &gt; Id FooId</span><span>
</span><span id="line-1063"></span><span class="hs-comment">--</span><span>
</span><span id="line-1064"></span><span class="hs-comment">-- This results in a shared primary key - the @FooId@ refers to a @Foo@ table.</span><span>
</span><span id="line-1065"></span><span class="hs-comment">--</span><span>
</span><span id="line-1066"></span><span class="hs-comment">-- &gt; Id FooId OnDelete Cascade</span><span>
</span><span id="line-1067"></span><span class="hs-comment">--</span><span>
</span><span id="line-1068"></span><span class="hs-comment">-- You can set a cascade behavior on an ID column.</span><span>
</span><span id="line-1069"></span><span class="hs-comment">--</span><span>
</span><span id="line-1070"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-1071"></span><span class="hs-keyword">data</span><span> </span><span id="UnboundIdDef"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundIdDef"><span class="hs-identifier hs-var">UnboundIdDef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UnboundIdDef"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundIdDef"><span class="hs-identifier hs-var">UnboundIdDef</span></a></span></span><span>
</span><span id="line-1072"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unboundIdEntityName"><span class="annot"><span class="annottext">UnboundIdDef -&gt; EntityNameHS
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdEntityName"><span class="hs-identifier hs-var hs-var">unboundIdEntityName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span>
</span><span id="line-1073"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundIdDBName"><span class="annot"><span class="annottext">UnboundIdDef -&gt; FieldNameDB
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdDBName"><span class="hs-identifier hs-var hs-var">unboundIdDBName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-type">FieldNameDB</span></a></span><span>
</span><span id="line-1074"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundIdAttrs"><span class="annot"><span class="annottext">UnboundIdDef -&gt; [FieldAttr]
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdAttrs"><span class="hs-identifier hs-var hs-var">unboundIdAttrs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldAttr"><span class="hs-identifier hs-type">FieldAttr</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1075"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundIdCascade"><span class="annot"><span class="annottext">UnboundIdDef -&gt; FieldCascade
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdCascade"><span class="hs-identifier hs-var hs-var">unboundIdCascade</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldCascade"><span class="hs-identifier hs-type">FieldCascade</span></a></span><span>
</span><span id="line-1076"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundIdType"><span class="annot"><span class="annottext">UnboundIdDef -&gt; Maybe FieldType
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdType"><span class="hs-identifier hs-var hs-var">unboundIdType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldType"><span class="hs-identifier hs-type">FieldType</span></a></span><span>
</span><span id="line-1077"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1078"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787473"><span id="local-6989586621679787481"><span class="annot"><span class="annottext">UnboundIdDef -&gt; UnboundIdDef -&gt; Bool
(UnboundIdDef -&gt; UnboundIdDef -&gt; Bool)
-&gt; (UnboundIdDef -&gt; UnboundIdDef -&gt; Bool) -&gt; Eq UnboundIdDef
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: UnboundIdDef -&gt; UnboundIdDef -&gt; Bool
== :: UnboundIdDef -&gt; UnboundIdDef -&gt; Bool
$c/= :: UnboundIdDef -&gt; UnboundIdDef -&gt; Bool
/= :: UnboundIdDef -&gt; UnboundIdDef -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787486"><span id="local-6989586621679787496"><span id="local-6989586621679787505"><span id="local-6989586621679787508"><span id="local-6989586621679787511"><span id="local-6989586621679787514"><span id="local-6989586621679787517"><span class="annot"><span class="annottext">Eq UnboundIdDef
Eq UnboundIdDef =&gt;
(UnboundIdDef -&gt; UnboundIdDef -&gt; Ordering)
-&gt; (UnboundIdDef -&gt; UnboundIdDef -&gt; Bool)
-&gt; (UnboundIdDef -&gt; UnboundIdDef -&gt; Bool)
-&gt; (UnboundIdDef -&gt; UnboundIdDef -&gt; Bool)
-&gt; (UnboundIdDef -&gt; UnboundIdDef -&gt; Bool)
-&gt; (UnboundIdDef -&gt; UnboundIdDef -&gt; UnboundIdDef)
-&gt; (UnboundIdDef -&gt; UnboundIdDef -&gt; UnboundIdDef)
-&gt; Ord UnboundIdDef
UnboundIdDef -&gt; UnboundIdDef -&gt; Bool
UnboundIdDef -&gt; UnboundIdDef -&gt; Ordering
UnboundIdDef -&gt; UnboundIdDef -&gt; UnboundIdDef
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: UnboundIdDef -&gt; UnboundIdDef -&gt; Ordering
compare :: UnboundIdDef -&gt; UnboundIdDef -&gt; Ordering
$c&lt; :: UnboundIdDef -&gt; UnboundIdDef -&gt; Bool
&lt; :: UnboundIdDef -&gt; UnboundIdDef -&gt; Bool
$c&lt;= :: UnboundIdDef -&gt; UnboundIdDef -&gt; Bool
&lt;= :: UnboundIdDef -&gt; UnboundIdDef -&gt; Bool
$c&gt; :: UnboundIdDef -&gt; UnboundIdDef -&gt; Bool
&gt; :: UnboundIdDef -&gt; UnboundIdDef -&gt; Bool
$c&gt;= :: UnboundIdDef -&gt; UnboundIdDef -&gt; Bool
&gt;= :: UnboundIdDef -&gt; UnboundIdDef -&gt; Bool
$cmax :: UnboundIdDef -&gt; UnboundIdDef -&gt; UnboundIdDef
max :: UnboundIdDef -&gt; UnboundIdDef -&gt; UnboundIdDef
$cmin :: UnboundIdDef -&gt; UnboundIdDef -&gt; UnboundIdDef
min :: UnboundIdDef -&gt; UnboundIdDef -&gt; UnboundIdDef
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787520"><span id="local-6989586621679787530"><span id="local-6989586621679787533"><span class="annot"><span class="annottext">Int -&gt; UnboundIdDef -&gt; ShowS
[UnboundIdDef] -&gt; ShowS
UnboundIdDef -&gt; [Char]
(Int -&gt; UnboundIdDef -&gt; ShowS)
-&gt; (UnboundIdDef -&gt; [Char])
-&gt; ([UnboundIdDef] -&gt; ShowS)
-&gt; Show UnboundIdDef
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; UnboundIdDef -&gt; ShowS
showsPrec :: Int -&gt; UnboundIdDef -&gt; ShowS
$cshow :: UnboundIdDef -&gt; [Char]
show :: UnboundIdDef -&gt; [Char]
$cshowList :: [UnboundIdDef] -&gt; ShowS
showList :: [UnboundIdDef] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787536"><span id="local-6989586621679787553"><span class="annot"><span class="annottext">(forall (m :: * -&gt; *). Quote m =&gt; UnboundIdDef -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *).
    Quote m =&gt;
    UnboundIdDef -&gt; Code m UnboundIdDef)
-&gt; Lift UnboundIdDef
forall t.
(forall (m :: * -&gt; *). Quote m =&gt; t -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; t -&gt; Code m t) -&gt; Lift t
forall (m :: * -&gt; *). Quote m =&gt; UnboundIdDef -&gt; m Exp
forall (m :: * -&gt; *).
Quote m =&gt;
UnboundIdDef -&gt; Code m UnboundIdDef
$clift :: forall (m :: * -&gt; *). Quote m =&gt; UnboundIdDef -&gt; m Exp
lift :: forall (m :: * -&gt; *). Quote m =&gt; UnboundIdDef -&gt; m Exp
$cliftTyped :: forall (m :: * -&gt; *).
Quote m =&gt;
UnboundIdDef -&gt; Code m UnboundIdDef
liftTyped :: forall (m :: * -&gt; *).
Quote m =&gt;
UnboundIdDef -&gt; Code m UnboundIdDef
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Lift</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1079"></span><span>
</span><span id="line-1080"></span><span class="hs-comment">-- TODO: this is hacky (the double takeCols, the setFieldDef stuff, and setIdName.</span><span>
</span><span id="line-1081"></span><span class="hs-comment">-- need to re-work takeCols function</span><span>
</span><span id="line-1082"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeId"><span class="hs-identifier hs-type">takeId</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundIdDef"><span class="hs-identifier hs-type">UnboundIdDef</span></a></span><span>
</span><span id="line-1083"></span><span id="takeId"><span class="annot"><span class="annottext">takeId :: PersistSettings -&gt; EntityNameHS -&gt; [Text] -&gt; UnboundIdDef
</span><a href="Database.Persist.Quasi.Internal.html#takeId"><span class="hs-identifier hs-var hs-var">takeId</span></a></span></span><span> </span><span id="local-6989586621679787568"><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787568"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679787569"><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787569"><span class="hs-identifier hs-var">entityName</span></a></span></span><span> </span><span id="local-6989586621679787570"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787570"><span class="hs-identifier hs-var">texts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1084"></span><span>    </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundIdDef"><span class="hs-identifier hs-type">UnboundIdDef</span></a></span><span>
</span><span id="line-1085"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">unboundIdDBName :: FieldNameDB
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdDBName"><span class="hs-identifier hs-var">unboundIdDBName</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1086"></span><span>            </span><span class="annot"><span class="annottext">Text -&gt; FieldNameDB
</span><a href="Database.Persist.Names.html#FieldNameDB"><span class="hs-identifier hs-var">FieldNameDB</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; FieldNameDB) -&gt; Text -&gt; FieldNameDB
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PersistSettings -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psIdName"><span class="hs-identifier hs-var">psIdName</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787568"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1087"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundIdEntityName :: EntityNameHS
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdEntityName"><span class="hs-identifier hs-var">unboundIdEntityName</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1088"></span><span>            </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787569"><span class="hs-identifier hs-var">entityName</span></a></span><span>
</span><span id="line-1089"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundIdCascade :: FieldCascade
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdCascade"><span class="hs-identifier hs-var">unboundIdCascade</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1090"></span><span>            </span><span class="annot"><span class="annottext">FieldCascade
</span><a href="#local-6989586621679787571"><span class="hs-identifier hs-var">cascade_</span></a></span><span>
</span><span id="line-1091"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundIdAttrs :: [FieldAttr]
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdAttrs"><span class="hs-identifier hs-var">unboundIdAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1092"></span><span>            </span><span class="annot"><span class="annottext">[Text] -&gt; [FieldAttr]
</span><a href="Database.Persist.Types.Base.html#parseFieldAttrs"><span class="hs-identifier hs-var">parseFieldAttrs</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787572"><span class="hs-identifier hs-var">attrs_</span></a></span><span>
</span><span id="line-1093"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundIdType :: Maybe FieldType
</span><a href="Database.Persist.Quasi.Internal.html#unboundIdType"><span class="hs-identifier hs-var">unboundIdType</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1094"></span><span>            </span><span class="annot"><span class="annottext">Maybe FieldType
</span><a href="#local-6989586621679787573"><span class="hs-identifier hs-var">typ</span></a></span><span>
</span><span id="line-1095"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1096"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1097"></span><span>    </span><span id="local-6989586621679787573"><span class="annot"><span class="annottext">typ :: Maybe FieldType
</span><a href="#local-6989586621679787573"><span class="hs-identifier hs-var hs-var">typ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1098"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787570"><span class="hs-identifier hs-var">texts</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1099"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1100"></span><span>                </span><span class="annot"><span class="annottext">Maybe FieldType
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1101"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679787574"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787574"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1102"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either [Char] FieldType
</span><a href="Database.Persist.Quasi.Internal.html#parseFieldType"><span class="hs-identifier hs-var">parseFieldType</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787574"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1103"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1104"></span><span>                        </span><span class="annot"><span class="annottext">Maybe FieldType
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1105"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679787575"><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621679787575"><span class="hs-identifier hs-var">ft</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1106"></span><span>                        </span><span class="annot"><span class="annottext">FieldType -&gt; Maybe FieldType
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">FieldType
</span><a href="#local-6989586621679787575"><span class="hs-identifier hs-var">ft</span></a></span><span>
</span><span id="line-1107"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679787571"><span class="annot"><span class="annottext">FieldCascade
</span><a href="#local-6989586621679787571"><span class="hs-identifier hs-var">cascade_</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787572"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787572"><span class="hs-identifier hs-var">attrs_</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; (FieldCascade, [Text])
</span><a href="Database.Persist.Quasi.Internal.html#parseCascade"><span class="hs-identifier hs-var">parseCascade</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787570"><span class="hs-identifier hs-var">texts</span></a></span><span>
</span><span id="line-1108"></span><span>
</span><span id="line-1109"></span><span class="hs-comment">-- | A definition for a composite primary key.</span><span>
</span><span id="line-1110"></span><span class="hs-comment">--</span><span>
</span><span id="line-1111"></span><span class="hs-comment">-- @since.2.13.0.0</span><span>
</span><span id="line-1112"></span><span class="hs-keyword">data</span><span> </span><span id="UnboundCompositeDef"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundCompositeDef"><span class="hs-identifier hs-var">UnboundCompositeDef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="UnboundCompositeDef"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundCompositeDef"><span class="hs-identifier hs-var">UnboundCompositeDef</span></a></span></span><span>
</span><span id="line-1113"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unboundCompositeCols"><span class="annot"><span class="annottext">UnboundCompositeDef -&gt; NonEmpty FieldNameHS
</span><a href="Database.Persist.Quasi.Internal.html#unboundCompositeCols"><span class="hs-identifier hs-var hs-var">unboundCompositeCols</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Database.Persist.Names.html#FieldNameHS"><span class="hs-identifier hs-type">FieldNameHS</span></a></span><span>
</span><span id="line-1114"></span><span>    </span><span class="hs-comment">-- ^ The field names for the primary key.</span><span>
</span><span id="line-1115"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1116"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-1117"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundCompositeAttrs"><span class="annot"><span class="annottext">UnboundCompositeDef -&gt; [Text]
</span><a href="Database.Persist.Quasi.Internal.html#unboundCompositeAttrs"><span class="hs-identifier hs-var hs-var">unboundCompositeAttrs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Types.Base.html#Attr"><span class="hs-identifier hs-type">Attr</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1118"></span><span>    </span><span class="hs-comment">-- ^ A list of attributes defined on the primary key. This is anything that</span><span>
</span><span id="line-1119"></span><span>    </span><span class="hs-comment">-- occurs after a @!@ character.</span><span>
</span><span id="line-1120"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1121"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-1122"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1123"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787577"><span id="local-6989586621679787581"><span class="annot"><span class="annottext">UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool
(UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool)
-&gt; (UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool)
-&gt; Eq UnboundCompositeDef
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool
== :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool
$c/= :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool
/= :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787586"><span id="local-6989586621679787592"><span id="local-6989586621679787597"><span id="local-6989586621679787600"><span id="local-6989586621679787603"><span id="local-6989586621679787606"><span id="local-6989586621679787609"><span class="annot"><span class="annottext">Eq UnboundCompositeDef
Eq UnboundCompositeDef =&gt;
(UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Ordering)
-&gt; (UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool)
-&gt; (UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool)
-&gt; (UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool)
-&gt; (UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool)
-&gt; (UnboundCompositeDef
    -&gt; UnboundCompositeDef -&gt; UnboundCompositeDef)
-&gt; (UnboundCompositeDef
    -&gt; UnboundCompositeDef -&gt; UnboundCompositeDef)
-&gt; Ord UnboundCompositeDef
UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool
UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Ordering
UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; UnboundCompositeDef
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Ordering
compare :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Ordering
$c&lt; :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool
&lt; :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool
$c&lt;= :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool
&lt;= :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool
$c&gt; :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool
&gt; :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool
$c&gt;= :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool
&gt;= :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; Bool
$cmax :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; UnboundCompositeDef
max :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; UnboundCompositeDef
$cmin :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; UnboundCompositeDef
min :: UnboundCompositeDef -&gt; UnboundCompositeDef -&gt; UnboundCompositeDef
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787612"><span id="local-6989586621679787618"><span id="local-6989586621679787621"><span class="annot"><span class="annottext">Int -&gt; UnboundCompositeDef -&gt; ShowS
[UnboundCompositeDef] -&gt; ShowS
UnboundCompositeDef -&gt; [Char]
(Int -&gt; UnboundCompositeDef -&gt; ShowS)
-&gt; (UnboundCompositeDef -&gt; [Char])
-&gt; ([UnboundCompositeDef] -&gt; ShowS)
-&gt; Show UnboundCompositeDef
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; UnboundCompositeDef -&gt; ShowS
showsPrec :: Int -&gt; UnboundCompositeDef -&gt; ShowS
$cshow :: UnboundCompositeDef -&gt; [Char]
show :: UnboundCompositeDef -&gt; [Char]
$cshowList :: [UnboundCompositeDef] -&gt; ShowS
showList :: [UnboundCompositeDef] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787624"><span id="local-6989586621679787635"><span class="annot"><span class="annottext">(forall (m :: * -&gt; *). Quote m =&gt; UnboundCompositeDef -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *).
    Quote m =&gt;
    UnboundCompositeDef -&gt; Code m UnboundCompositeDef)
-&gt; Lift UnboundCompositeDef
forall t.
(forall (m :: * -&gt; *). Quote m =&gt; t -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; t -&gt; Code m t) -&gt; Lift t
forall (m :: * -&gt; *). Quote m =&gt; UnboundCompositeDef -&gt; m Exp
forall (m :: * -&gt; *).
Quote m =&gt;
UnboundCompositeDef -&gt; Code m UnboundCompositeDef
$clift :: forall (m :: * -&gt; *). Quote m =&gt; UnboundCompositeDef -&gt; m Exp
lift :: forall (m :: * -&gt; *). Quote m =&gt; UnboundCompositeDef -&gt; m Exp
$cliftTyped :: forall (m :: * -&gt; *).
Quote m =&gt;
UnboundCompositeDef -&gt; Code m UnboundCompositeDef
liftTyped :: forall (m :: * -&gt; *).
Quote m =&gt;
UnboundCompositeDef -&gt; Code m UnboundCompositeDef
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Lift</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1124"></span><span>
</span><span id="line-1125"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#compositeToUniqueDef"><span class="hs-identifier hs-type">compositeToUniqueDef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundCompositeDef"><span class="hs-identifier hs-type">UnboundCompositeDef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#UniqueDef"><span class="hs-identifier hs-type">UniqueDef</span></a></span><span>
</span><span id="line-1126"></span><span id="compositeToUniqueDef"><span class="annot"><span class="annottext">compositeToUniqueDef :: EntityNameHS
-&gt; [UnboundFieldDef] -&gt; UnboundCompositeDef -&gt; UniqueDef
</span><a href="Database.Persist.Quasi.Internal.html#compositeToUniqueDef"><span class="hs-identifier hs-var hs-var">compositeToUniqueDef</span></a></span></span><span> </span><span id="local-6989586621679787644"><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787644"><span class="hs-identifier hs-var">entityName</span></a></span></span><span> </span><span id="local-6989586621679787645"><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787645"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundCompositeDef"><span class="hs-identifier hs-type">UnboundCompositeDef</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679787646"><span id="local-6989586621679787647"><span class="annot"><span class="annottext">[Text]
NonEmpty FieldNameHS
unboundCompositeCols :: UnboundCompositeDef -&gt; NonEmpty FieldNameHS
unboundCompositeAttrs :: UnboundCompositeDef -&gt; [Text]
unboundCompositeCols :: NonEmpty FieldNameHS
unboundCompositeAttrs :: [Text]
</span><a href="Database.Persist.Quasi.Internal.html#unboundCompositeCols"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1127"></span><span>    </span><span class="annot"><a href="Database.Persist.Types.Base.html#UniqueDef"><span class="hs-identifier hs-type">UniqueDef</span></a></span><span>
</span><span id="line-1128"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uniqueHaskell :: ConstraintNameHS
</span><a href="Database.Persist.Types.Base.html#uniqueHaskell"><span class="hs-identifier hs-var">uniqueHaskell</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1129"></span><span>            </span><span class="annot"><span class="annottext">Text -&gt; ConstraintNameHS
</span><a href="Database.Persist.Names.html#ConstraintNameHS"><span class="hs-identifier hs-var">ConstraintNameHS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityNameHS -&gt; Text
</span><a href="Database.Persist.Names.html#unEntityNameHS"><span class="hs-identifier hs-var">unEntityNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787644"><span class="hs-identifier hs-var">entityName</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PrimaryKey&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1130"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uniqueDBName :: ConstraintNameDB
</span><a href="Database.Persist.Types.Base.html#uniqueDBName"><span class="hs-identifier hs-var">uniqueDBName</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1131"></span><span>            </span><span class="annot"><span class="annottext">Text -&gt; ConstraintNameDB
</span><a href="Database.Persist.Names.html#ConstraintNameDB"><span class="hs-identifier hs-var">ConstraintNameDB</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;primary_key&quot;</span></span><span>
</span><span id="line-1132"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uniqueFields :: NonEmpty (FieldNameHS, FieldNameDB)
</span><a href="Database.Persist.Types.Base.html#uniqueFields"><span class="hs-identifier hs-var">uniqueFields</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1133"></span><span>            </span><span class="annot"><span class="annottext">(FieldNameHS -&gt; (FieldNameHS, FieldNameDB))
-&gt; NonEmpty FieldNameHS -&gt; NonEmpty (FieldNameHS, FieldNameDB)
forall a b. (a -&gt; b) -&gt; NonEmpty a -&gt; NonEmpty b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679787653"><span class="annot"><span class="annottext">FieldNameHS
</span><a href="#local-6989586621679787653"><span class="hs-identifier hs-var">hsName</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldNameHS
</span><a href="#local-6989586621679787653"><span class="hs-identifier hs-var">hsName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FieldNameHS -&gt; FieldNameDB
</span><a href="#local-6989586621679787654"><span class="hs-identifier hs-var">getDbNameFor</span></a></span><span> </span><span class="annot"><span class="annottext">FieldNameHS
</span><a href="#local-6989586621679787653"><span class="hs-identifier hs-var">hsName</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldNameHS
</span><a href="#local-6989586621679787646"><span class="hs-identifier hs-var">unboundCompositeCols</span></a></span><span>
</span><span id="line-1134"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uniqueAttrs :: [Text]
</span><a href="Database.Persist.Types.Base.html#uniqueAttrs"><span class="hs-identifier hs-var">uniqueAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1135"></span><span>            </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787647"><span class="hs-identifier hs-var">unboundCompositeAttrs</span></a></span><span>
</span><span id="line-1136"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1137"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1138"></span><span>    </span><span id="local-6989586621679787654"><span class="annot"><span class="annottext">getDbNameFor :: FieldNameHS -&gt; FieldNameDB
</span><a href="#local-6989586621679787654"><span class="hs-identifier hs-var hs-var">getDbNameFor</span></a></span></span><span> </span><span id="local-6989586621679787656"><span class="annot"><span class="annottext">FieldNameHS
</span><a href="#local-6989586621679787656"><span class="hs-identifier hs-var">hsName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1139"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(UnboundFieldDef -&gt; Maybe FieldNameDB)
-&gt; [UnboundFieldDef] -&gt; [FieldNameDB]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldNameHS -&gt; UnboundFieldDef -&gt; Maybe FieldNameDB
forall {m :: * -&gt; *}.
(Monad m, Alternative m) =&gt;
FieldNameHS -&gt; UnboundFieldDef -&gt; m FieldNameDB
</span><a href="#local-6989586621679787657"><span class="hs-identifier hs-var">matchHsName</span></a></span><span> </span><span class="annot"><span class="annottext">FieldNameHS
</span><a href="#local-6989586621679787656"><span class="hs-identifier hs-var">hsName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787645"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1140"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1141"></span><span>                </span><span class="annot"><span class="annottext">[Char] -&gt; FieldNameDB
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Unable to find `hsName` in fields&quot;</span></span><span>
</span><span id="line-1142"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679787658"><span class="annot"><span class="annottext">FieldNameDB
</span><a href="#local-6989586621679787658"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[FieldNameDB]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1143"></span><span>                </span><span class="annot"><span class="annottext">FieldNameDB
</span><a href="#local-6989586621679787658"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1144"></span><span>    </span><span id="local-6989586621679787657"><span class="annot"><span class="annottext">matchHsName :: FieldNameHS -&gt; UnboundFieldDef -&gt; m FieldNameDB
</span><a href="#local-6989586621679787657"><span class="hs-identifier hs-var hs-var">matchHsName</span></a></span></span><span> </span><span id="local-6989586621679787672"><span class="annot"><span class="annottext">FieldNameHS
</span><a href="#local-6989586621679787672"><span class="hs-identifier hs-var">hsName</span></a></span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679787673"><span id="local-6989586621679787674"><span id="local-6989586621679787675"><span id="local-6989586621679787676"><span id="local-6989586621679787677"><span id="local-6989586621679787678"><span id="local-6989586621679787679"><span id="local-6989586621679787680"><span class="annot"><span class="annottext">Bool
[FieldAttr]
Maybe Text
FieldNameHS
FieldNameDB
FieldCascade
FieldType
unboundFieldNameHS :: UnboundFieldDef -&gt; FieldNameHS
unboundFieldNameDB :: UnboundFieldDef -&gt; FieldNameDB
unboundFieldAttrs :: UnboundFieldDef -&gt; [FieldAttr]
unboundFieldStrict :: UnboundFieldDef -&gt; Bool
unboundFieldType :: UnboundFieldDef -&gt; FieldType
unboundFieldCascade :: UnboundFieldDef -&gt; FieldCascade
unboundFieldGenerated :: UnboundFieldDef -&gt; Maybe Text
unboundFieldComments :: UnboundFieldDef -&gt; Maybe Text
unboundFieldNameHS :: FieldNameHS
unboundFieldNameDB :: FieldNameDB
unboundFieldAttrs :: [FieldAttr]
unboundFieldStrict :: Bool
unboundFieldType :: FieldType
unboundFieldCascade :: FieldCascade
unboundFieldGenerated :: Maybe Text
unboundFieldComments :: Maybe Text
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldNameHS"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1145"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; m ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; m ()) -&gt; Bool -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldNameHS
</span><a href="#local-6989586621679787673"><span class="hs-identifier hs-var">unboundFieldNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">FieldNameHS -&gt; FieldNameHS -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">FieldNameHS
</span><a href="#local-6989586621679787672"><span class="hs-identifier hs-var">hsName</span></a></span><span>
</span><span id="line-1146"></span><span>        </span><span class="annot"><span class="annottext">FieldNameDB -&gt; m FieldNameDB
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">FieldNameDB
</span><a href="#local-6989586621679787674"><span class="hs-identifier hs-var">unboundFieldNameDB</span></a></span><span>
</span><span id="line-1147"></span><span>
</span><span id="line-1148"></span><span>
</span><span id="line-1149"></span><span>
</span><span id="line-1150"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeComposite"><span class="hs-identifier hs-type">takeComposite</span></a></span><span>
</span><span id="line-1151"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Names.html#FieldNameHS"><span class="hs-identifier hs-type">FieldNameHS</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1152"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-1153"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundCompositeDef"><span class="hs-identifier hs-type">UnboundCompositeDef</span></a></span><span>
</span><span id="line-1154"></span><span id="takeComposite"><span class="annot"><span class="annottext">takeComposite :: [FieldNameHS] -&gt; [Text] -&gt; UnboundCompositeDef
</span><a href="Database.Persist.Quasi.Internal.html#takeComposite"><span class="hs-identifier hs-var hs-var">takeComposite</span></a></span></span><span> </span><span id="local-6989586621679787681"><span class="annot"><span class="annottext">[FieldNameHS]
</span><a href="#local-6989586621679787681"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span id="local-6989586621679787682"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787682"><span class="hs-identifier hs-var">pkcols</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1155"></span><span>    </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundCompositeDef"><span class="hs-identifier hs-type">UnboundCompositeDef</span></a></span><span>
</span><span id="line-1156"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">unboundCompositeCols :: NonEmpty FieldNameHS
</span><a href="Database.Persist.Quasi.Internal.html#unboundCompositeCols"><span class="hs-identifier hs-var">unboundCompositeCols</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1157"></span><span>            </span><span class="annot"><span class="annottext">(Text -&gt; FieldNameHS) -&gt; NonEmpty Text -&gt; NonEmpty FieldNameHS
forall a b. (a -&gt; b) -&gt; NonEmpty a -&gt; NonEmpty b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[FieldNameHS] -&gt; Text -&gt; FieldNameHS
</span><a href="#local-6989586621679787683"><span class="hs-identifier hs-var">getDef</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldNameHS]
</span><a href="#local-6989586621679787681"><span class="hs-identifier hs-var">fields</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679787684"><span class="hs-identifier hs-var">neCols</span></a></span><span>
</span><span id="line-1158"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundCompositeAttrs :: [Text]
</span><a href="Database.Persist.Quasi.Internal.html#unboundCompositeAttrs"><span class="hs-identifier hs-var">unboundCompositeAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1159"></span><span>            </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787685"><span class="hs-identifier hs-var">attrs</span></a></span><span>
</span><span id="line-1160"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1161"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1162"></span><span>    </span><span id="local-6989586621679787684"><span class="annot"><span class="annottext">neCols :: NonEmpty Text
</span><a href="#local-6989586621679787684"><span class="hs-identifier hs-var hs-var">neCols</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1163"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Maybe (NonEmpty Text)
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NEL.nonEmpty</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787686"><span class="hs-identifier hs-var">cols</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1164"></span><span>            </span><span class="annot"><span class="annottext">Maybe (NonEmpty Text)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1165"></span><span>                </span><span class="annot"><span class="annottext">[Char] -&gt; NonEmpty Text
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;No fields provided for primary key&quot;</span></span><span>
</span><span id="line-1166"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679787687"><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679787687"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1167"></span><span>                </span><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679787687"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1168"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679787686"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787686"><span class="hs-identifier hs-var">cols</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787685"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787685"><span class="hs-identifier hs-var">attrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Bool) -&gt; [Text] -&gt; ([Text], [Text])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">break</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;!&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
</span><span class="hs-operator hs-var">`T.isPrefixOf`</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787682"><span class="hs-identifier hs-var">pkcols</span></a></span><span>
</span><span id="line-1169"></span><span>    </span><span id="local-6989586621679787683"><span class="annot"><span class="annottext">getDef :: [FieldNameHS] -&gt; Text -&gt; FieldNameHS
</span><a href="#local-6989586621679787683"><span class="hs-identifier hs-var hs-var">getDef</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621679787695"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787695"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; FieldNameHS
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; FieldNameHS) -&gt; [Char] -&gt; FieldNameHS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Unknown column in primary key constraint: &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787695"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1170"></span><span>    </span><span class="annot"><a href="#local-6989586621679787683"><span class="hs-identifier hs-var">getDef</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787696"><span class="annot"><span class="annottext">FieldNameHS
</span><a href="#local-6989586621679787696"><span class="hs-identifier hs-var">d</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679787697"><span class="annot"><span class="annottext">[FieldNameHS]
</span><a href="#local-6989586621679787697"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679787698"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787698"><span class="hs-identifier hs-var">t</span></a></span></span><span>
</span><span id="line-1171"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">FieldNameHS
</span><a href="#local-6989586621679787696"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">FieldNameHS -&gt; FieldNameHS -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; FieldNameHS
</span><a href="Database.Persist.Names.html#FieldNameHS"><span class="hs-identifier hs-var">FieldNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787698"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1172"></span><span>            </span><span class="hs-comment">-- TODO: check for nullability in later step</span><span>
</span><span id="line-1173"></span><span>            </span><span class="hs-comment">-- if nullable (fieldAttrs d) /= NotNullable</span><span>
</span><span id="line-1174"></span><span>            </span><span class="hs-comment">--     then error $ &quot;primary key column cannot be nullable: &quot; ++ show t ++ show fields</span><span>
</span><span id="line-1175"></span><span>            </span><span class="annot"><span class="annottext">FieldNameHS
</span><a href="#local-6989586621679787696"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1176"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1177"></span><span>            </span><span class="annot"><span class="annottext">[FieldNameHS] -&gt; Text -&gt; FieldNameHS
</span><a href="#local-6989586621679787683"><span class="hs-identifier hs-var">getDef</span></a></span><span> </span><span class="annot"><span class="annottext">[FieldNameHS]
</span><a href="#local-6989586621679787697"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787698"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1178"></span><span>
</span><span id="line-1179"></span><span class="hs-comment">-- Unique UppercaseConstraintName list of lowercasefields terminated</span><span>
</span><span id="line-1180"></span><span class="hs-comment">-- by ! or sql= such that a unique constraint can look like:</span><span>
</span><span id="line-1181"></span><span class="hs-comment">-- `UniqueTestNull fieldA fieldB sql=ConstraintNameInDatabase !force`</span><span>
</span><span id="line-1182"></span><span class="hs-comment">-- Here using sql= sets the name of the constraint.</span><span>
</span><span id="line-1183"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeUniq"><span class="hs-identifier hs-type">takeUniq</span></a></span><span>
</span><span id="line-1184"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span>
</span><span id="line-1185"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1186"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1187"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-1188"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#UniqueDef"><span class="hs-identifier hs-type">UniqueDef</span></a></span><span>
</span><span id="line-1189"></span><span id="takeUniq"><span class="annot"><span class="annottext">takeUniq :: PersistSettings
-&gt; Text -&gt; [UnboundFieldDef] -&gt; [Text] -&gt; Maybe UniqueDef
</span><a href="Database.Persist.Quasi.Internal.html#takeUniq"><span class="hs-identifier hs-var hs-var">takeUniq</span></a></span></span><span> </span><span id="local-6989586621679787699"><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787699"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679787700"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787700"><span class="hs-identifier hs-var">tableName</span></a></span></span><span> </span><span id="local-6989586621679787701"><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787701"><span class="hs-identifier hs-var">defs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787702"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787702"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679787703"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787703"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1190"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><a href="Database.Persist.Quasi.Internal.html#isCapitalizedText"><span class="hs-identifier hs-var">isCapitalizedText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787702"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1191"></span><span>        </span><span id="local-6989586621679787704"><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679787704"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty Text)
</span><a href="#local-6989586621679787705"><span class="hs-identifier hs-var">mfields</span></a></span><span>
</span><span id="line-1192"></span><span>        </span><span class="annot"><span class="annottext">UniqueDef -&gt; Maybe UniqueDef
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#UniqueDef"><span class="hs-identifier hs-type">UniqueDef</span></a></span><span>
</span><span id="line-1193"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">uniqueHaskell :: ConstraintNameHS
</span><a href="Database.Persist.Types.Base.html#uniqueHaskell"><span class="hs-identifier hs-var">uniqueHaskell</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1194"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; ConstraintNameHS
</span><a href="Database.Persist.Names.html#ConstraintNameHS"><span class="hs-identifier hs-var">ConstraintNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787702"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1195"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uniqueDBName :: ConstraintNameDB
</span><a href="Database.Persist.Types.Base.html#uniqueDBName"><span class="hs-identifier hs-var">uniqueDBName</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1196"></span><span>                </span><span class="annot"><span class="annottext">ConstraintNameDB
</span><a href="#local-6989586621679787706"><span class="hs-identifier hs-var">dbName</span></a></span><span>
</span><span id="line-1197"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uniqueFields :: NonEmpty (FieldNameHS, FieldNameDB)
</span><a href="Database.Persist.Types.Base.html#uniqueFields"><span class="hs-identifier hs-var">uniqueFields</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1198"></span><span>                </span><span class="annot"><span class="annottext">(Text -&gt; (FieldNameHS, FieldNameDB))
-&gt; NonEmpty Text -&gt; NonEmpty (FieldNameHS, FieldNameDB)
forall a b. (a -&gt; b) -&gt; NonEmpty a -&gt; NonEmpty b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679787707"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787707"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; FieldNameHS
</span><a href="Database.Persist.Names.html#FieldNameHS"><span class="hs-identifier hs-var">FieldNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787707"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[UnboundFieldDef] -&gt; Text -&gt; FieldNameDB
</span><a href="#local-6989586621679787708"><span class="hs-identifier hs-var">getDBName</span></a></span><span> </span><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787701"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787707"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NonEmpty Text
</span><a href="#local-6989586621679787704"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-1199"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">uniqueAttrs :: [Text]
</span><a href="Database.Persist.Types.Base.html#uniqueAttrs"><span class="hs-identifier hs-var">uniqueAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1200"></span><span>                </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787709"><span class="hs-identifier hs-var">attrs</span></a></span><span>
</span><span id="line-1201"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-1202"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1203"></span><span>    </span><span id="local-6989586621679787711"><span class="annot"><span class="annottext">isAttr :: Text -&gt; Bool
</span><a href="#local-6989586621679787711"><span class="hs-identifier hs-var hs-var">isAttr</span></a></span></span><span> </span><span id="local-6989586621679787712"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787712"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1204"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;!&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
</span><span class="hs-operator hs-var">`T.isPrefixOf`</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787712"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1205"></span><span>    </span><span id="local-6989586621679787714"><span class="annot"><span class="annottext">isSqlName :: Text -&gt; Bool
</span><a href="#local-6989586621679787714"><span class="hs-identifier hs-var hs-var">isSqlName</span></a></span></span><span> </span><span id="local-6989586621679787715"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787715"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1206"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;sql=&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
</span><span class="hs-operator hs-var">`T.isPrefixOf`</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787715"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1207"></span><span>    </span><span id="local-6989586621679787716"><span class="annot"><span class="annottext">isNonField :: Text -&gt; Bool
</span><a href="#local-6989586621679787716"><span class="hs-identifier hs-var hs-var">isNonField</span></a></span></span><span> </span><span id="local-6989586621679787717"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787717"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1208"></span><span>       </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><a href="#local-6989586621679787711"><span class="hs-identifier hs-var">isAttr</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787717"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><a href="#local-6989586621679787714"><span class="hs-identifier hs-var">isSqlName</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787717"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1209"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679787718"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787718"><span class="hs-identifier hs-var">fieldsList</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787719"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787719"><span class="hs-identifier hs-var">nonFields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1210"></span><span>        </span><span class="annot"><span class="annottext">(Text -&gt; Bool) -&gt; [Text] -&gt; ([Text], [Text])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">break</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><a href="#local-6989586621679787716"><span class="hs-identifier hs-var">isNonField</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787703"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1211"></span><span>    </span><span id="local-6989586621679787705"><span class="annot"><span class="annottext">mfields :: Maybe (NonEmpty Text)
</span><a href="#local-6989586621679787705"><span class="hs-identifier hs-var hs-var">mfields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1212"></span><span>        </span><span class="annot"><span class="annottext">[Text] -&gt; Maybe (NonEmpty Text)
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NEL.nonEmpty</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787718"><span class="hs-identifier hs-var">fieldsList</span></a></span><span>
</span><span id="line-1213"></span><span>
</span><span id="line-1214"></span><span>    </span><span id="local-6989586621679787709"><span class="annot"><span class="annottext">attrs :: [Text]
</span><a href="#local-6989586621679787709"><span class="hs-identifier hs-var hs-var">attrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Bool) -&gt; [Text] -&gt; [Text]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><a href="#local-6989586621679787711"><span class="hs-identifier hs-var">isAttr</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787719"><span class="hs-identifier hs-var">nonFields</span></a></span><span>
</span><span id="line-1215"></span><span>
</span><span id="line-1216"></span><span>    </span><span id="local-6989586621679787720"><span class="annot"><span class="annottext">usualDbName :: ConstraintNameDB
</span><a href="#local-6989586621679787720"><span class="hs-identifier hs-var hs-var">usualDbName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1217"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; ConstraintNameDB
</span><a href="Database.Persist.Names.html#ConstraintNameDB"><span class="hs-identifier hs-var">ConstraintNameDB</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ConstraintNameDB) -&gt; Text -&gt; ConstraintNameDB
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PersistSettings -&gt; Text -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psToDBName"><span class="hs-identifier hs-var">psToDBName</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787699"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787700"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
</span><span class="hs-operator hs-var">`T.append`</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787702"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1218"></span><span>    </span><span class="annot"><a href="#local-6989586621679787722"><span class="hs-identifier hs-type">sqlName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Database.Persist.Names.html#ConstraintNameDB"><span class="hs-identifier hs-type">ConstraintNameDB</span></a></span><span>
</span><span id="line-1219"></span><span>    </span><span id="local-6989586621679787722"><span class="annot"><span class="annottext">sqlName :: Maybe ConstraintNameDB
</span><a href="#local-6989586621679787722"><span class="hs-identifier hs-var hs-var">sqlName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1220"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Bool) -&gt; [Text] -&gt; Maybe Text
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Maybe a
</span><span class="hs-identifier hs-var">find</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><a href="#local-6989586621679787714"><span class="hs-identifier hs-var">isSqlName</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787719"><span class="hs-identifier hs-var">nonFields</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1221"></span><span>        </span><span class="annot"><span class="annottext">Maybe Text
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1222"></span><span>          </span><span class="annot"><span class="annottext">Maybe ConstraintNameDB
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1223"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679787723"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787723"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1224"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Text] -&gt; [Text]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; [Text]) -&gt; [Text] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Text -&gt; [Text]
Text -&gt; Text -&gt; [Text]
</span><span class="hs-identifier hs-var">T.splitOn</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;=&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787723"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1225"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679787726"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787726"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConstraintNameDB -&gt; Maybe ConstraintNameDB
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ConstraintNameDB
</span><a href="Database.Persist.Names.html#ConstraintNameDB"><span class="hs-identifier hs-var">ConstraintNameDB</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787726"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1226"></span><span>            </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ConstraintNameDB
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1227"></span><span>    </span><span id="local-6989586621679787706"><span class="annot"><span class="annottext">dbName :: ConstraintNameDB
</span><a href="#local-6989586621679787706"><span class="hs-identifier hs-var hs-var">dbName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstraintNameDB -&gt; Maybe ConstraintNameDB -&gt; ConstraintNameDB
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">ConstraintNameDB
</span><a href="#local-6989586621679787720"><span class="hs-identifier hs-var">usualDbName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ConstraintNameDB
</span><a href="#local-6989586621679787722"><span class="hs-identifier hs-var">sqlName</span></a></span><span>
</span><span id="line-1228"></span><span>
</span><span id="line-1229"></span><span>    </span><span id="local-6989586621679787708"><span class="annot"><span class="annottext">getDBName :: [UnboundFieldDef] -&gt; Text -&gt; FieldNameDB
</span><a href="#local-6989586621679787708"><span class="hs-identifier hs-var hs-var">getDBName</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621679787727"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787727"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; FieldNameDB
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; FieldNameDB) -&gt; [Char] -&gt; FieldNameDB
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; [UnboundFieldDef] -&gt; Text -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#unknownUniqueColumnError"><span class="hs-identifier hs-var">unknownUniqueColumnError</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787727"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787701"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787702"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1230"></span><span>    </span><span class="annot"><a href="#local-6989586621679787708"><span class="hs-identifier hs-var">getDBName</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787729"><span class="annot"><span class="annottext">UnboundFieldDef
</span><a href="#local-6989586621679787729"><span class="hs-identifier hs-var">d</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679787730"><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787730"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679787731"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787731"><span class="hs-identifier hs-var">t</span></a></span></span><span>
</span><span id="line-1231"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">UnboundFieldDef -&gt; FieldNameHS
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldNameHS"><span class="hs-identifier hs-var">unboundFieldNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">UnboundFieldDef
</span><a href="#local-6989586621679787729"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">FieldNameHS -&gt; FieldNameHS -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; FieldNameHS
</span><a href="Database.Persist.Names.html#FieldNameHS"><span class="hs-identifier hs-var">FieldNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787731"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1232"></span><span>            </span><span class="annot"><span class="annottext">UnboundFieldDef -&gt; FieldNameDB
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldNameDB"><span class="hs-identifier hs-var">unboundFieldNameDB</span></a></span><span> </span><span class="annot"><span class="annottext">UnboundFieldDef
</span><a href="#local-6989586621679787729"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1233"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1234"></span><span>            </span><span class="annot"><span class="annottext">[UnboundFieldDef] -&gt; Text -&gt; FieldNameDB
</span><a href="#local-6989586621679787708"><span class="hs-identifier hs-var">getDBName</span></a></span><span> </span><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787730"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787731"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1235"></span><span>
</span><span id="line-1236"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeUniq"><span class="hs-identifier hs-var">takeUniq</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679787732"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787732"><span class="hs-identifier hs-var">tableName</span></a></span></span><span> </span><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679787733"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787733"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1237"></span><span>  </span><span class="annot"><span class="annottext">[Char] -&gt; Maybe UniqueDef
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Maybe UniqueDef) -&gt; [Char] -&gt; Maybe UniqueDef
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;invalid unique constraint on table[&quot;</span></span><span>
</span><span id="line-1238"></span><span>          </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787732"><span class="hs-identifier hs-var">tableName</span></a></span><span>
</span><span id="line-1239"></span><span>          </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;] expecting an uppercase constraint name xs=&quot;</span></span><span>
</span><span id="line-1240"></span><span>          </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787733"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1241"></span><span>
</span><span id="line-1242"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#unknownUniqueColumnError"><span class="hs-identifier hs-type">unknownUniqueColumnError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1243"></span><span id="unknownUniqueColumnError"><span class="annot"><span class="annottext">unknownUniqueColumnError :: Text -&gt; [UnboundFieldDef] -&gt; Text -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#unknownUniqueColumnError"><span class="hs-identifier hs-var hs-var">unknownUniqueColumnError</span></a></span></span><span> </span><span id="local-6989586621679787734"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787734"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679787735"><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787735"><span class="hs-identifier hs-var">defs</span></a></span></span><span> </span><span id="local-6989586621679787736"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787736"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1244"></span><span>    </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Unknown column in \&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787736"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot; constraint: \&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787734"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span>
</span><span id="line-1245"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; possible fields: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnboundFieldDef -&gt; Text
</span><a href="#local-6989586621679787737"><span class="hs-identifier hs-var">toFieldName</span></a></span><span> </span><span class="annot"><span class="annottext">(UnboundFieldDef -&gt; Text) -&gt; [UnboundFieldDef] -&gt; [Text]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[UnboundFieldDef]
</span><a href="#local-6989586621679787735"><span class="hs-identifier hs-var">defs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1246"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1247"></span><span>        </span><span class="annot"><a href="#local-6989586621679787737"><span class="hs-identifier hs-type">toFieldName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1248"></span><span>        </span><span id="local-6989586621679787737"><span class="annot"><span class="annottext">toFieldName :: UnboundFieldDef -&gt; Text
</span><a href="#local-6989586621679787737"><span class="hs-identifier hs-var hs-var">toFieldName</span></a></span></span><span> </span><span id="local-6989586621679787738"><span class="annot"><span class="annottext">UnboundFieldDef
</span><a href="#local-6989586621679787738"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1249"></span><span>            </span><span class="annot"><span class="annottext">FieldNameHS -&gt; Text
</span><a href="Database.Persist.Names.html#unFieldNameHS"><span class="hs-identifier hs-var">unFieldNameHS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UnboundFieldDef -&gt; FieldNameHS
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldNameHS"><span class="hs-identifier hs-var">unboundFieldNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">UnboundFieldDef
</span><a href="#local-6989586621679787738"><span class="hs-identifier hs-var">fd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1250"></span><span>
</span><span id="line-1251"></span><span class="hs-comment">-- | Define an explicit foreign key reference.</span><span>
</span><span id="line-1252"></span><span class="hs-comment">--</span><span>
</span><span id="line-1253"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1254"></span><span class="hs-comment">-- User</span><span>
</span><span id="line-1255"></span><span class="hs-comment">--     name Text</span><span>
</span><span id="line-1256"></span><span class="hs-comment">--     email Text</span><span>
</span><span id="line-1257"></span><span class="hs-comment">--</span><span>
</span><span id="line-1258"></span><span class="hs-comment">--     Primary name email</span><span>
</span><span id="line-1259"></span><span class="hs-comment">--</span><span>
</span><span id="line-1260"></span><span class="hs-comment">-- Dog</span><span>
</span><span id="line-1261"></span><span class="hs-comment">--     ownerName Text</span><span>
</span><span id="line-1262"></span><span class="hs-comment">--     ownerEmail Text</span><span>
</span><span id="line-1263"></span><span class="hs-comment">--</span><span>
</span><span id="line-1264"></span><span class="hs-comment">--     Foreign User fk_dog_user ownerName ownerEmail</span><span>
</span><span id="line-1265"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-1266"></span><span class="hs-comment">--</span><span>
</span><span id="line-1267"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-1268"></span><span class="hs-keyword">data</span><span> </span><span id="UnboundForeignDef"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignDef"><span class="hs-identifier hs-var">UnboundForeignDef</span></a></span></span><span>
</span><span id="line-1269"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="UnboundForeignDef"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignDef"><span class="hs-identifier hs-var">UnboundForeignDef</span></a></span></span><span>
</span><span id="line-1270"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="unboundForeignFields"><span class="annot"><span class="annottext">UnboundForeignDef -&gt; UnboundForeignFieldList
</span><a href="Database.Persist.Quasi.Internal.html#unboundForeignFields"><span class="hs-identifier hs-var hs-var">unboundForeignFields</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignFieldList"><span class="hs-identifier hs-type">UnboundForeignFieldList</span></a></span><span>
</span><span id="line-1271"></span><span>    </span><span class="hs-comment">-- ^ Fields in the source entity.</span><span>
</span><span id="line-1272"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1273"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-1274"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="unboundForeignDef"><span class="annot"><span class="annottext">UnboundForeignDef -&gt; ForeignDef
</span><a href="Database.Persist.Quasi.Internal.html#unboundForeignDef"><span class="hs-identifier hs-var hs-var">unboundForeignDef</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#ForeignDef"><span class="hs-identifier hs-type">ForeignDef</span></a></span><span>
</span><span id="line-1275"></span><span>    </span><span class="hs-comment">-- ^ The 'ForeignDef' which needs information filled in.</span><span>
</span><span id="line-1276"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1277"></span><span>    </span><span class="hs-comment">-- This value is unreliable. See the parsing code to see what data is filled</span><span>
</span><span id="line-1278"></span><span>    </span><span class="hs-comment">-- in here.</span><span>
</span><span id="line-1279"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1280"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-1281"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1282"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787745"><span id="local-6989586621679787751"><span class="annot"><span class="annottext">UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool
(UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool)
-&gt; (UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool)
-&gt; Eq UnboundForeignDef
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool
== :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool
$c/= :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool
/= :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787756"><span id="local-6989586621679787762"><span id="local-6989586621679787766"><span id="local-6989586621679787769"><span id="local-6989586621679787772"><span id="local-6989586621679787775"><span id="local-6989586621679787778"><span class="annot"><span class="annottext">Eq UnboundForeignDef
Eq UnboundForeignDef =&gt;
(UnboundForeignDef -&gt; UnboundForeignDef -&gt; Ordering)
-&gt; (UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool)
-&gt; (UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool)
-&gt; (UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool)
-&gt; (UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool)
-&gt; (UnboundForeignDef -&gt; UnboundForeignDef -&gt; UnboundForeignDef)
-&gt; (UnboundForeignDef -&gt; UnboundForeignDef -&gt; UnboundForeignDef)
-&gt; Ord UnboundForeignDef
UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool
UnboundForeignDef -&gt; UnboundForeignDef -&gt; Ordering
UnboundForeignDef -&gt; UnboundForeignDef -&gt; UnboundForeignDef
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; Ordering
compare :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; Ordering
$c&lt; :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool
&lt; :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool
$c&lt;= :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool
&lt;= :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool
$c&gt; :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool
&gt; :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool
$c&gt;= :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool
&gt;= :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; Bool
$cmax :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; UnboundForeignDef
max :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; UnboundForeignDef
$cmin :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; UnboundForeignDef
min :: UnboundForeignDef -&gt; UnboundForeignDef -&gt; UnboundForeignDef
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787781"><span id="local-6989586621679787788"><span id="local-6989586621679787791"><span class="annot"><span class="annottext">Int -&gt; UnboundForeignDef -&gt; ShowS
[UnboundForeignDef] -&gt; ShowS
UnboundForeignDef -&gt; [Char]
(Int -&gt; UnboundForeignDef -&gt; ShowS)
-&gt; (UnboundForeignDef -&gt; [Char])
-&gt; ([UnboundForeignDef] -&gt; ShowS)
-&gt; Show UnboundForeignDef
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; UnboundForeignDef -&gt; ShowS
showsPrec :: Int -&gt; UnboundForeignDef -&gt; ShowS
$cshow :: UnboundForeignDef -&gt; [Char]
show :: UnboundForeignDef -&gt; [Char]
$cshowList :: [UnboundForeignDef] -&gt; ShowS
showList :: [UnboundForeignDef] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787794"><span id="local-6989586621679787804"><span class="annot"><span class="annottext">(forall (m :: * -&gt; *). Quote m =&gt; UnboundForeignDef -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *).
    Quote m =&gt;
    UnboundForeignDef -&gt; Code m UnboundForeignDef)
-&gt; Lift UnboundForeignDef
forall t.
(forall (m :: * -&gt; *). Quote m =&gt; t -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; t -&gt; Code m t) -&gt; Lift t
forall (m :: * -&gt; *). Quote m =&gt; UnboundForeignDef -&gt; m Exp
forall (m :: * -&gt; *).
Quote m =&gt;
UnboundForeignDef -&gt; Code m UnboundForeignDef
$clift :: forall (m :: * -&gt; *). Quote m =&gt; UnboundForeignDef -&gt; m Exp
lift :: forall (m :: * -&gt; *). Quote m =&gt; UnboundForeignDef -&gt; m Exp
$cliftTyped :: forall (m :: * -&gt; *).
Quote m =&gt;
UnboundForeignDef -&gt; Code m UnboundForeignDef
liftTyped :: forall (m :: * -&gt; *).
Quote m =&gt;
UnboundForeignDef -&gt; Code m UnboundForeignDef
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Lift</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1283"></span><span>
</span><span id="line-1284"></span><span class="annot"><span class="hs-comment">-- | A list of fields present on the foreign reference.</span></span><span>
</span><span id="line-1285"></span><span class="hs-keyword">data</span><span> </span><span id="UnboundForeignFieldList"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignFieldList"><span class="hs-identifier hs-var">UnboundForeignFieldList</span></a></span></span><span>
</span><span id="line-1286"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span id="FieldListImpliedId"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#FieldListImpliedId"><span class="hs-identifier hs-var">FieldListImpliedId</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Database.Persist.Names.html#FieldNameHS"><span class="hs-identifier hs-type">FieldNameHS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1287"></span><span>    </span><span class="hs-comment">-- ^ If no @References@ keyword is supplied, then it is assumed that you are</span><span>
</span><span id="line-1288"></span><span>    </span><span class="hs-comment">-- referring to the @Primary@ key or @Id@ of the target entity.</span><span>
</span><span id="line-1289"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1290"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-1291"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span id="FieldListHasReferences"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#FieldListHasReferences"><span class="hs-identifier hs-var">FieldListHasReferences</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ForeignFieldReference"><span class="hs-identifier hs-type">ForeignFieldReference</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1292"></span><span>    </span><span class="hs-comment">-- ^ You can specify the exact columns you're referring to here, if they</span><span>
</span><span id="line-1293"></span><span>    </span><span class="hs-comment">-- aren't part of a primary key. Most databases expect a unique index on the</span><span>
</span><span id="line-1294"></span><span>    </span><span class="hs-comment">-- columns you refer to, but Persistent doesnt' check that.</span><span>
</span><span id="line-1295"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1296"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-1297"></span><span>    </span><span class="hs-comment">-- User</span><span>
</span><span id="line-1298"></span><span>    </span><span class="hs-comment">--     Id           UUID default=&quot;uuid_generate_v1mc()&quot;</span><span>
</span><span id="line-1299"></span><span>    </span><span class="hs-comment">--     name         Text</span><span>
</span><span id="line-1300"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1301"></span><span>    </span><span class="hs-comment">--     UniqueName name</span><span>
</span><span id="line-1302"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1303"></span><span>    </span><span class="hs-comment">-- Dog</span><span>
</span><span id="line-1304"></span><span>    </span><span class="hs-comment">--     ownerName    Text</span><span>
</span><span id="line-1305"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1306"></span><span>    </span><span class="hs-comment">--     Foreign User fk_dog_user ownerName References name</span><span>
</span><span id="line-1307"></span><span>    </span><span class="hs-comment">-- @</span><span>
</span><span id="line-1308"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1309"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-1310"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787814"><span id="local-6989586621679787819"><span class="annot"><span class="annottext">UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool
(UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool)
-&gt; (UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool)
-&gt; Eq UnboundForeignFieldList
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool
== :: UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool
$c/= :: UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool
/= :: UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787825"><span id="local-6989586621679787831"><span id="local-6989586621679787837"><span id="local-6989586621679787840"><span id="local-6989586621679787843"><span id="local-6989586621679787846"><span id="local-6989586621679787849"><span class="annot"><span class="annottext">Eq UnboundForeignFieldList
Eq UnboundForeignFieldList =&gt;
(UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Ordering)
-&gt; (UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool)
-&gt; (UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool)
-&gt; (UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool)
-&gt; (UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool)
-&gt; (UnboundForeignFieldList
    -&gt; UnboundForeignFieldList -&gt; UnboundForeignFieldList)
-&gt; (UnboundForeignFieldList
    -&gt; UnboundForeignFieldList -&gt; UnboundForeignFieldList)
-&gt; Ord UnboundForeignFieldList
UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool
UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Ordering
UnboundForeignFieldList
-&gt; UnboundForeignFieldList -&gt; UnboundForeignFieldList
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Ordering
compare :: UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Ordering
$c&lt; :: UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool
&lt; :: UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool
$c&lt;= :: UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool
&lt;= :: UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool
$c&gt; :: UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool
&gt; :: UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool
$c&gt;= :: UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool
&gt;= :: UnboundForeignFieldList -&gt; UnboundForeignFieldList -&gt; Bool
$cmax :: UnboundForeignFieldList
-&gt; UnboundForeignFieldList -&gt; UnboundForeignFieldList
max :: UnboundForeignFieldList
-&gt; UnboundForeignFieldList -&gt; UnboundForeignFieldList
$cmin :: UnboundForeignFieldList
-&gt; UnboundForeignFieldList -&gt; UnboundForeignFieldList
min :: UnboundForeignFieldList
-&gt; UnboundForeignFieldList -&gt; UnboundForeignFieldList
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787853"><span id="local-6989586621679787861"><span id="local-6989586621679787864"><span class="annot"><span class="annottext">Int -&gt; UnboundForeignFieldList -&gt; ShowS
[UnboundForeignFieldList] -&gt; ShowS
UnboundForeignFieldList -&gt; [Char]
(Int -&gt; UnboundForeignFieldList -&gt; ShowS)
-&gt; (UnboundForeignFieldList -&gt; [Char])
-&gt; ([UnboundForeignFieldList] -&gt; ShowS)
-&gt; Show UnboundForeignFieldList
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; UnboundForeignFieldList -&gt; ShowS
showsPrec :: Int -&gt; UnboundForeignFieldList -&gt; ShowS
$cshow :: UnboundForeignFieldList -&gt; [Char]
show :: UnboundForeignFieldList -&gt; [Char]
$cshowList :: [UnboundForeignFieldList] -&gt; ShowS
showList :: [UnboundForeignFieldList] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787868"><span id="local-6989586621679787879"><span class="annot"><span class="annottext">(forall (m :: * -&gt; *). Quote m =&gt; UnboundForeignFieldList -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *).
    Quote m =&gt;
    UnboundForeignFieldList -&gt; Code m UnboundForeignFieldList)
-&gt; Lift UnboundForeignFieldList
forall t.
(forall (m :: * -&gt; *). Quote m =&gt; t -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; t -&gt; Code m t) -&gt; Lift t
forall (m :: * -&gt; *). Quote m =&gt; UnboundForeignFieldList -&gt; m Exp
forall (m :: * -&gt; *).
Quote m =&gt;
UnboundForeignFieldList -&gt; Code m UnboundForeignFieldList
$clift :: forall (m :: * -&gt; *). Quote m =&gt; UnboundForeignFieldList -&gt; m Exp
lift :: forall (m :: * -&gt; *). Quote m =&gt; UnboundForeignFieldList -&gt; m Exp
$cliftTyped :: forall (m :: * -&gt; *).
Quote m =&gt;
UnboundForeignFieldList -&gt; Code m UnboundForeignFieldList
liftTyped :: forall (m :: * -&gt; *).
Quote m =&gt;
UnboundForeignFieldList -&gt; Code m UnboundForeignFieldList
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Lift</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1311"></span><span>
</span><span id="line-1312"></span><span class="hs-comment">-- | A pairing of the 'FieldNameHS' for the source table to the 'FieldNameHS'</span><span>
</span><span id="line-1313"></span><span class="hs-comment">-- for the target table.</span><span>
</span><span id="line-1314"></span><span class="hs-comment">--</span><span>
</span><span id="line-1315"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-1316"></span><span class="hs-keyword">data</span><span> </span><span id="ForeignFieldReference"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ForeignFieldReference"><span class="hs-identifier hs-var">ForeignFieldReference</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1317"></span><span>    </span><span id="ForeignFieldReference"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ForeignFieldReference"><span class="hs-identifier hs-var">ForeignFieldReference</span></a></span></span><span>
</span><span id="line-1318"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="ffrSourceField"><span class="annot"><span class="annottext">ForeignFieldReference -&gt; FieldNameHS
</span><a href="Database.Persist.Quasi.Internal.html#ffrSourceField"><span class="hs-identifier hs-var hs-var">ffrSourceField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#FieldNameHS"><span class="hs-identifier hs-type">FieldNameHS</span></a></span><span>
</span><span id="line-1319"></span><span>    </span><span class="hs-comment">-- ^ The column on the source table.</span><span>
</span><span id="line-1320"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1321"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-1322"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="ffrTargetField"><span class="annot"><span class="annottext">ForeignFieldReference -&gt; FieldNameHS
</span><a href="Database.Persist.Quasi.Internal.html#ffrTargetField"><span class="hs-identifier hs-var hs-var">ffrTargetField</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#FieldNameHS"><span class="hs-identifier hs-type">FieldNameHS</span></a></span><span>
</span><span id="line-1323"></span><span>    </span><span class="hs-comment">-- ^ The column on the target table.</span><span>
</span><span id="line-1324"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-1325"></span><span>    </span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-1326"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1327"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787894"><span id="local-6989586621679787898"><span class="annot"><span class="annottext">ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool
(ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool)
-&gt; (ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool)
-&gt; Eq ForeignFieldReference
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool
== :: ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool
$c/= :: ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool
/= :: ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787903"><span id="local-6989586621679787907"><span id="local-6989586621679787911"><span id="local-6989586621679787914"><span id="local-6989586621679787917"><span id="local-6989586621679787920"><span id="local-6989586621679787923"><span class="annot"><span class="annottext">Eq ForeignFieldReference
Eq ForeignFieldReference =&gt;
(ForeignFieldReference -&gt; ForeignFieldReference -&gt; Ordering)
-&gt; (ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool)
-&gt; (ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool)
-&gt; (ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool)
-&gt; (ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool)
-&gt; (ForeignFieldReference
    -&gt; ForeignFieldReference -&gt; ForeignFieldReference)
-&gt; (ForeignFieldReference
    -&gt; ForeignFieldReference -&gt; ForeignFieldReference)
-&gt; Ord ForeignFieldReference
ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool
ForeignFieldReference -&gt; ForeignFieldReference -&gt; Ordering
ForeignFieldReference
-&gt; ForeignFieldReference -&gt; ForeignFieldReference
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: ForeignFieldReference -&gt; ForeignFieldReference -&gt; Ordering
compare :: ForeignFieldReference -&gt; ForeignFieldReference -&gt; Ordering
$c&lt; :: ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool
&lt; :: ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool
$c&lt;= :: ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool
&lt;= :: ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool
$c&gt; :: ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool
&gt; :: ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool
$c&gt;= :: ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool
&gt;= :: ForeignFieldReference -&gt; ForeignFieldReference -&gt; Bool
$cmax :: ForeignFieldReference
-&gt; ForeignFieldReference -&gt; ForeignFieldReference
max :: ForeignFieldReference
-&gt; ForeignFieldReference -&gt; ForeignFieldReference
$cmin :: ForeignFieldReference
-&gt; ForeignFieldReference -&gt; ForeignFieldReference
min :: ForeignFieldReference
-&gt; ForeignFieldReference -&gt; ForeignFieldReference
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787926"><span id="local-6989586621679787931"><span id="local-6989586621679787934"><span class="annot"><span class="annottext">Int -&gt; ForeignFieldReference -&gt; ShowS
[ForeignFieldReference] -&gt; ShowS
ForeignFieldReference -&gt; [Char]
(Int -&gt; ForeignFieldReference -&gt; ShowS)
-&gt; (ForeignFieldReference -&gt; [Char])
-&gt; ([ForeignFieldReference] -&gt; ShowS)
-&gt; Show ForeignFieldReference
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; [Char]) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; ForeignFieldReference -&gt; ShowS
showsPrec :: Int -&gt; ForeignFieldReference -&gt; ShowS
$cshow :: ForeignFieldReference -&gt; [Char]
show :: ForeignFieldReference -&gt; [Char]
$cshowList :: [ForeignFieldReference] -&gt; ShowS
showList :: [ForeignFieldReference] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787937"><span id="local-6989586621679787945"><span class="annot"><span class="annottext">(forall (m :: * -&gt; *). Quote m =&gt; ForeignFieldReference -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *).
    Quote m =&gt;
    ForeignFieldReference -&gt; Code m ForeignFieldReference)
-&gt; Lift ForeignFieldReference
forall t.
(forall (m :: * -&gt; *). Quote m =&gt; t -&gt; m Exp)
-&gt; (forall (m :: * -&gt; *). Quote m =&gt; t -&gt; Code m t) -&gt; Lift t
forall (m :: * -&gt; *). Quote m =&gt; ForeignFieldReference -&gt; m Exp
forall (m :: * -&gt; *).
Quote m =&gt;
ForeignFieldReference -&gt; Code m ForeignFieldReference
$clift :: forall (m :: * -&gt; *). Quote m =&gt; ForeignFieldReference -&gt; m Exp
lift :: forall (m :: * -&gt; *). Quote m =&gt; ForeignFieldReference -&gt; m Exp
$cliftTyped :: forall (m :: * -&gt; *).
Quote m =&gt;
ForeignFieldReference -&gt; Code m ForeignFieldReference
liftTyped :: forall (m :: * -&gt; *).
Quote m =&gt;
ForeignFieldReference -&gt; Code m ForeignFieldReference
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Lift</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1328"></span><span>
</span><span id="line-1329"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#unbindForeignDef"><span class="hs-identifier hs-type">unbindForeignDef</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#ForeignDef"><span class="hs-identifier hs-type">ForeignDef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignDef"><span class="hs-identifier hs-type">UnboundForeignDef</span></a></span><span>
</span><span id="line-1330"></span><span id="unbindForeignDef"><span class="annot"><span class="annottext">unbindForeignDef :: ForeignDef -&gt; UnboundForeignDef
</span><a href="Database.Persist.Quasi.Internal.html#unbindForeignDef"><span class="hs-identifier hs-var hs-var">unbindForeignDef</span></a></span></span><span> </span><span id="local-6989586621679787952"><span class="annot"><span class="annottext">ForeignDef
</span><a href="#local-6989586621679787952"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1331"></span><span>    </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignDef"><span class="hs-identifier hs-type">UnboundForeignDef</span></a></span><span>
</span><span id="line-1332"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">unboundForeignFields :: UnboundForeignFieldList
</span><a href="Database.Persist.Quasi.Internal.html#unboundForeignFields"><span class="hs-identifier hs-var">unboundForeignFields</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1333"></span><span>            </span><span class="annot"><span class="annottext">NonEmpty ForeignFieldReference -&gt; UnboundForeignFieldList
</span><a href="Database.Persist.Quasi.Internal.html#FieldListHasReferences"><span class="hs-identifier hs-var">FieldListHasReferences</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty ForeignFieldReference -&gt; UnboundForeignFieldList)
-&gt; NonEmpty ForeignFieldReference -&gt; UnboundForeignFieldList
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[ForeignFieldReference] -&gt; NonEmpty ForeignFieldReference
forall a. HasCallStack =&gt; [a] -&gt; NonEmpty a
</span><span class="hs-identifier hs-var">NEL.fromList</span></span><span> </span><span class="annot"><span class="annottext">([ForeignFieldReference] -&gt; NonEmpty ForeignFieldReference)
-&gt; [ForeignFieldReference] -&gt; NonEmpty ForeignFieldReference
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(((FieldNameHS, FieldNameDB), (FieldNameHS, FieldNameDB))
 -&gt; ForeignFieldReference)
-&gt; [((FieldNameHS, FieldNameDB), (FieldNameHS, FieldNameDB))]
-&gt; [ForeignFieldReference]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((FieldNameHS, FieldNameDB), (FieldNameHS, FieldNameDB))
-&gt; ForeignFieldReference
forall {b} {b}.
((FieldNameHS, b), (FieldNameHS, b)) -&gt; ForeignFieldReference
</span><a href="#local-6989586621679787954"><span class="hs-identifier hs-var">mk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForeignDef
-&gt; [((FieldNameHS, FieldNameDB), (FieldNameHS, FieldNameDB))]
</span><a href="Database.Persist.Types.Base.html#foreignFields"><span class="hs-identifier hs-var">foreignFields</span></a></span><span> </span><span class="annot"><span class="annottext">ForeignDef
</span><a href="#local-6989586621679787952"><span class="hs-identifier hs-var">fd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1334"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundForeignDef :: ForeignDef
</span><a href="Database.Persist.Quasi.Internal.html#unboundForeignDef"><span class="hs-identifier hs-var">unboundForeignDef</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1335"></span><span>            </span><span class="annot"><span class="annottext">ForeignDef
</span><a href="#local-6989586621679787952"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-1336"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-1337"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1338"></span><span>    </span><span id="local-6989586621679787954"><span class="annot"><span class="annottext">mk :: ((FieldNameHS, b), (FieldNameHS, b)) -&gt; ForeignFieldReference
</span><a href="#local-6989586621679787954"><span class="hs-identifier hs-var hs-var">mk</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621679787956"><span class="annot"><span class="annottext">FieldNameHS
</span><a href="#local-6989586621679787956"><span class="hs-identifier hs-var">fH</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787957"><span class="annot"><span class="annottext">FieldNameHS
</span><a href="#local-6989586621679787957"><span class="hs-identifier hs-var">pH</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span>
</span><span id="line-1339"></span><span>        </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#ForeignFieldReference"><span class="hs-identifier hs-type">ForeignFieldReference</span></a></span><span>
</span><span id="line-1340"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ffrSourceField :: FieldNameHS
</span><a href="Database.Persist.Quasi.Internal.html#ffrSourceField"><span class="hs-identifier hs-var">ffrSourceField</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldNameHS
</span><a href="#local-6989586621679787956"><span class="hs-identifier hs-var">fH</span></a></span><span>
</span><span id="line-1341"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ffrTargetField :: FieldNameHS
</span><a href="Database.Persist.Quasi.Internal.html#ffrTargetField"><span class="hs-identifier hs-var">ffrTargetField</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FieldNameHS
</span><a href="#local-6989586621679787957"><span class="hs-identifier hs-var">pH</span></a></span><span>
</span><span id="line-1342"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-1343"></span><span>
</span><span id="line-1344"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#mkUnboundForeignFieldList"><span class="hs-identifier hs-type">mkUnboundForeignFieldList</span></a></span><span>
</span><span id="line-1345"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-1346"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-1347"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignFieldList"><span class="hs-identifier hs-type">UnboundForeignFieldList</span></a></span><span>
</span><span id="line-1348"></span><span id="mkUnboundForeignFieldList"><span class="annot"><span class="annottext">mkUnboundForeignFieldList :: [Text] -&gt; [Text] -&gt; Either [Char] UnboundForeignFieldList
</span><a href="Database.Persist.Quasi.Internal.html#mkUnboundForeignFieldList"><span class="hs-identifier hs-var hs-var">mkUnboundForeignFieldList</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Text -&gt; FieldNameHS) -&gt; [Text] -&gt; [FieldNameHS]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; FieldNameHS
</span><a href="Database.Persist.Names.html#FieldNameHS"><span class="hs-identifier hs-var">FieldNameHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679787959"><span class="annot"><span class="annottext">[FieldNameHS]
</span><a href="#local-6989586621679787959"><span class="hs-identifier hs-var">source</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Text -&gt; FieldNameHS) -&gt; [Text] -&gt; [FieldNameHS]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; FieldNameHS
</span><a href="Database.Persist.Names.html#FieldNameHS"><span class="hs-identifier hs-var">FieldNameHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679787960"><span class="annot"><span class="annottext">[FieldNameHS]
</span><a href="#local-6989586621679787960"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1349"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[FieldNameHS] -&gt; Maybe (NonEmpty FieldNameHS)
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NEL.nonEmpty</span></span><span> </span><span class="annot"><span class="annottext">[FieldNameHS]
</span><a href="#local-6989586621679787959"><span class="hs-identifier hs-var">source</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1350"></span><span>        </span><span class="annot"><span class="annottext">Maybe (NonEmpty FieldNameHS)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1351"></span><span>            </span><span class="annot"><span class="annottext">[Char] -&gt; Either [Char] UnboundForeignFieldList
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;No fields on foreign reference.&quot;</span></span><span>
</span><span id="line-1352"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679787961"><span class="annot"><span class="annottext">NonEmpty FieldNameHS
</span><a href="#local-6989586621679787961"><span class="hs-identifier hs-var">sources</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1353"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[FieldNameHS] -&gt; Maybe (NonEmpty FieldNameHS)
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NEL.nonEmpty</span></span><span> </span><span class="annot"><span class="annottext">[FieldNameHS]
</span><a href="#local-6989586621679787960"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1354"></span><span>                </span><span class="annot"><span class="annottext">Maybe (NonEmpty FieldNameHS)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1355"></span><span>                    </span><span class="annot"><span class="annottext">UnboundForeignFieldList -&gt; Either [Char] UnboundForeignFieldList
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(UnboundForeignFieldList -&gt; Either [Char] UnboundForeignFieldList)
-&gt; UnboundForeignFieldList -&gt; Either [Char] UnboundForeignFieldList
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldNameHS -&gt; UnboundForeignFieldList
</span><a href="Database.Persist.Quasi.Internal.html#FieldListImpliedId"><span class="hs-identifier hs-var">FieldListImpliedId</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldNameHS
</span><a href="#local-6989586621679787961"><span class="hs-identifier hs-var">sources</span></a></span><span>
</span><span id="line-1356"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679787962"><span class="annot"><span class="annottext">NonEmpty FieldNameHS
</span><a href="#local-6989586621679787962"><span class="hs-identifier hs-var">targets</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1357"></span><span>                    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldNameHS -&gt; Int
forall a. NonEmpty a -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldNameHS
</span><a href="#local-6989586621679787962"><span class="hs-identifier hs-var">targets</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldNameHS -&gt; Int
forall a. NonEmpty a -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldNameHS
</span><a href="#local-6989586621679787961"><span class="hs-identifier hs-var">sources</span></a></span><span>
</span><span id="line-1358"></span><span>                    </span><span class="hs-keyword">then</span><span>
</span><span id="line-1359"></span><span>                        </span><span class="annot"><span class="annottext">[Char] -&gt; Either [Char] UnboundForeignFieldList
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Target and source length differe on foreign reference.&quot;</span></span><span>
</span><span id="line-1360"></span><span>                    </span><span class="hs-keyword">else</span><span>
</span><span id="line-1361"></span><span>                        </span><span class="annot"><span class="annottext">UnboundForeignFieldList -&gt; Either [Char] UnboundForeignFieldList
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span>
</span><span id="line-1362"></span><span>                        </span><span class="annot"><span class="annottext">(UnboundForeignFieldList -&gt; Either [Char] UnboundForeignFieldList)
-&gt; UnboundForeignFieldList -&gt; Either [Char] UnboundForeignFieldList
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty ForeignFieldReference -&gt; UnboundForeignFieldList
</span><a href="Database.Persist.Quasi.Internal.html#FieldListHasReferences"><span class="hs-identifier hs-var">FieldListHasReferences</span></a></span><span>
</span><span id="line-1363"></span><span>                        </span><span class="annot"><span class="annottext">(NonEmpty ForeignFieldReference -&gt; UnboundForeignFieldList)
-&gt; NonEmpty ForeignFieldReference -&gt; UnboundForeignFieldList
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(FieldNameHS -&gt; FieldNameHS -&gt; ForeignFieldReference)
-&gt; NonEmpty FieldNameHS
-&gt; NonEmpty FieldNameHS
-&gt; NonEmpty ForeignFieldReference
forall a b c.
(a -&gt; b -&gt; c) -&gt; NonEmpty a -&gt; NonEmpty b -&gt; NonEmpty c
</span><span class="hs-identifier hs-var">NEL.zipWith</span></span><span> </span><span class="annot"><span class="annottext">FieldNameHS -&gt; FieldNameHS -&gt; ForeignFieldReference
</span><a href="Database.Persist.Quasi.Internal.html#ForeignFieldReference"><span class="hs-identifier hs-var">ForeignFieldReference</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldNameHS
</span><a href="#local-6989586621679787961"><span class="hs-identifier hs-var">sources</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldNameHS
</span><a href="#local-6989586621679787962"><span class="hs-identifier hs-var">targets</span></a></span><span>
</span><span id="line-1364"></span><span>
</span><span id="line-1365"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeForeign"><span class="hs-identifier hs-type">takeForeign</span></a></span><span>
</span><span id="line-1366"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span>
</span><span id="line-1367"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span>
</span><span id="line-1368"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-1369"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignDef"><span class="hs-identifier hs-type">UnboundForeignDef</span></a></span><span>
</span><span id="line-1370"></span><span id="takeForeign"><span class="annot"><span class="annottext">takeForeign :: PersistSettings -&gt; EntityNameHS -&gt; [Text] -&gt; UnboundForeignDef
</span><a href="Database.Persist.Quasi.Internal.html#takeForeign"><span class="hs-identifier hs-var hs-var">takeForeign</span></a></span></span><span> </span><span id="local-6989586621679787965"><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787965"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679787966"><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787966"><span class="hs-identifier hs-var">entityName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; UnboundForeignDef
</span><a href="#local-6989586621679787967"><span class="hs-identifier hs-var">takeRefTable</span></a></span><span>
</span><span id="line-1371"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1372"></span><span>    </span><span class="annot"><a href="#local-6989586621679787968"><span class="hs-identifier hs-type">errorPrefix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-1373"></span><span>    </span><span id="local-6989586621679787968"><span class="annot"><span class="annottext">errorPrefix :: [Char]
</span><a href="#local-6989586621679787968"><span class="hs-identifier hs-var hs-var">errorPrefix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;invalid foreign key constraint on table[&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityNameHS -&gt; Text
</span><a href="Database.Persist.Names.html#unEntityNameHS"><span class="hs-identifier hs-var">unEntityNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787966"><span class="hs-identifier hs-var">entityName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;] &quot;</span></span><span>
</span><span id="line-1374"></span><span>
</span><span id="line-1375"></span><span>    </span><span class="annot"><a href="#local-6989586621679787967"><span class="hs-identifier hs-type">takeRefTable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignDef"><span class="hs-identifier hs-type">UnboundForeignDef</span></a></span><span>
</span><span id="line-1376"></span><span>    </span><span id="local-6989586621679787967"><span class="annot"><span class="annottext">takeRefTable :: [Text] -&gt; UnboundForeignDef
</span><a href="#local-6989586621679787967"><span class="hs-identifier hs-var hs-var">takeRefTable</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1377"></span><span>        </span><span class="annot"><span class="annottext">[Char] -&gt; UnboundForeignDef
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; UnboundForeignDef) -&gt; [Char] -&gt; UnboundForeignDef
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679787968"><span class="hs-identifier hs-var">errorPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; expecting foreign table name&quot;</span></span><span>
</span><span id="line-1378"></span><span>    </span><span class="annot"><a href="#local-6989586621679787967"><span class="hs-identifier hs-var">takeRefTable</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787969"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787969"><span class="hs-identifier hs-var">refTableName</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679787970"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787970"><span class="hs-identifier hs-var">restLine</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1379"></span><span>        </span><span class="annot"><span class="annottext">[Text]
-&gt; Maybe CascadeAction -&gt; Maybe CascadeAction -&gt; UnboundForeignDef
</span><a href="#local-6989586621679787971"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787970"><span class="hs-identifier hs-var">restLine</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1380"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1381"></span><span>        </span><span class="annot"><a href="#local-6989586621679787971"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#CascadeAction"><span class="hs-identifier hs-type">CascadeAction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#CascadeAction"><span class="hs-identifier hs-type">CascadeAction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignDef"><span class="hs-identifier hs-type">UnboundForeignDef</span></a></span><span>
</span><span id="line-1382"></span><span>        </span><span id="local-6989586621679787971"><span class="annot"><span class="annottext">go :: [Text]
-&gt; Maybe CascadeAction -&gt; Maybe CascadeAction -&gt; UnboundForeignDef
</span><a href="#local-6989586621679787971"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679787972"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787972"><span class="hs-identifier hs-var">constraintNameText</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679787973"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787973"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679787974"><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679787974"><span class="hs-identifier hs-var">onDelete</span></a></span></span><span> </span><span id="local-6989586621679787975"><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679787975"><span class="hs-identifier hs-var">onUpdate</span></a></span></span><span>
</span><span id="line-1383"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><span class="hs-identifier hs-var">T.null</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787972"><span class="hs-identifier hs-var">constraintNameText</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isLower</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Char
Text -&gt; Char
</span><span class="hs-identifier hs-var">T.head</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787972"><span class="hs-identifier hs-var">constraintNameText</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1384"></span><span>                </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundForeignDef"><span class="hs-identifier hs-type">UnboundForeignDef</span></a></span><span>
</span><span id="line-1385"></span><span>                    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">unboundForeignFields :: UnboundForeignFieldList
</span><a href="Database.Persist.Quasi.Internal.html#unboundForeignFields"><span class="hs-identifier hs-var">unboundForeignFields</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1386"></span><span>                        </span><span class="annot"><span class="annottext">([Char] -&gt; UnboundForeignFieldList)
-&gt; (UnboundForeignFieldList -&gt; UnboundForeignFieldList)
-&gt; Either [Char] UnboundForeignFieldList
-&gt; UnboundForeignFieldList
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; UnboundForeignFieldList
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">UnboundForeignFieldList -&gt; UnboundForeignFieldList
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">(Either [Char] UnboundForeignFieldList -&gt; UnboundForeignFieldList)
-&gt; Either [Char] UnboundForeignFieldList -&gt; UnboundForeignFieldList
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Text] -&gt; Either [Char] UnboundForeignFieldList
</span><a href="Database.Persist.Quasi.Internal.html#mkUnboundForeignFieldList"><span class="hs-identifier hs-var">mkUnboundForeignFieldList</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787977"><span class="hs-identifier hs-var">foreignFields</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787978"><span class="hs-identifier hs-var">parentFields</span></a></span><span>
</span><span id="line-1387"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unboundForeignDef :: ForeignDef
</span><a href="Database.Persist.Quasi.Internal.html#unboundForeignDef"><span class="hs-identifier hs-var">unboundForeignDef</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1388"></span><span>                        </span><span class="annot"><a href="Database.Persist.Types.Base.html#ForeignDef"><span class="hs-identifier hs-type">ForeignDef</span></a></span><span>
</span><span id="line-1389"></span><span>                            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">foreignRefTableHaskell :: EntityNameHS
</span><a href="Database.Persist.Types.Base.html#foreignRefTableHaskell"><span class="hs-identifier hs-var">foreignRefTableHaskell</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1390"></span><span>                                </span><span class="annot"><span class="annottext">Text -&gt; EntityNameHS
</span><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-var">EntityNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787969"><span class="hs-identifier hs-var">refTableName</span></a></span><span>
</span><span id="line-1391"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">foreignRefTableDBName :: EntityNameDB
</span><a href="Database.Persist.Types.Base.html#foreignRefTableDBName"><span class="hs-identifier hs-var">foreignRefTableDBName</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1392"></span><span>                                </span><span class="annot"><span class="annottext">Text -&gt; EntityNameDB
</span><a href="Database.Persist.Names.html#EntityNameDB"><span class="hs-identifier hs-var">EntityNameDB</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; EntityNameDB) -&gt; Text -&gt; EntityNameDB
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PersistSettings -&gt; Text -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psToDBName"><span class="hs-identifier hs-var">psToDBName</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787965"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787969"><span class="hs-identifier hs-var">refTableName</span></a></span><span>
</span><span id="line-1393"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">foreignConstraintNameHaskell :: ConstraintNameHS
</span><a href="Database.Persist.Types.Base.html#foreignConstraintNameHaskell"><span class="hs-identifier hs-var">foreignConstraintNameHaskell</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1394"></span><span>                                </span><span class="annot"><span class="annottext">ConstraintNameHS
</span><a href="#local-6989586621679787982"><span class="hs-identifier hs-var">constraintName</span></a></span><span>
</span><span id="line-1395"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">foreignConstraintNameDBName :: ConstraintNameDB
</span><a href="Database.Persist.Types.Base.html#foreignConstraintNameDBName"><span class="hs-identifier hs-var">foreignConstraintNameDBName</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1396"></span><span>                                </span><span class="annot"><span class="annottext">PersistSettings
-&gt; EntityNameHS -&gt; ConstraintNameHS -&gt; ConstraintNameDB
</span><a href="Database.Persist.Quasi.Internal.html#toFKConstraintNameDB"><span class="hs-identifier hs-var">toFKConstraintNameDB</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679787965"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679787966"><span class="hs-identifier hs-var">entityName</span></a></span><span> </span><span class="annot"><span class="annottext">ConstraintNameHS
</span><a href="#local-6989586621679787982"><span class="hs-identifier hs-var">constraintName</span></a></span><span>
</span><span id="line-1397"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">foreignFieldCascade :: FieldCascade
</span><a href="Database.Persist.Types.Base.html#foreignFieldCascade"><span class="hs-identifier hs-var">foreignFieldCascade</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1398"></span><span>                                </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldCascade"><span class="hs-identifier hs-type">FieldCascade</span></a></span><span>
</span><span id="line-1399"></span><span>                                    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fcOnDelete :: Maybe CascadeAction
</span><a href="Database.Persist.Types.Base.html#fcOnDelete"><span class="hs-identifier hs-var">fcOnDelete</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679787974"><span class="hs-identifier hs-var">onDelete</span></a></span><span>
</span><span id="line-1400"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fcOnUpdate :: Maybe CascadeAction
</span><a href="Database.Persist.Types.Base.html#fcOnUpdate"><span class="hs-identifier hs-var">fcOnUpdate</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679787975"><span class="hs-identifier hs-var">onUpdate</span></a></span><span>
</span><span id="line-1401"></span><span>                                    </span><span class="hs-special">}</span><span>
</span><span id="line-1402"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">foreignAttrs :: [Text]
</span><a href="Database.Persist.Types.Base.html#foreignAttrs"><span class="hs-identifier hs-var">foreignAttrs</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1403"></span><span>                                </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787989"><span class="hs-identifier hs-var">attrs</span></a></span><span>
</span><span id="line-1404"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">foreignFields :: [((FieldNameHS, FieldNameDB), (FieldNameHS, FieldNameDB))]
</span><a href="Database.Persist.Types.Base.html#foreignFields"><span class="hs-identifier hs-var">foreignFields</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1405"></span><span>                                </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1406"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">foreignNullable :: Bool
</span><a href="Database.Persist.Types.Base.html#foreignNullable"><span class="hs-identifier hs-var">foreignNullable</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1407"></span><span>                                </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1408"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">foreignToPrimary :: Bool
</span><a href="Database.Persist.Types.Base.html#foreignToPrimary"><span class="hs-identifier hs-var">foreignToPrimary</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1409"></span><span>                                </span><span class="annot"><span class="annottext">[Text] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787978"><span class="hs-identifier hs-var">parentFields</span></a></span><span>
</span><span id="line-1410"></span><span>                            </span><span class="hs-special">}</span><span>
</span><span id="line-1411"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-1412"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-1413"></span><span>            </span><span id="local-6989586621679787982"><span class="annot"><span class="annottext">constraintName :: ConstraintNameHS
</span><a href="#local-6989586621679787982"><span class="hs-identifier hs-var hs-var">constraintName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1414"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; ConstraintNameHS
</span><a href="Database.Persist.Names.html#ConstraintNameHS"><span class="hs-identifier hs-var">ConstraintNameHS</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679787972"><span class="hs-identifier hs-var">constraintNameText</span></a></span><span>
</span><span id="line-1415"></span><span>
</span><span id="line-1416"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679787993"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787993"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787989"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787989"><span class="hs-identifier hs-var">attrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1417"></span><span>                </span><span class="annot"><span class="annottext">(Text -&gt; Bool) -&gt; [Text] -&gt; ([Text], [Text])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">break</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;!&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
</span><span class="hs-operator hs-var">`T.isPrefixOf`</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787973"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1418"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679787977"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787977"><span class="hs-identifier hs-var">foreignFields</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787978"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787978"><span class="hs-identifier hs-var">parentFields</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1419"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Bool) -&gt; [Text] -&gt; ([Text], [Text])
forall a. (a -&gt; Bool) -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">break</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;References&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787993"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1420"></span><span>                    </span><span class="hs-special">(</span><span id="local-6989586621679787994"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787994"><span class="hs-identifier hs-var">ffs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1421"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787994"><span class="hs-identifier hs-var">ffs</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1422"></span><span>                    </span><span class="hs-special">(</span><span id="local-6989586621679787995"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787995"><span class="hs-identifier hs-var">ffs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679787996"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787996"><span class="hs-identifier hs-var">pfs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1423"></span><span>                        </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787995"><span class="hs-identifier hs-var">ffs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Int
forall a. [a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787996"><span class="hs-identifier hs-var">pfs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1424"></span><span>                            </span><span class="hs-special">(</span><span id="local-6989586621679787997"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679787997"><span class="hs-identifier hs-var">flen</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679787998"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679787998"><span class="hs-identifier hs-var">plen</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1425"></span><span>                                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679787997"><span class="hs-identifier hs-var">flen</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679787998"><span class="hs-identifier hs-var">plen</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1426"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787995"><span class="hs-identifier hs-var">ffs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679787996"><span class="hs-identifier hs-var">pfs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1427"></span><span>                            </span><span class="hs-special">(</span><span id="local-6989586621679787999"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679787999"><span class="hs-identifier hs-var">flen</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679788000"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679788000"><span class="hs-identifier hs-var">plen</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1428"></span><span>                                </span><span class="annot"><span class="annottext">[Char] -&gt; ([Text], [Text])
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; ([Text], [Text])) -&gt; [Char] -&gt; ([Text], [Text])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679787968"><span class="hs-identifier hs-var">errorPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; [Char]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span>
</span><span id="line-1429"></span><span>                                    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Found &quot;</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679787999"><span class="hs-identifier hs-var">flen</span></a></span><span>
</span><span id="line-1430"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; foreign fields but &quot;</span></span><span>
</span><span id="line-1431"></span><span>                                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679788000"><span class="hs-identifier hs-var">plen</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; parent fields&quot;</span></span><span>
</span><span id="line-1432"></span><span>                                    </span><span class="hs-special">]</span><span>
</span><span id="line-1433"></span><span>
</span><span id="line-1434"></span><span>        </span><span class="annot"><a href="#local-6989586621679787971"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">CascadePrefix -&gt; Text -&gt; Maybe CascadeAction
</span><a href="Database.Persist.Quasi.Internal.html#parseCascadeAction"><span class="hs-identifier hs-var">parseCascadeAction</span></a></span><span> </span><span class="annot"><span class="annottext">CascadePrefix
</span><a href="Database.Persist.Quasi.Internal.html#CascadeDelete"><span class="hs-identifier hs-var">CascadeDelete</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679788003"><span class="annot"><span class="annottext">CascadeAction
</span><a href="#local-6989586621679788003"><span class="hs-identifier hs-var">cascadingAction</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679788004"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788004"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679788005"><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788005"><span class="hs-identifier hs-var">onDelete'</span></a></span></span><span> </span><span id="local-6989586621679788006"><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788006"><span class="hs-identifier hs-var">onUpdate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1435"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788005"><span class="hs-identifier hs-var">onDelete'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1436"></span><span>                </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1437"></span><span>                    </span><span class="annot"><span class="annottext">[Text]
-&gt; Maybe CascadeAction -&gt; Maybe CascadeAction -&gt; UnboundForeignDef
</span><a href="#local-6989586621679787971"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788004"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CascadeAction -&gt; Maybe CascadeAction
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">CascadeAction
</span><a href="#local-6989586621679788003"><span class="hs-identifier hs-var">cascadingAction</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788006"><span class="hs-identifier hs-var">onUpdate</span></a></span><span>
</span><span id="line-1438"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">CascadeAction
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1439"></span><span>                    </span><span class="annot"><span class="annottext">[Char] -&gt; UnboundForeignDef
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; UnboundForeignDef) -&gt; [Char] -&gt; UnboundForeignDef
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679787968"><span class="hs-identifier hs-var">errorPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;found more than one OnDelete actions&quot;</span></span><span>
</span><span id="line-1440"></span><span>
</span><span id="line-1441"></span><span>        </span><span class="annot"><a href="#local-6989586621679787971"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">CascadePrefix -&gt; Text -&gt; Maybe CascadeAction
</span><a href="Database.Persist.Quasi.Internal.html#parseCascadeAction"><span class="hs-identifier hs-var">parseCascadeAction</span></a></span><span> </span><span class="annot"><span class="annottext">CascadePrefix
</span><a href="Database.Persist.Quasi.Internal.html#CascadeUpdate"><span class="hs-identifier hs-var">CascadeUpdate</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679788008"><span class="annot"><span class="annottext">CascadeAction
</span><a href="#local-6989586621679788008"><span class="hs-identifier hs-var">cascadingAction</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679788009"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788009"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679788010"><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788010"><span class="hs-identifier hs-var">onDelete</span></a></span></span><span> </span><span id="local-6989586621679788011"><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788011"><span class="hs-identifier hs-var">onUpdate'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1442"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788011"><span class="hs-identifier hs-var">onUpdate'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1443"></span><span>                </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1444"></span><span>                    </span><span class="annot"><span class="annottext">[Text]
-&gt; Maybe CascadeAction -&gt; Maybe CascadeAction -&gt; UnboundForeignDef
</span><a href="#local-6989586621679787971"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788009"><span class="hs-identifier hs-var">rest</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788010"><span class="hs-identifier hs-var">onDelete</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CascadeAction -&gt; Maybe CascadeAction
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">CascadeAction
</span><a href="#local-6989586621679788008"><span class="hs-identifier hs-var">cascadingAction</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1445"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">CascadeAction
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1446"></span><span>                    </span><span class="annot"><span class="annottext">[Char] -&gt; UnboundForeignDef
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; UnboundForeignDef) -&gt; [Char] -&gt; UnboundForeignDef
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679787968"><span class="hs-identifier hs-var">errorPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;found more than one OnUpdate actions&quot;</span></span><span>
</span><span id="line-1447"></span><span>
</span><span id="line-1448"></span><span>        </span><span class="annot"><a href="#local-6989586621679787971"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679788012"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788012"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; UnboundForeignDef
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; UnboundForeignDef) -&gt; [Char] -&gt; UnboundForeignDef
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679787968"><span class="hs-identifier hs-var">errorPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;expecting a lower case constraint name or a cascading action xs=&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788012"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-1449"></span><span>
</span><span id="line-1450"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#toFKConstraintNameDB"><span class="hs-identifier hs-type">toFKConstraintNameDB</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#PersistSettings"><span class="hs-identifier hs-type">PersistSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#ConstraintNameHS"><span class="hs-identifier hs-type">ConstraintNameHS</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#ConstraintNameDB"><span class="hs-identifier hs-type">ConstraintNameDB</span></a></span><span>
</span><span id="line-1451"></span><span id="toFKConstraintNameDB"><span class="annot"><span class="annottext">toFKConstraintNameDB :: PersistSettings
-&gt; EntityNameHS -&gt; ConstraintNameHS -&gt; ConstraintNameDB
</span><a href="Database.Persist.Quasi.Internal.html#toFKConstraintNameDB"><span class="hs-identifier hs-var hs-var">toFKConstraintNameDB</span></a></span></span><span> </span><span id="local-6989586621679788013"><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679788013"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679788014"><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679788014"><span class="hs-identifier hs-var">entityName</span></a></span></span><span> </span><span id="local-6989586621679788015"><span class="annot"><span class="annottext">ConstraintNameHS
</span><a href="#local-6989586621679788015"><span class="hs-identifier hs-var">constraintName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1452"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; ConstraintNameDB
</span><a href="Database.Persist.Names.html#ConstraintNameDB"><span class="hs-identifier hs-var">ConstraintNameDB</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ConstraintNameDB) -&gt; Text -&gt; ConstraintNameDB
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PersistSettings -&gt; Text -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psToDBName"><span class="hs-identifier hs-var">psToDBName</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679788013"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PersistSettings -&gt; EntityNameHS -&gt; ConstraintNameHS -&gt; Text
</span><a href="Database.Persist.Quasi.Internal.html#psToFKName"><span class="hs-identifier hs-var">psToFKName</span></a></span><span> </span><span class="annot"><span class="annottext">PersistSettings
</span><a href="#local-6989586621679788013"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">EntityNameHS
</span><a href="#local-6989586621679788014"><span class="hs-identifier hs-var">entityName</span></a></span><span> </span><span class="annot"><span class="annottext">ConstraintNameHS
</span><a href="#local-6989586621679788015"><span class="hs-identifier hs-var">constraintName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1453"></span><span>
</span><span id="line-1454"></span><span class="hs-keyword">data</span><span> </span><span id="CascadePrefix"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#CascadePrefix"><span class="hs-identifier hs-var">CascadePrefix</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CascadeUpdate"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#CascadeUpdate"><span class="hs-identifier hs-var">CascadeUpdate</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="CascadeDelete"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#CascadeDelete"><span class="hs-identifier hs-var">CascadeDelete</span></a></span></span><span>
</span><span id="line-1455"></span><span>
</span><span id="line-1456"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#parseCascade"><span class="hs-identifier hs-type">parseCascade</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldCascade"><span class="hs-identifier hs-type">FieldCascade</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1457"></span><span id="parseCascade"><span class="annot"><span class="annottext">parseCascade :: [Text] -&gt; (FieldCascade, [Text])
</span><a href="Database.Persist.Quasi.Internal.html#parseCascade"><span class="hs-identifier hs-var hs-var">parseCascade</span></a></span></span><span> </span><span id="local-6989586621679788016"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788016"><span class="hs-identifier hs-var">allTokens</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1458"></span><span>    </span><span class="annot"><span class="annottext">[Text]
-&gt; Maybe CascadeAction
-&gt; Maybe CascadeAction
-&gt; [Text]
-&gt; (FieldCascade, [Text])
</span><a href="#local-6989586621679788017"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788016"><span class="hs-identifier hs-var">allTokens</span></a></span><span>
</span><span id="line-1459"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1460"></span><span>    </span><span id="local-6989586621679788017"><span class="annot"><span class="annottext">go :: [Text]
-&gt; Maybe CascadeAction
-&gt; Maybe CascadeAction
-&gt; [Text]
-&gt; (FieldCascade, [Text])
</span><a href="#local-6989586621679788017"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679788018"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788018"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621679788019"><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788019"><span class="hs-identifier hs-var">mupd</span></a></span></span><span> </span><span id="local-6989586621679788020"><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788020"><span class="hs-identifier hs-var">mdel</span></a></span></span><span> </span><span id="local-6989586621679788021"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788021"><span class="hs-identifier hs-var">tokens_</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1461"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788021"><span class="hs-identifier hs-var">tokens_</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1462"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1463"></span><span>                </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#FieldCascade"><span class="hs-identifier hs-type">FieldCascade</span></a></span><span>
</span><span id="line-1464"></span><span>                    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">fcOnDelete :: Maybe CascadeAction
</span><a href="Database.Persist.Types.Base.html#fcOnDelete"><span class="hs-identifier hs-var">fcOnDelete</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788020"><span class="hs-identifier hs-var">mdel</span></a></span><span>
</span><span id="line-1465"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">fcOnUpdate :: Maybe CascadeAction
</span><a href="Database.Persist.Types.Base.html#fcOnUpdate"><span class="hs-identifier hs-var">fcOnUpdate</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788019"><span class="hs-identifier hs-var">mupd</span></a></span><span>
</span><span id="line-1466"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-1467"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788018"><span class="hs-identifier hs-var">acc</span></a></span><span>
</span><span id="line-1468"></span><span>                </span><span class="hs-special">)</span><span>
</span><span id="line-1469"></span><span>            </span><span id="local-6989586621679788022"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679788022"><span class="hs-identifier hs-var">this</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679788023"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788023"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1470"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CascadePrefix -&gt; Text -&gt; Maybe CascadeAction
</span><a href="Database.Persist.Quasi.Internal.html#parseCascadeAction"><span class="hs-identifier hs-var">parseCascadeAction</span></a></span><span> </span><span class="annot"><span class="annottext">CascadePrefix
</span><a href="Database.Persist.Quasi.Internal.html#CascadeUpdate"><span class="hs-identifier hs-var">CascadeUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679788022"><span class="hs-identifier hs-var">this</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1471"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679788024"><span class="annot"><span class="annottext">CascadeAction
</span><a href="#local-6989586621679788024"><span class="hs-identifier hs-var">cascUpd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1472"></span><span>                        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788019"><span class="hs-identifier hs-var">mupd</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1473"></span><span>                            </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1474"></span><span>                                </span><span class="annot"><span class="annottext">[Text]
-&gt; Maybe CascadeAction
-&gt; Maybe CascadeAction
-&gt; [Text]
-&gt; (FieldCascade, [Text])
</span><a href="#local-6989586621679788017"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788018"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CascadeAction -&gt; Maybe CascadeAction
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">CascadeAction
</span><a href="#local-6989586621679788024"><span class="hs-identifier hs-var">cascUpd</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788020"><span class="hs-identifier hs-var">mdel</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788023"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1475"></span><span>                            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">CascadeAction
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1476"></span><span>                                </span><span class="annot"><span class="annottext">[Char] -&gt; (FieldCascade, [Text])
</span><a href="#local-6989586621679788025"><span class="hs-identifier hs-var">nope</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;found more than one OnUpdate action&quot;</span></span><span>
</span><span id="line-1477"></span><span>                    </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1478"></span><span>                        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CascadePrefix -&gt; Text -&gt; Maybe CascadeAction
</span><a href="Database.Persist.Quasi.Internal.html#parseCascadeAction"><span class="hs-identifier hs-var">parseCascadeAction</span></a></span><span> </span><span class="annot"><span class="annottext">CascadePrefix
</span><a href="Database.Persist.Quasi.Internal.html#CascadeDelete"><span class="hs-identifier hs-var">CascadeDelete</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679788022"><span class="hs-identifier hs-var">this</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1479"></span><span>                            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679788026"><span class="annot"><span class="annottext">CascadeAction
</span><a href="#local-6989586621679788026"><span class="hs-identifier hs-var">cascDel</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1480"></span><span>                                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788020"><span class="hs-identifier hs-var">mdel</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1481"></span><span>                                    </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1482"></span><span>                                        </span><span class="annot"><span class="annottext">[Text]
-&gt; Maybe CascadeAction
-&gt; Maybe CascadeAction
-&gt; [Text]
-&gt; (FieldCascade, [Text])
</span><a href="#local-6989586621679788017"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788018"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788019"><span class="hs-identifier hs-var">mupd</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CascadeAction -&gt; Maybe CascadeAction
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">CascadeAction
</span><a href="#local-6989586621679788026"><span class="hs-identifier hs-var">cascDel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788023"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1483"></span><span>                                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">CascadeAction
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1484"></span><span>                                        </span><span class="annot"><span class="annottext">[Char] -&gt; (FieldCascade, [Text])
</span><a href="#local-6989586621679788025"><span class="hs-identifier hs-var">nope</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;found more than one OnDelete action&quot;</span></span><span>
</span><span id="line-1485"></span><span>                            </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1486"></span><span>                                </span><span class="annot"><span class="annottext">[Text]
-&gt; Maybe CascadeAction
-&gt; Maybe CascadeAction
-&gt; [Text]
-&gt; (FieldCascade, [Text])
</span><a href="#local-6989586621679788017"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679788022"><span class="hs-identifier hs-var">this</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788018"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788019"><span class="hs-identifier hs-var">mupd</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe CascadeAction
</span><a href="#local-6989586621679788020"><span class="hs-identifier hs-var">mdel</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788023"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1487"></span><span>    </span><span id="local-6989586621679788025"><span class="annot"><span class="annottext">nope :: [Char] -&gt; (FieldCascade, [Text])
</span><a href="#local-6989586621679788025"><span class="hs-identifier hs-var hs-var">nope</span></a></span></span><span> </span><span id="local-6989586621679788027"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679788027"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1488"></span><span>        </span><span class="annot"><span class="annottext">[Char] -&gt; (FieldCascade, [Text])
forall a. HasCallStack =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; (FieldCascade, [Text]))
-&gt; [Char] -&gt; (FieldCascade, [Text])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621679788027"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;, tokens: &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788016"><span class="hs-identifier hs-var">allTokens</span></a></span><span>
</span><span id="line-1489"></span><span>
</span><span id="line-1490"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#parseCascadeAction"><span class="hs-identifier hs-type">parseCascadeAction</span></a></span><span>
</span><span id="line-1491"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#CascadePrefix"><span class="hs-identifier hs-type">CascadePrefix</span></a></span><span>
</span><span id="line-1492"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1493"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Database.Persist.Types.Base.html#CascadeAction"><span class="hs-identifier hs-type">CascadeAction</span></a></span><span>
</span><span id="line-1494"></span><span id="parseCascadeAction"><span class="annot"><span class="annottext">parseCascadeAction :: CascadePrefix -&gt; Text -&gt; Maybe CascadeAction
</span><a href="Database.Persist.Quasi.Internal.html#parseCascadeAction"><span class="hs-identifier hs-var hs-var">parseCascadeAction</span></a></span></span><span> </span><span id="local-6989586621679788028"><span class="annot"><span class="annottext">CascadePrefix
</span><a href="#local-6989586621679788028"><span class="hs-identifier hs-var">prfx</span></a></span></span><span> </span><span id="local-6989586621679788029"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679788029"><span class="hs-identifier hs-var">text</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1495"></span><span>    </span><span id="local-6989586621679788030"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679788030"><span class="hs-identifier hs-var">cascadeStr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Maybe Text
</span><span class="hs-identifier hs-var">T.stripPrefix</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;On&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">CascadePrefix -&gt; Text
forall {a}. IsString a =&gt; CascadePrefix -&gt; a
</span><a href="#local-6989586621679788031"><span class="hs-identifier hs-var">toPrefix</span></a></span><span> </span><span class="annot"><span class="annottext">CascadePrefix
</span><a href="#local-6989586621679788028"><span class="hs-identifier hs-var">prfx</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679788029"><span class="hs-identifier hs-var">text</span></a></span><span>
</span><span id="line-1496"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Maybe CascadeAction
forall a. Read a =&gt; Text -&gt; Maybe a
</span><a href="Database.Persist.Quasi.Internal.html#readMaybe"><span class="hs-identifier hs-var">readMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679788030"><span class="hs-identifier hs-var">cascadeStr</span></a></span><span>
</span><span id="line-1497"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1498"></span><span>    </span><span id="local-6989586621679788031"><span class="annot"><span class="annottext">toPrefix :: CascadePrefix -&gt; a
</span><a href="#local-6989586621679788031"><span class="hs-identifier hs-var hs-var">toPrefix</span></a></span></span><span> </span><span id="local-6989586621679788035"><span class="annot"><span class="annottext">CascadePrefix
</span><a href="#local-6989586621679788035"><span class="hs-identifier hs-var">cp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1499"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CascadePrefix
</span><a href="#local-6989586621679788035"><span class="hs-identifier hs-var">cp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1500"></span><span>            </span><span class="annot"><span class="annottext">CascadePrefix
</span><a href="Database.Persist.Quasi.Internal.html#CascadeUpdate"><span class="hs-identifier hs-var">CascadeUpdate</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;Update&quot;</span></span><span>
</span><span id="line-1501"></span><span>            </span><span class="annot"><span class="annottext">CascadePrefix
</span><a href="Database.Persist.Quasi.Internal.html#CascadeDelete"><span class="hs-identifier hs-var">CascadeDelete</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;Delete&quot;</span></span><span>
</span><span id="line-1502"></span><span>
</span><span id="line-1503"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeDerives"><span class="hs-identifier hs-type">takeDerives</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span>
</span><span id="line-1504"></span><span id="takeDerives"><span class="annot"><span class="annottext">takeDerives :: [Text] -&gt; Maybe [Text]
</span><a href="Database.Persist.Quasi.Internal.html#takeDerives"><span class="hs-identifier hs-var hs-var">takeDerives</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;deriving&quot;</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679788036"><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788036"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Maybe [Text]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621679788036"><span class="hs-identifier hs-var">rest</span></a></span><span>
</span><span id="line-1505"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#takeDerives"><span class="hs-identifier hs-var">takeDerives</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [Text]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1506"></span><span>
</span><span id="line-1507"></span><span class="hs-comment">-- | Returns 'True' if the 'UnboundFieldDef' does not have a 'MigrationOnly' or</span><span>
</span><span id="line-1508"></span><span class="hs-comment">-- 'SafeToRemove' flag from the QuasiQuoter.</span><span>
</span><span id="line-1509"></span><span class="hs-comment">--</span><span>
</span><span id="line-1510"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-1511"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#isHaskellUnboundField"><span class="hs-identifier hs-type">isHaskellUnboundField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundFieldDef"><span class="hs-identifier hs-type">UnboundFieldDef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1512"></span><span id="isHaskellUnboundField"><span class="annot"><span class="annottext">isHaskellUnboundField :: UnboundFieldDef -&gt; Bool
</span><a href="Database.Persist.Quasi.Internal.html#isHaskellUnboundField"><span class="hs-identifier hs-var hs-var">isHaskellUnboundField</span></a></span></span><span> </span><span id="local-6989586621679788037"><span class="annot"><span class="annottext">UnboundFieldDef
</span><a href="#local-6989586621679788037"><span class="hs-identifier hs-var">fd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1513"></span><span>    </span><span class="annot"><span class="annottext">FieldAttr
</span><a href="Database.Persist.Types.Base.html#FieldAttrMigrationOnly"><span class="hs-identifier hs-var">FieldAttrMigrationOnly</span></a></span><span> </span><span class="annot"><span class="annottext">FieldAttr -&gt; [FieldAttr] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`notElem`</span></span><span> </span><span class="annot"><span class="annottext">UnboundFieldDef -&gt; [FieldAttr]
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldAttrs"><span class="hs-identifier hs-var">unboundFieldAttrs</span></a></span><span> </span><span class="annot"><span class="annottext">UnboundFieldDef
</span><a href="#local-6989586621679788037"><span class="hs-identifier hs-var">fd</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-1514"></span><span>    </span><span class="annot"><span class="annottext">FieldAttr
</span><a href="Database.Persist.Types.Base.html#FieldAttrSafeToRemove"><span class="hs-identifier hs-var">FieldAttrSafeToRemove</span></a></span><span> </span><span class="annot"><span class="annottext">FieldAttr -&gt; [FieldAttr] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`notElem`</span></span><span> </span><span class="annot"><span class="annottext">UnboundFieldDef -&gt; [FieldAttr]
</span><a href="Database.Persist.Quasi.Internal.html#unboundFieldAttrs"><span class="hs-identifier hs-var">unboundFieldAttrs</span></a></span><span> </span><span class="annot"><span class="annottext">UnboundFieldDef
</span><a href="#local-6989586621679788037"><span class="hs-identifier hs-var">fd</span></a></span><span>
</span><span id="line-1515"></span><span>
</span><span id="line-1516"></span><span class="hs-comment">-- |  Return the 'EntityNameHS' for an 'UnboundEntityDef'.</span><span>
</span><span id="line-1517"></span><span class="hs-comment">--</span><span>
</span><span id="line-1518"></span><span class="hs-comment">-- @since 2.13.0.0</span><span>
</span><span id="line-1519"></span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#getUnboundEntityNameHS"><span class="hs-identifier hs-type">getUnboundEntityNameHS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Database.Persist.Quasi.Internal.html#UnboundEntityDef"><span class="hs-identifier hs-type">UnboundEntityDef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Database.Persist.Names.html#EntityNameHS"><span class="hs-identifier hs-type">EntityNameHS</span></a></span><span>
</span><span id="line-1520"></span><span id="getUnboundEntityNameHS"><span class="annot"><span class="annottext">getUnboundEntityNameHS :: UnboundEntityDef -&gt; EntityNameHS
</span><a href="Database.Persist.Quasi.Internal.html#getUnboundEntityNameHS"><span class="hs-identifier hs-var hs-var">getUnboundEntityNameHS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EntityDef -&gt; EntityNameHS
</span><a href="Database.Persist.Types.Base.html#entityHaskell"><span class="hs-identifier hs-var">entityHaskell</span></a></span><span> </span><span class="annot"><span class="annottext">(EntityDef -&gt; EntityNameHS)
-&gt; (UnboundEntityDef -&gt; EntityDef)
-&gt; UnboundEntityDef
-&gt; EntityNameHS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">UnboundEntityDef -&gt; EntityDef
</span><a href="Database.Persist.Quasi.Internal.html#unboundEntityDef"><span class="hs-identifier hs-var">unboundEntityDef</span></a></span><span>
</span><span id="line-1521"></span><span>
</span><span id="line-1522"></span><span id="local-6989586621679786001"><span class="annot"><a href="Database.Persist.Quasi.Internal.html#readMaybe"><span class="hs-identifier hs-type">readMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Read</span></span><span> </span><span class="annot"><a href="#local-6989586621679786001"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679786001"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1523"></span><span id="readMaybe"><span class="annot"><span class="annottext">readMaybe :: forall a. Read a =&gt; Text -&gt; Maybe a
</span><a href="Database.Persist.Quasi.Internal.html#readMaybe"><span class="hs-identifier hs-var hs-var">readMaybe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Maybe a
forall a. Read a =&gt; [Char] -&gt; Maybe a
</span><span class="hs-identifier hs-var">R.readMaybe</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Maybe a) -&gt; (Text -&gt; [Char]) -&gt; Text -&gt; Maybe a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Char]
</span><span class="hs-identifier hs-var">T.unpack</span></span><span>
</span><span id="line-1524"></span></pre></body></html>