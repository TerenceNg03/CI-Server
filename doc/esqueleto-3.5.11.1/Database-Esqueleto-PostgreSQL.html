<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Database.Esqueleto.PostgreSQL</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">esqueleto-3.5.11.1: Type-safe EDSL for SQL queries on persistent backends.</span><ul class="links" id="page-menu"><li id="quick-jump-button"><a href="#">Quick Jump</a></li><li><a href="src/Database.Esqueleto.PostgreSQL.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Database.Esqueleto.PostgreSQL</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Internal</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module contain PostgreSQL-specific functions.</p><p>@since: 2.2.8</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:AggMode">AggMode</a><ul class="subs"><li>= <a href="#v:AggModeAll">AggModeAll</a></li><li>| <a href="#v:AggModeDistinct">AggModeDistinct</a></li></ul></li><li class="src short"><a href="#v:arrayAggDistinct">arrayAggDistinct</a> :: (<a href="Database-Esqueleto-Experimental.html#t:PersistField" title="Database.Esqueleto.Experimental">PersistField</a> a, <a href="Database-Esqueleto-Experimental.html#t:PersistField" title="Database.Esqueleto.Experimental">PersistField</a> [a]) =&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> a) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> (<a href="../base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [a]))</li><li class="src short"><a href="#v:arrayAgg">arrayAgg</a> :: <a href="Database-Esqueleto-Experimental.html#t:PersistField" title="Database.Esqueleto.Experimental">PersistField</a> a =&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> a) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> (<a href="../base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [a]))</li><li class="src short"><a href="#v:arrayAggWith">arrayAggWith</a> :: <a href="Database-Esqueleto-PostgreSQL.html#t:AggMode" title="Database.Esqueleto.PostgreSQL">AggMode</a> -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> a) -&gt; [<a href="Database-Esqueleto-Internal-Internal.html#t:OrderByClause" title="Database.Esqueleto.Internal.Internal">OrderByClause</a>] -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> (<a href="../base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [a]))</li><li class="src short"><a href="#v:arrayRemove">arrayRemove</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> [a]) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> a) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> [a])</li><li class="src short"><a href="#v:arrayRemoveNull">arrayRemoveNull</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> [<a href="../base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a]) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> [a])</li><li class="src short"><a href="#v:stringAgg">stringAgg</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:SqlString" title="Database.Esqueleto.Internal.Internal">SqlString</a> s =&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> s) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> s) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> (<a href="../base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> s))</li><li class="src short"><a href="#v:stringAggWith">stringAggWith</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:SqlString" title="Database.Esqueleto.Internal.Internal">SqlString</a> s =&gt; <a href="Database-Esqueleto-PostgreSQL.html#t:AggMode" title="Database.Esqueleto.PostgreSQL">AggMode</a> -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> s) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> s) -&gt; [<a href="Database-Esqueleto-Internal-Internal.html#t:OrderByClause" title="Database.Esqueleto.Internal.Internal">OrderByClause</a>] -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> (<a href="../base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> s))</li><li class="src short"><a href="#v:maybeArray">maybeArray</a> :: (<a href="Database-Esqueleto-Experimental.html#t:PersistField" title="Database.Esqueleto.Experimental">PersistField</a> a, <a href="Database-Esqueleto-Experimental.html#t:PersistField" title="Database.Esqueleto.Experimental">PersistField</a> [a]) =&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> (<a href="../base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [a])) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> [a])</li><li class="src short"><a href="#v:chr">chr</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:SqlString" title="Database.Esqueleto.Internal.Internal">SqlString</a> s =&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> <a href="../base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> s)</li><li class="src short"><a href="#v:now_">now_</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> <a href="../time-1.12.2/Data-Time-Clock.html#t:UTCTime" title="Data.Time.Clock">UTCTime</a>)</li><li class="src short"><a href="#v:random_">random_</a> :: (<a href="Database-Esqueleto-Experimental.html#t:PersistField" title="Database.Esqueleto.Experimental">PersistField</a> a, <a href="../base-4.18.1.0/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> a)</li><li class="src short"><a href="#v:upsert">upsert</a> :: (<a href="../base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="Database-Esqueleto-Experimental.html#t:PersistEntity" title="Database.Esqueleto.Experimental">PersistEntity</a> record, <a href="Database-Esqueleto-Experimental.html#t:OnlyOneUniqueKey" title="Database.Esqueleto.Experimental">OnlyOneUniqueKey</a> record, <a href="Database-Esqueleto-Experimental.html#t:PersistRecordBackend" title="Database.Esqueleto.Experimental">PersistRecordBackend</a> record <a href="Database-Esqueleto-Experimental.html#t:SqlBackend" title="Database.Esqueleto.Experimental">SqlBackend</a>, <a href="Database-Esqueleto-Experimental.html#t:IsPersistBackend" title="Database.Esqueleto.Experimental">IsPersistBackend</a> (<a href="Database-Esqueleto-Experimental.html#t:PersistEntityBackend" title="Database.Esqueleto.Experimental">PersistEntityBackend</a> record)) =&gt; record -&gt; [<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> record) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> <a href="Database-Esqueleto-Internal-Internal.html#t:Update" title="Database.Esqueleto.Internal.Internal">Update</a>] -&gt; <a href="../mtl-2.3.1/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> <a href="Database-Esqueleto-Experimental.html#t:SqlBackend" title="Database.Esqueleto.Experimental">SqlBackend</a> m (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> record)</li><li class="src short"><a href="#v:upsertBy">upsertBy</a> :: (<a href="../base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="Database-Esqueleto-Experimental.html#t:PersistEntity" title="Database.Esqueleto.Experimental">PersistEntity</a> record, <a href="Database-Esqueleto-Experimental.html#t:IsPersistBackend" title="Database.Esqueleto.Experimental">IsPersistBackend</a> (<a href="Database-Esqueleto-Experimental.html#t:PersistEntityBackend" title="Database.Esqueleto.Experimental">PersistEntityBackend</a> record)) =&gt; <a href="Database-Esqueleto-Experimental.html#t:Unique" title="Database.Esqueleto.Experimental">Unique</a> record -&gt; record -&gt; [<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> record) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> <a href="Database-Esqueleto-Internal-Internal.html#t:Update" title="Database.Esqueleto.Internal.Internal">Update</a>] -&gt; <a href="../mtl-2.3.1/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> <a href="Database-Esqueleto-Experimental.html#t:SqlBackend" title="Database.Esqueleto.Experimental">SqlBackend</a> m (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> record)</li><li class="src short"><a href="#v:insertSelectWithConflict">insertSelectWithConflict</a> :: <span class="keyword">forall</span> a m val backend. (<a href="Database-Esqueleto-Internal-Internal.html#t:FinalResult" title="Database.Esqueleto.Internal.Internal">FinalResult</a> a, <a href="Database-Esqueleto-Internal-Internal.html#t:KnowResult" title="Database.Esqueleto.Internal.Internal">KnowResult</a> a <a href="../base-4.18.1.0/Data-Type-Equality.html#t:-126-" title="Data.Type.Equality">~</a> <a href="Database-Esqueleto-Experimental.html#t:Unique" title="Database.Esqueleto.Experimental">Unique</a> val, <a href="../base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="Database-Esqueleto-Experimental.html#t:PersistEntity" title="Database.Esqueleto.Experimental">PersistEntity</a> val, <a href="Database-Esqueleto-Experimental.html#t:SqlBackendCanWrite" title="Database.Esqueleto.Experimental">SqlBackendCanWrite</a> backend) =&gt; a -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlQuery" title="Database.Esqueleto.Internal.Internal">SqlQuery</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Insertion" title="Database.Esqueleto.Internal.Internal">Insertion</a> val)) -&gt; (<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> val) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> val) -&gt; [<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> val) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> <a href="Database-Esqueleto-Internal-Internal.html#t:Update" title="Database.Esqueleto.Internal.Internal">Update</a>]) -&gt; <a href="../mtl-2.3.1/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> backend m ()</li><li class="src short"><a href="#v:insertSelectWithConflictCount">insertSelectWithConflictCount</a> :: <span class="keyword">forall</span> a val m backend. (<a href="Database-Esqueleto-Internal-Internal.html#t:FinalResult" title="Database.Esqueleto.Internal.Internal">FinalResult</a> a, <a href="Database-Esqueleto-Internal-Internal.html#t:KnowResult" title="Database.Esqueleto.Internal.Internal">KnowResult</a> a <a href="../base-4.18.1.0/Data-Type-Equality.html#t:-126-" title="Data.Type.Equality">~</a> <a href="Database-Esqueleto-Experimental.html#t:Unique" title="Database.Esqueleto.Experimental">Unique</a> val, <a href="../base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="Database-Esqueleto-Experimental.html#t:PersistEntity" title="Database.Esqueleto.Experimental">PersistEntity</a> val, <a href="Database-Esqueleto-Experimental.html#t:SqlBackendCanWrite" title="Database.Esqueleto.Experimental">SqlBackendCanWrite</a> backend) =&gt; a -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlQuery" title="Database.Esqueleto.Internal.Internal">SqlQuery</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Insertion" title="Database.Esqueleto.Internal.Internal">Insertion</a> val)) -&gt; (<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> val) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> val) -&gt; [<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> val) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> <a href="Database-Esqueleto-Internal-Internal.html#t:Update" title="Database.Esqueleto.Internal.Internal">Update</a>]) -&gt; <a href="../mtl-2.3.1/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> backend m <a href="../base-4.18.1.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a></li><li class="src short"><a href="#v:noWait">noWait</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:OnLockedBehavior" title="Database.Esqueleto.Internal.Internal">OnLockedBehavior</a></li><li class="src short"><a href="#v:wait">wait</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:OnLockedBehavior" title="Database.Esqueleto.Internal.Internal">OnLockedBehavior</a></li><li class="src short"><a href="#v:skipLocked">skipLocked</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:OnLockedBehavior" title="Database.Esqueleto.Internal.Internal">OnLockedBehavior</a></li><li class="src short"><a href="#v:forUpdateOf">forUpdateOf</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:LockableEntity" title="Database.Esqueleto.Internal.Internal">LockableEntity</a> a =&gt; a -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:OnLockedBehavior" title="Database.Esqueleto.Internal.Internal">OnLockedBehavior</a> -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlQuery" title="Database.Esqueleto.Internal.Internal">SqlQuery</a> ()</li><li class="src short"><a href="#v:forShareOf">forShareOf</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:LockableEntity" title="Database.Esqueleto.Internal.Internal">LockableEntity</a> a =&gt; a -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:OnLockedBehavior" title="Database.Esqueleto.Internal.Internal">OnLockedBehavior</a> -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlQuery" title="Database.Esqueleto.Internal.Internal">SqlQuery</a> ()</li><li class="src short"><a href="#v:filterWhere">filterWhere</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> a) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> <a href="../base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> a)</li><li class="src short"><a href="#v:values">values</a> :: (<a href="Database-Esqueleto-Internal-Internal.html#t:ToSomeValues" title="Database.Esqueleto.Internal.Internal">ToSomeValues</a> a, <a href="Database-Esqueleto-Experimental-ToAliasReference.html#t:ToAliasReference" title="Database.Esqueleto.Experimental.ToAliasReference">ToAliasReference</a> a, <a href="Database-Esqueleto-Experimental-ToAlias.html#t:ToAlias" title="Database.Esqueleto.Experimental.ToAlias">ToAlias</a> a) =&gt; <a href="../base-4.18.1.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> a -&gt; <a href="Database-Esqueleto-Experimental-From.html#t:From" title="Database.Esqueleto.Experimental.From">From</a> a</li><li class="src short"><a href="#v:unsafeSqlAggregateFunction">unsafeSqlAggregateFunction</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:UnsafeSqlFunctionArgument" title="Database.Esqueleto.Internal.Internal">UnsafeSqlFunctionArgument</a> a =&gt; <a href="../text-2.0.2/Data-Text-Lazy-Builder.html#t:Builder" title="Data.Text.Lazy.Builder">Builder</a> -&gt; <a href="Database-Esqueleto-PostgreSQL.html#t:AggMode" title="Database.Esqueleto.PostgreSQL">AggMode</a> -&gt; a -&gt; [<a href="Database-Esqueleto-Internal-Internal.html#t:OrderByClause" title="Database.Esqueleto.Internal.Internal">OrderByClause</a>] -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> b)</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:AggMode" class="def">AggMode</a> <a href="src/Database.Esqueleto.PostgreSQL.html#AggMode" class="link">Source</a> <a href="#t:AggMode" class="selflink">#</a></p><div class="doc"><p>Aggregate mode</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:AggModeAll" class="def">AggModeAll</a></td><td class="doc"><p>ALL</p></td></tr><tr><td class="src"><a id="v:AggModeDistinct" class="def">AggModeDistinct</a></td><td class="doc"><p>DISTINCT</p></td></tr></table></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:AggMode">Instances</h4><details id="i:AggMode" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:AggMode:Show:1"></span> <a href="../base-4.18.1.0/Text-Show.html#t:Show" title="Text.Show">Show</a> <a href="Database-Esqueleto-PostgreSQL.html#t:AggMode" title="Database.Esqueleto.PostgreSQL">AggMode</a></span> <a href="src/Database.Esqueleto.PostgreSQL.html#line-84" class="link">Source</a> <a href="#t:AggMode" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:AggMode:Show:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Database-Esqueleto-PostgreSQL.html">Database.Esqueleto.PostgreSQL</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="Database-Esqueleto-PostgreSQL.html#t:AggMode" title="Database.Esqueleto.PostgreSQL">AggMode</a> -&gt; <a href="../base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Database-Esqueleto-PostgreSQL.html#t:AggMode" title="Database.Esqueleto.PostgreSQL">AggMode</a> -&gt; <a href="../base-4.18.1.0/Data-String.html#t:String" title="Data.String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Database-Esqueleto-PostgreSQL.html#t:AggMode" title="Database.Esqueleto.PostgreSQL">AggMode</a>] -&gt; <a href="../base-4.18.1.0/Text-Show.html#t:ShowS" title="Text.Show">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:arrayAggDistinct" class="def">arrayAggDistinct</a> :: (<a href="Database-Esqueleto-Experimental.html#t:PersistField" title="Database.Esqueleto.Experimental">PersistField</a> a, <a href="Database-Esqueleto-Experimental.html#t:PersistField" title="Database.Esqueleto.Experimental">PersistField</a> [a]) =&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> a) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> (<a href="../base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [a])) <a href="src/Database.Esqueleto.PostgreSQL.html#arrayAggDistinct" class="link">Source</a> <a href="#v:arrayAggDistinct" class="selflink">#</a></p><div class="doc"><p>(<code>array_agg</code>) Concatenate distinct input values, including <code>NULL</code>s, into
 an array.</p><p><em>Since: 2.5.3</em></p></div></div><div class="top"><p class="src"><a id="v:arrayAgg" class="def">arrayAgg</a> :: <a href="Database-Esqueleto-Experimental.html#t:PersistField" title="Database.Esqueleto.Experimental">PersistField</a> a =&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> a) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> (<a href="../base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [a])) <a href="src/Database.Esqueleto.PostgreSQL.html#arrayAgg" class="link">Source</a> <a href="#v:arrayAgg" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:arrayAggWith" class="def">arrayAggWith</a> :: <a href="Database-Esqueleto-PostgreSQL.html#t:AggMode" title="Database.Esqueleto.PostgreSQL">AggMode</a> -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> a) -&gt; [<a href="Database-Esqueleto-Internal-Internal.html#t:OrderByClause" title="Database.Esqueleto.Internal.Internal">OrderByClause</a>] -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> (<a href="../base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [a])) <a href="src/Database.Esqueleto.PostgreSQL.html#arrayAggWith" class="link">Source</a> <a href="#v:arrayAggWith" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:arrayRemove" class="def">arrayRemove</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> [a]) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> a) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> [a]) <a href="src/Database.Esqueleto.PostgreSQL.html#arrayRemove" class="link">Source</a> <a href="#v:arrayRemove" class="selflink">#</a></p><div class="doc"><p>(<code>array_remove</code>) Remove all elements equal to the given value from the
 array.</p><p><em>Since: 2.5.3</em></p></div></div><div class="top"><p class="src"><a id="v:arrayRemoveNull" class="def">arrayRemoveNull</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> [<a href="../base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a]) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> [a]) <a href="src/Database.Esqueleto.PostgreSQL.html#arrayRemoveNull" class="link">Source</a> <a href="#v:arrayRemoveNull" class="selflink">#</a></p><div class="doc"><p>Remove <code>NULL</code> values from an array</p></div></div><div class="top"><p class="src"><a id="v:stringAgg" class="def">stringAgg</a> <a href="src/Database.Esqueleto.PostgreSQL.html#stringAgg" class="link">Source</a> <a href="#v:stringAgg" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Database-Esqueleto-Internal-Internal.html#t:SqlString" title="Database.Esqueleto.Internal.Internal">SqlString</a> s</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> s)</td><td class="doc"><p>Input values.</p></td></tr><tr><td class="src">-&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> s)</td><td class="doc"><p>Delimiter.</p></td></tr><tr><td class="src">-&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> (<a href="../base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> s))</td><td class="doc"><p>Concatenation.</p></td></tr></table></div><div class="doc"><p>(<code>string_agg</code>) Concatenate input values separated by a
 delimiter.</p><p><em>Since: 2.2.8</em></p></div></div><div class="top"><p class="src"><a id="v:stringAggWith" class="def">stringAggWith</a> <a href="src/Database.Esqueleto.PostgreSQL.html#stringAggWith" class="link">Source</a> <a href="#v:stringAggWith" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Database-Esqueleto-Internal-Internal.html#t:SqlString" title="Database.Esqueleto.Internal.Internal">SqlString</a> s</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Database-Esqueleto-PostgreSQL.html#t:AggMode" title="Database.Esqueleto.PostgreSQL">AggMode</a></td><td class="doc"><p>Aggregate mode (ALL or DISTINCT)</p></td></tr><tr><td class="src">-&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> s)</td><td class="doc"><p>Input values.</p></td></tr><tr><td class="src">-&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> s)</td><td class="doc"><p>Delimiter.</p></td></tr><tr><td class="src">-&gt; [<a href="Database-Esqueleto-Internal-Internal.html#t:OrderByClause" title="Database.Esqueleto.Internal.Internal">OrderByClause</a>]</td><td class="doc"><p>ORDER BY clauses</p></td></tr><tr><td class="src">-&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> (<a href="../base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> s))</td><td class="doc"><p>Concatenation.</p></td></tr></table></div><div class="doc"><p>(<code>string_agg</code>) Concatenate input values separated by a
 delimiter.</p></div></div><div class="top"><p class="src"><a id="v:maybeArray" class="def">maybeArray</a> :: (<a href="Database-Esqueleto-Experimental.html#t:PersistField" title="Database.Esqueleto.Experimental">PersistField</a> a, <a href="Database-Esqueleto-Experimental.html#t:PersistField" title="Database.Esqueleto.Experimental">PersistField</a> [a]) =&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> (<a href="../base-4.18.1.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> [a])) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> [a]) <a href="src/Database.Esqueleto.PostgreSQL.html#maybeArray" class="link">Source</a> <a href="#v:maybeArray" class="selflink">#</a></p><div class="doc"><p>Coalesce an array with an empty default value</p></div></div><div class="top"><p class="src"><a id="v:chr" class="def">chr</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:SqlString" title="Database.Esqueleto.Internal.Internal">SqlString</a> s =&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> <a href="../base-4.18.1.0/Data-Int.html#t:Int" title="Data.Int">Int</a>) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> s) <a href="src/Database.Esqueleto.PostgreSQL.html#chr" class="link">Source</a> <a href="#v:chr" class="selflink">#</a></p><div class="doc"><p>(<code>chr</code>) Translate the given integer to a character. (Note the result will
 depend on the character set of your database.)</p><p><em>Since: 2.2.11</em></p></div></div><div class="top"><p class="src"><a id="v:now_" class="def">now_</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> <a href="../time-1.12.2/Data-Time-Clock.html#t:UTCTime" title="Data.Time.Clock">UTCTime</a>) <a href="src/Database.Esqueleto.PostgreSQL.html#now_" class="link">Source</a> <a href="#v:now_" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:random_" class="def">random_</a> :: (<a href="Database-Esqueleto-Experimental.html#t:PersistField" title="Database.Esqueleto.Experimental">PersistField</a> a, <a href="../base-4.18.1.0/Prelude.html#t:Num" title="Prelude">Num</a> a) =&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> a) <a href="src/Database.Esqueleto.PostgreSQL.html#random_" class="link">Source</a> <a href="#v:random_" class="selflink">#</a></p><div class="doc"><p>(<code>random()</code>) Split out into database specific modules
 because MySQL uses `rand()`.</p><p><em>Since: 2.6.0</em></p></div></div><div class="top"><p class="src"><a id="v:upsert" class="def">upsert</a> <a href="src/Database.Esqueleto.PostgreSQL.html#upsert" class="link">Source</a> <a href="#v:upsert" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="../base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="Database-Esqueleto-Experimental.html#t:PersistEntity" title="Database.Esqueleto.Experimental">PersistEntity</a> record, <a href="Database-Esqueleto-Experimental.html#t:OnlyOneUniqueKey" title="Database.Esqueleto.Experimental">OnlyOneUniqueKey</a> record, <a href="Database-Esqueleto-Experimental.html#t:PersistRecordBackend" title="Database.Esqueleto.Experimental">PersistRecordBackend</a> record <a href="Database-Esqueleto-Experimental.html#t:SqlBackend" title="Database.Esqueleto.Experimental">SqlBackend</a>, <a href="Database-Esqueleto-Experimental.html#t:IsPersistBackend" title="Database.Esqueleto.Experimental">IsPersistBackend</a> (<a href="Database-Esqueleto-Experimental.html#t:PersistEntityBackend" title="Database.Esqueleto.Experimental">PersistEntityBackend</a> record))</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; record</td><td class="doc"><p>new record to insert</p></td></tr><tr><td class="src">-&gt; [<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> record) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> <a href="Database-Esqueleto-Internal-Internal.html#t:Update" title="Database.Esqueleto.Internal.Internal">Update</a>]</td><td class="doc"><p>updates to perform if the record already exists</p></td></tr><tr><td class="src">-&gt; <a href="../mtl-2.3.1/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> <a href="Database-Esqueleto-Experimental.html#t:SqlBackend" title="Database.Esqueleto.Experimental">SqlBackend</a> m (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> record)</td><td class="doc"><p>the record in the database after the operation</p></td></tr></table></div></div><div class="top"><p class="src"><a id="v:upsertBy" class="def">upsertBy</a> <a href="src/Database.Esqueleto.PostgreSQL.html#upsertBy" class="link">Source</a> <a href="#v:upsertBy" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: (<a href="../base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="Database-Esqueleto-Experimental.html#t:PersistEntity" title="Database.Esqueleto.Experimental">PersistEntity</a> record, <a href="Database-Esqueleto-Experimental.html#t:IsPersistBackend" title="Database.Esqueleto.Experimental">IsPersistBackend</a> (<a href="Database-Esqueleto-Experimental.html#t:PersistEntityBackend" title="Database.Esqueleto.Experimental">PersistEntityBackend</a> record))</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Database-Esqueleto-Experimental.html#t:Unique" title="Database.Esqueleto.Experimental">Unique</a> record</td><td class="doc"><p>uniqueness constraint to find by</p></td></tr><tr><td class="src">-&gt; record</td><td class="doc"><p>new record to insert</p></td></tr><tr><td class="src">-&gt; [<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> record) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> <a href="Database-Esqueleto-Internal-Internal.html#t:Update" title="Database.Esqueleto.Internal.Internal">Update</a>]</td><td class="doc"><p>updates to perform if the record already exists</p></td></tr><tr><td class="src">-&gt; <a href="../mtl-2.3.1/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> <a href="Database-Esqueleto-Experimental.html#t:SqlBackend" title="Database.Esqueleto.Experimental">SqlBackend</a> m (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> record)</td><td class="doc"><p>the record in the database after the operation</p></td></tr></table></div></div><div class="top"><p class="src"><a id="v:insertSelectWithConflict" class="def">insertSelectWithConflict</a> <a href="src/Database.Esqueleto.PostgreSQL.html#insertSelectWithConflict" class="link">Source</a> <a href="#v:insertSelectWithConflict" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <span class="keyword">forall</span> a m val backend. (<a href="Database-Esqueleto-Internal-Internal.html#t:FinalResult" title="Database.Esqueleto.Internal.Internal">FinalResult</a> a, <a href="Database-Esqueleto-Internal-Internal.html#t:KnowResult" title="Database.Esqueleto.Internal.Internal">KnowResult</a> a <a href="../base-4.18.1.0/Data-Type-Equality.html#t:-126-" title="Data.Type.Equality">~</a> <a href="Database-Esqueleto-Experimental.html#t:Unique" title="Database.Esqueleto.Experimental">Unique</a> val, <a href="../base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="Database-Esqueleto-Experimental.html#t:PersistEntity" title="Database.Esqueleto.Experimental">PersistEntity</a> val, <a href="Database-Esqueleto-Experimental.html#t:SqlBackendCanWrite" title="Database.Esqueleto.Experimental">SqlBackendCanWrite</a> backend)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; a</td><td class="doc"><p>Unique constructor or a unique, this is used just to get the name of
 the postgres constraint, the value(s) is(are) never used, so if you have
 a unique &quot;MyUnique 0&quot;, &quot;MyUnique undefined&quot; would work as well.</p></td></tr><tr><td class="src">-&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlQuery" title="Database.Esqueleto.Internal.Internal">SqlQuery</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Insertion" title="Database.Esqueleto.Internal.Internal">Insertion</a> val))</td><td class="doc"><p>Insert query.</p></td></tr><tr><td class="src">-&gt; (<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> val) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> val) -&gt; [<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> val) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> <a href="Database-Esqueleto-Internal-Internal.html#t:Update" title="Database.Esqueleto.Internal.Internal">Update</a>])</td><td class="doc"><p>A list of updates to be applied in case of the constraint being
 violated. The expression takes the current and excluded value to produce
 the updates.</p></td></tr><tr><td class="src">-&gt; <a href="../mtl-2.3.1/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> backend m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Inserts into a table the results of a query similar to <code><a href="Database-Esqueleto-Internal-Internal.html#v:insertSelect" title="Database.Esqueleto.Internal.Internal">insertSelect</a></code> but allows
 to update values that violate a constraint during insertions.</p><p>Example of usage:</p><pre>share [ mkPersist sqlSettings
      , mkDeleteCascade sqlSettings
      , mkMigrate &quot;migrate&quot;
      ] [persistLowerCase|
  Bar
    num Int
    deriving Eq Show
  Foo
    num Int
    UniqueFoo num
    deriving Eq Show
|]

insertSelectWithConflict
  UniqueFoo -- (UniqueFoo undefined) or (UniqueFoo anyNumber) would also work
  (from $ b -&gt;
    return $ Foo &lt;# (b ^. BarNum)
  )
  (current excluded -&gt;
    [FooNum =. (current ^. FooNum) +. (excluded ^. FooNum)]
  )
</pre><p>Inserts to table Foo all Bar.num values and in case of conflict SomeFooUnique,
 the conflicting value is updated to the current plus the excluded.</p><p><em>Since: 3.1.3</em></p></div></div><div class="top"><p class="src"><a id="v:insertSelectWithConflictCount" class="def">insertSelectWithConflictCount</a> :: <span class="keyword">forall</span> a val m backend. (<a href="Database-Esqueleto-Internal-Internal.html#t:FinalResult" title="Database.Esqueleto.Internal.Internal">FinalResult</a> a, <a href="Database-Esqueleto-Internal-Internal.html#t:KnowResult" title="Database.Esqueleto.Internal.Internal">KnowResult</a> a <a href="../base-4.18.1.0/Data-Type-Equality.html#t:-126-" title="Data.Type.Equality">~</a> <a href="Database-Esqueleto-Experimental.html#t:Unique" title="Database.Esqueleto.Experimental">Unique</a> val, <a href="../base-4.18.1.0/Control-Monad-IO-Class.html#t:MonadIO" title="Control.Monad.IO.Class">MonadIO</a> m, <a href="Database-Esqueleto-Experimental.html#t:PersistEntity" title="Database.Esqueleto.Experimental">PersistEntity</a> val, <a href="Database-Esqueleto-Experimental.html#t:SqlBackendCanWrite" title="Database.Esqueleto.Experimental">SqlBackendCanWrite</a> backend) =&gt; a -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlQuery" title="Database.Esqueleto.Internal.Internal">SqlQuery</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Insertion" title="Database.Esqueleto.Internal.Internal">Insertion</a> val)) -&gt; (<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> val) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> val) -&gt; [<a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Experimental.html#t:Entity" title="Database.Esqueleto.Experimental">Entity</a> val) -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> <a href="Database-Esqueleto-Internal-Internal.html#t:Update" title="Database.Esqueleto.Internal.Internal">Update</a>]) -&gt; <a href="../mtl-2.3.1/Control-Monad-Reader.html#t:ReaderT" title="Control.Monad.Reader">ReaderT</a> backend m <a href="../base-4.18.1.0/Data-Int.html#t:Int64" title="Data.Int">Int64</a> <a href="src/Database.Esqueleto.PostgreSQL.html#insertSelectWithConflictCount" class="link">Source</a> <a href="#v:insertSelectWithConflictCount" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="Database-Esqueleto-PostgreSQL.html#v:insertSelectWithConflict" title="Database.Esqueleto.PostgreSQL">insertSelectWithConflict</a></code> but returns the number of rows affected.</p><p><em>Since: 3.1.3</em></p></div></div><div class="top"><p class="src"><a id="v:noWait" class="def">noWait</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:OnLockedBehavior" title="Database.Esqueleto.Internal.Internal">OnLockedBehavior</a> <a href="src/Database.Esqueleto.PostgreSQL.html#noWait" class="link">Source</a> <a href="#v:noWait" class="selflink">#</a></p><div class="doc"><p><code>NOWAIT</code> syntax for postgres locking
 error will be thrown if locked rows are attempted to be selected</p><p><em>Since: 3.5.9.0</em></p></div></div><div class="top"><p class="src"><a id="v:wait" class="def">wait</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:OnLockedBehavior" title="Database.Esqueleto.Internal.Internal">OnLockedBehavior</a> <a href="src/Database.Esqueleto.PostgreSQL.html#wait" class="link">Source</a> <a href="#v:wait" class="selflink">#</a></p><div class="doc"><p>default behaviour of postgres locks. will attempt to wait for locks to expire</p><p><em>Since: 3.5.9.0</em></p></div></div><div class="top"><p class="src"><a id="v:skipLocked" class="def">skipLocked</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:OnLockedBehavior" title="Database.Esqueleto.Internal.Internal">OnLockedBehavior</a> <a href="src/Database.Esqueleto.PostgreSQL.html#skipLocked" class="link">Source</a> <a href="#v:skipLocked" class="selflink">#</a></p><div class="doc"><p>`SKIP LOCKED` syntax for postgres locking
 locked rows will be skipped</p><p><em>Since: 3.5.9.0</em></p></div></div><div class="top"><p class="src"><a id="v:forUpdateOf" class="def">forUpdateOf</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:LockableEntity" title="Database.Esqueleto.Internal.Internal">LockableEntity</a> a =&gt; a -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:OnLockedBehavior" title="Database.Esqueleto.Internal.Internal">OnLockedBehavior</a> -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlQuery" title="Database.Esqueleto.Internal.Internal">SqlQuery</a> () <a href="src/Database.Esqueleto.PostgreSQL.html#forUpdateOf" class="link">Source</a> <a href="#v:forUpdateOf" class="selflink">#</a></p><div class="doc"><p>`FOR UPDATE OF` syntax for postgres locking
 allows locking of specific tables with an update lock in a view or join</p><p><em>Since: 3.5.9.0</em></p></div></div><div class="top"><p class="src"><a id="v:forShareOf" class="def">forShareOf</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:LockableEntity" title="Database.Esqueleto.Internal.Internal">LockableEntity</a> a =&gt; a -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:OnLockedBehavior" title="Database.Esqueleto.Internal.Internal">OnLockedBehavior</a> -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlQuery" title="Database.Esqueleto.Internal.Internal">SqlQuery</a> () <a href="src/Database.Esqueleto.PostgreSQL.html#forShareOf" class="link">Source</a> <a href="#v:forShareOf" class="selflink">#</a></p><div class="doc"><p>`FOR SHARE OF` syntax for postgres locking
 allows locking of specific tables with a share lock in a view or join</p><p><em>Since: 3.5.9.0</em></p></div></div><div class="top"><p class="src"><a id="v:filterWhere" class="def">filterWhere</a> <a href="src/Database.Esqueleto.PostgreSQL.html#filterWhere" class="link">Source</a> <a href="#v:filterWhere" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> a)</td><td class="doc"><p>Aggregate function</p></td></tr><tr><td class="src">-&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> <a href="../base-4.18.1.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>)</td><td class="doc"><p>Filter clause</p></td></tr><tr><td class="src">-&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Allow aggregate functions to take a filter clause.</p><p>Example of usage:</p><pre>share [mkPersist sqlSettings] [persistLowerCase|
  User
    name Text
    deriving Eq Show
  Task
    userId UserId
    completed Bool
    deriving Eq Show
|]

select $ from $ (users <code><a href="Database-Esqueleto-Internal-Internal.html#t:InnerJoin" title="Database.Esqueleto.Internal.Internal">InnerJoin</a></code> tasks) -&gt; do
  on $ users ^. UserId ==. tasks ^. TaskUserId
  groupBy $ users ^. UserId
  return
   ( users ^. UserId
   , count (tasks ^. TaskId) <code><a href="Database-Esqueleto-PostgreSQL.html#v:filterWhere" title="Database.Esqueleto.PostgreSQL">filterWhere</a></code> (tasks ^. TaskCompleted ==. val True)
   , count (tasks ^. TaskId) <code><a href="Database-Esqueleto-PostgreSQL.html#v:filterWhere" title="Database.Esqueleto.PostgreSQL">filterWhere</a></code> (tasks ^. TaskCompleted ==. val False)
   )
</pre><p><em>Since: 3.3.3.3</em></p></div></div><div class="top"><p class="src"><a id="v:values" class="def">values</a> :: (<a href="Database-Esqueleto-Internal-Internal.html#t:ToSomeValues" title="Database.Esqueleto.Internal.Internal">ToSomeValues</a> a, <a href="Database-Esqueleto-Experimental-ToAliasReference.html#t:ToAliasReference" title="Database.Esqueleto.Experimental.ToAliasReference">ToAliasReference</a> a, <a href="Database-Esqueleto-Experimental-ToAlias.html#t:ToAlias" title="Database.Esqueleto.Experimental.ToAlias">ToAlias</a> a) =&gt; <a href="../base-4.18.1.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> a -&gt; <a href="Database-Esqueleto-Experimental-From.html#t:From" title="Database.Esqueleto.Experimental.From">From</a> a <a href="src/Database.Esqueleto.PostgreSQL.html#values" class="link">Source</a> <a href="#v:values" class="selflink">#</a></p><div class="doc"><p>Allows to use `VALUES (..)` in-memory set of values
 in RHS of <code><a href="Database-Esqueleto-Internal-Internal.html#v:from" title="Database.Esqueleto.Internal.Internal">from</a></code> expressions. Useful for JOIN's on
 known values which also can be additionally preprocessed
 somehow on db side with usage of inner PostgreSQL capabilities.</p><p>Example of usage:</p><pre>share [mkPersist sqlSettings] [persistLowerCase|
  User
    name Text
    age Int
    deriving Eq Show

select $ do
 bound :&amp; user &lt;- from $
     values (   (val (10 :: Int), val (&quot;ten&quot; :: Text))
           :| [ (val 20, val &quot;twenty&quot;)
              , (val 30, val &quot;thirty&quot;) ]
           )
     <code><a href="Database-Esqueleto-Internal-Internal.html#t:InnerJoin" title="Database.Esqueleto.Internal.Internal">InnerJoin</a></code> table User
     <code><a href="Database-Esqueleto-Internal-Internal.html#v:on" title="Database.Esqueleto.Internal.Internal">on</a></code> (((bound, _boundName) :&amp; user) -&gt; user^.UserAge &gt;=. bound)
 groupBy bound
 pure (bound, count @Int $ user^.UserName)
</pre><p><em>Since: 3.5.2.3</em></p></div></div><a href="#g:1" id="g:1"><h1>Internal</h1></a><div class="top"><p class="src"><a id="v:unsafeSqlAggregateFunction" class="def">unsafeSqlAggregateFunction</a> :: <a href="Database-Esqueleto-Internal-Internal.html#t:UnsafeSqlFunctionArgument" title="Database.Esqueleto.Internal.Internal">UnsafeSqlFunctionArgument</a> a =&gt; <a href="../text-2.0.2/Data-Text-Lazy-Builder.html#t:Builder" title="Data.Text.Lazy.Builder">Builder</a> -&gt; <a href="Database-Esqueleto-PostgreSQL.html#t:AggMode" title="Database.Esqueleto.PostgreSQL">AggMode</a> -&gt; a -&gt; [<a href="Database-Esqueleto-Internal-Internal.html#t:OrderByClause" title="Database.Esqueleto.Internal.Internal">OrderByClause</a>] -&gt; <a href="Database-Esqueleto-Internal-Internal.html#t:SqlExpr" title="Database.Esqueleto.Internal.Internal">SqlExpr</a> (<a href="Database-Esqueleto-Internal-Internal.html#t:Value" title="Database.Esqueleto.Internal.Internal">Value</a> b) <a href="src/Database.Esqueleto.PostgreSQL.html#unsafeSqlAggregateFunction" class="link">Source</a> <a href="#v:unsafeSqlAggregateFunction" class="selflink">#</a></p><div class="doc"><p>(Internal) Create a custom aggregate functions with aggregate mode</p><p><em>Do</em> <em>not</em> use this function directly, instead define a new function and give
 it a type (see <code><a href="Database-Esqueleto-Internal-Internal.html#v:unsafeSqlBinOp" title="Database.Esqueleto.Internal.Internal">unsafeSqlBinOp</a></code>)</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.1</p></div></body></html>